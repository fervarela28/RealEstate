(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1135:function(t,e,n){"use strict";n.r(e);var o,r,i,a,s=n(9),c=n(543),l=n(587),u=n(547),p=n(46),h=n(92),d=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.prototype.render=function(){var t=this.props.handleClick;return Object(s.h)("div",{class:"right-row"},Object(s.h)("div",{type:"button","data-balloon":this.context.locale.t(h.a.VIEW_IN_VR),"data-balloon-pos":"up",class:p("view-in-vr","ui-icon"),onClick:t},Object(s.h)("span",{class:"icon icon-vr"})))},e}(s.Component),b=n(399),g=n(70),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},m=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClick=n.handleClick.bind(n),n}return y(e,t),e.prototype.handleClick=function(){this.props.toggleOpen(b.a.vrSelect,!this.props.isVrSelectOpen)},e.prototype.render=function(){return Object(s.h)(f,{handleClick:this.handleClick})},e=v([g.b],e)}(s.Component),O=n(581),w=(n(849),n(8)),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},S=function(t){function e(e){var n=t.call(this,e)||this;return n.handleTermsClick=n.handleTermsClick.bind(n),n.handleHelpClick=n.handleHelpClick.bind(n),n.matterportLogo=n.buildMatterportLogo(),n}return _(e,t),e.prototype.handleTermsClick=function(){this.props.toggleOpen("terms",!this.props.isTermsOpen),this.context.analytics.track("showcase_gui",{gui_action:"click_terms_button",interaction_source:"gui"})},e.prototype.handleHelpClick=function(){this.props.toggleOpen("help",!this.props.isHelpOpen)},e.prototype.buildMatterportLogo=function(){for(var t=[],e=1;e<=18;e++)t.push(Object(s.h)("span",{class:"path"+e}));return t},e.prototype.render=function(){var t;return t="1"!==Object(w.q)("mls")?Object(s.h)("a",{class:"link",href:"https://matterport.com",target:"_blank"},Object(s.h)("span",{class:"icon icon-matterport-brand link-active"},this.matterportLogo)):Object(s.h)("span",{class:"icon icon-matterport-brand"},this.matterportLogo),Object(s.h)("div",{id:"footer"},Object(s.h)("div",{id:"footer-terms"},t,Object(s.h)("span",{onClick:this.handleTermsClick,class:"link"},this.context.locale.t(h.a.TERMS)),Object(s.h)("span",null," | "),Object(s.h)("span",{onClick:this.handleHelpClick,class:"link"},this.context.locale.t(h.a.HELP))))},e=E([g.b],e)}(s.Component),C=(n(521),n(546)),P=n(545),k=n(578),j=(n(847),n(3)),T=n(41),L=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),A=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},x=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},D=new j.a("pause-button"),M=function(t){function e(e){var n=t.call(this,e)||this;return n.justEnded=!1,n.stopTour=n.stopTour.bind(n),n.state={justPaused:!1},n}return L(e,t),e.prototype.componentDidUpdate=function(){this.state.justPaused&&this.setState({justPaused:!1}),this.justEnded=!1},e.prototype.componentWillReceiveProps=function(t){!this.props.tourPlaying||t.tourPlaying||this.justEnded||this.setState({justPaused:!0}),this.props.tourEnded&&(this.justEnded=!0)},e.prototype.stopTour=function(){return A(this,void 0,void 0,function(){return x(this,function(t){try{this.context.commandBinder.issueCommand(new T.d)}catch(t){D.debug(t)}return[2]})})},e.prototype.render=function(){var t=this.props.tourPlaying,e=this.state.justPaused;return Object(s.h)("div",{id:"pause-button",class:p({"tour-playing":t}),onClick:this.stopTour,onTouchMove:this.stopTour,onTouchStart:this.stopTour},!t&&Object(s.h)("img",{src:n(845),class:p({justPaused:e})}))},e}(s.Component),I=function(){return(I=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t.MAIL="mail",t.PINTEREST="pinterest",t.LINKEDIN="linkedin",t.TWITTER="twitter",t.FACEBOOK="facebook",t.COPYLINK="copylink"}(a||(a={}));var R,N=function(t){return void 0===t&&(t=""),Object(w.s)().href.replace(/\/workshop-beta|\/work/g,"/show")+t},H=((r={})[a.MAIL]="mailto:?subject=",r[a.PINTEREST]="http://pinterest.com/pin/create/link/?url=",r[a.LINKEDIN]="https://www.linkedin.com/shareArticle?mini=true&url=",r[a.TWITTER]="http://twitter.com/intent/tweet?text=",r[a.FACEBOOK]="http://www.facebook.com/sharer.php?u="+encodeURIComponent(N("&utm_source=1"))+"&t=",r),V=((i={})[a.FACEBOOK]={width:580,height:420},i[a.TWITTER]={width:550,height:440},i[a.PINTEREST]={width:750,height:749},i[a.LINKEDIN]={width:550,height:453},i[a.MAIL]={width:-1,height:-1},i[a.COPYLINK]={width:-1,height:-1},i),F=n(278),B=(n(844),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),U=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},G=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},W=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},z=function(t){function e(e){var n=t.call(this,e)||this;return n.currentSweep="",n.onCopyLinkMouseEnter=function(){n.setState({copied:!1})},n.state={isOpen:!1,copied:!1},n.handleInteraction=n.handleInteraction.bind(n),n.openFacebook=n.openShareWindow.bind(n,a.FACEBOOK),n.openTwitter=n.openShareWindow.bind(n,a.TWITTER),n.openPinterest=n.openShareWindow.bind(n,a.PINTEREST),n.openLinkedIn=n.openShareWindow.bind(n,a.LINKEDIN),n.toggleShareModal=n.toggleShareModal.bind(n),n.onCopyLinkClicked=n.onCopyLinkClicked.bind(n),n.onEmailClicked=n.onEmailClicked.bind(n),n.onSweepChange=n.onSweepChange.bind(n),n}return B(e,t),e.prototype.componentDidMount=function(){return G(this,void 0,void 0,function(){var t,e;return W(this,function(n){switch(n.label){case 0:return[4,this.props.sdk.Model.getDetails()];case 1:return t=n.sent(),e=window.location.origin+"/api/v1/player/models/"+t.sid+"/thumb",this.shareLinks=function(t,e,n){void 0===e&&(e="default");var o=I({},H),r=t.t(h.a.SHARE_EXPLORE),i=t.t(h.a.SHARE_AT),s=t.t(h.a.SHARE_3D),c=t.t(h.a.SHARE_WITH),l=encodeURIComponent(r+e+" "+i+" "),u=encodeURIComponent(r+e+s);return o[a.FACEBOOK]+=l+encodeURIComponent(N("&utm_source=1")),o[a.TWITTER]+=l+encodeURIComponent(N("&utm_source=2")+" "+c+" #Matterport"),o[a.MAIL]+=u+"&body="+l+encodeURIComponent(N("&utm_source=3")),o[a.PINTEREST]+=encodeURIComponent(N("&utm_source=5"))+"&media="+encodeURIComponent(n)+"&description="+u,o[a.LINKEDIN]+=encodeURIComponent(N("&utm_source=6")),o}(this.context.locale,t.name,e),this.props.sdk.on(this.props.sdk.Sweep.Event.ENTER,this.onSweepChange),this.props.canvas&&(this.props.canvas.addEventListener("mousedown",this.handleInteraction),this.props.canvas.addEventListener("pointerdown",this.handleInteraction),this.props.canvas.addEventListener("touchstart",this.handleInteraction)),[2]}})})},e.prototype.componentWillUnmount=function(){this.props.sdk.off(this.props.sdk.Sweep.Event.ENTER,this.onSweepChange),this.props.canvas&&(this.props.canvas.removeEventListener("mousedown",this.handleInteraction),this.props.canvas.removeEventListener("pointerdown",this.handleInteraction),this.props.canvas.removeEventListener("touchstart",this.handleInteraction))},e.prototype.onSweepChange=function(t,e){this.currentSweep=e},e.prototype.handleInteraction=function(){this.state.isOpen&&this.setState({isOpen:!1})},e.prototype.toggleShareModal=function(){var t=this;this.setState(function(e){return e.isOpen||(t.context.analytics.track("showcase_gui",{gui_action:"showcase_share_intent",pano_id:t.currentSweep}),t.context.analytics.track("showcase_share_intent",{pano_id:t.currentSweep})),{isOpen:!e.isOpen}})},e.prototype.openShareWindow=function(t){var e=V[t],n=e.width,o=e.height,r="top="+(window.screenY+(window.innerHeight-o)/2)+",left="+(window.screenX+(window.innerWidth-n)/2)+",width="+n+",height="+o;this.context.analytics.track("showcase_share_action",{channel:t,pano_id:this.currentSweep}),window.open(this.shareLinks[t],"shareWindow",r)},e.prototype.onEmailClicked=function(){window.open(this.shareLinks[a.MAIL],"_blank"),this.context.analytics.track("showcase_share_action",{channel:a.MAIL,pano_id:this.currentSweep})},e.prototype.onCopyLinkClicked=function(){var t=this,e=document.createRange();e.selectNodeContents(this.linkToCopy);var n=window.getSelection();n.removeAllRanges(),n.addRange(e),document.execCommand("copy"),this.setState({copied:!0}),this.context.analytics.track("showcase_share_action",{channel:a.COPYLINK,pano_id:this.currentSweep}),window.setTimeout(function(){t.setState({copied:!1})},2500)},e.prototype.render=function(){var t=this;return Object(s.h)("div",null,Object(s.h)("div",{id:"share"},Object(s.h)("div",{id:"share-button",type:"button","data-balloon":this.context.locale.t(h.a.SOCIAL_SHARING),"data-balloon-pos":this.props.rightMost?"up-left":"up",class:p("ui-icon",{hideTooltip:this.state.isOpen}),onClick:this.toggleShareModal},Object(s.h)("span",{class:"icon icon-share"})),Object(s.h)("div",{id:"share-slider-wrapper"},Object(s.h)("div",{id:"share-slider",class:p({isOpen:this.state.isOpen})},Object(s.h)(F.a,{content:this.state.copied?this.context.locale.t(h.a.SHARE_COPIED):this.context.locale.t(h.a.MENU_COPY),position:F.b.LEFT,tooltipTimeout:2e3,className:p({copied:this.state.copied}),onClick:this.onCopyLinkClicked},Object(s.h)("span",{onMouseEnter:this.onCopyLinkMouseEnter,class:"icon icon-link"})),Object(s.h)("div",{"data-balloon":"Email","data-balloon-pos":"left",onClick:this.onEmailClicked},Object(s.h)("span",{class:"icon icon-email"})),Object(s.h)("div",{"data-balloon":"Pinterest","data-balloon-pos":"left",onClick:this.openPinterest},Object(s.h)("span",{class:"icon icon-pinterest"})),Object(s.h)("div",{"data-balloon":"LinkedIn","data-balloon-pos":"left",onClick:this.openLinkedIn},Object(s.h)("span",{class:"icon icon-linkedin"})),Object(s.h)("div",{"data-balloon":"Twitter","data-balloon-pos":"left",onClick:this.openTwitter},Object(s.h)("span",{class:"icon icon-twitter"})),Object(s.h)("div",{"data-balloon":"Facebook","data-balloon-pos":"left",onClick:this.openFacebook},Object(s.h)("span",{class:"icon icon-facebook"}))))),Object(s.h)("div",null,Object(s.h)("span",{id:"share-url",type:"text",ref:function(e){t.linkToCopy=e}},N("&utm_source=4"))))},e=U([g.b],e)}(s.Component),K=n(150),Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),q=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},X=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Z=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Q=function(t){function e(e){var n=t.call(this,e)||this;return n.isVrButtonEnabled=function(){var t=n.props.guiState.mls,e=n.context.settings.tryGetProperty("vr",1);return!(!e||2===e&&!Object(w.f)())&&0===t},n.isReelEnabled=function(){var t=n.context.settings,e=t.checkUrlParam("hr",1,1),o=t.tryGetProperty(K.a.HighlightReel,!0);return e&&o},n.isTourEnabled=function(){var t=n.context.settings,e=!!t.tryGetProperty("gt",1),o=t.tryGetProperty(K.a.TourButtons,!0);return e&&o},n.isFloorsEnabled=function(){return!!n.context.settings.checkUrlParam("f",1,1)},n.onToggleHLR=function(t){n.setState({reelOpen:t})},n.state={reelOpen:!1},n}return Y(e,t),e.prototype.componentDidMount=function(){return q(this,void 0,void 0,function(){var t,e,n,o,r,i,a=this;return X(this,function(s){n=["vr","hr",K.a.HighlightReel,"gt",K.a.TourButtons];try{for(o=Z(n),r=o.next();!r.done;r=o.next())i=r.value,this.context.settings.onPropertyChanged(i,function(){return a.setState({})})}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return[2]})})},e.prototype.render=function(){var t=this.props.guiState,e=t.toggleOpen,n=t.openComponents,o=t.viewmode,r=t.share,i=t.sdk,a=t.isModalOpen,h=t.modelSupportsVr,d=t.glCanvas,f=t.tourState,b=t.market,g=f.totalSteps,y=f.tourPlaying,v=f.tourEnded,_=f.snapshots,E=f.activeStep,j=f.transition,T=this.state.reelOpen,L=o&&o.split(".").pop(),A=this.isVrButtonEnabled()&&h,x=this.isReelEnabled()&&g>0,D=this.isTourEnabled()&&g>0,I=!Object(w.k)();return Object(s.h)("div",{id:"bottom-ui",class:p({"reel-open":T},L)},Object(s.h)(M,{tourPlaying:y,tourEnded:v}),Object(s.h)("div",{class:p({fadeOut:a})},Object(s.h)("div",{class:"left controls"},(D||x)&&Object(s.h)("div",{id:"highlight-tour-controls"},x&&Object(s.h)(C.a,{reelOpen:T,onToggleHLR:this.onToggleHLR,reelEnabled:x}),D&&Object(s.h)(l.a,{tourEmpty:!1,tourPlaying:y,sdk:i})),Object(s.h)(c.a,{sdk:i,viewmode:o}),this.isFloorsEnabled()&&Object(s.h)(u.a,{market:b,sdk:i,viewmode:o}))," ",Object(s.h)("div",{class:"right controls"},!!r&&Object(s.h)(z,{canvas:d,rightMost:!I&&!A,sdk:i}),A&&Object(s.h)(m,{toggleOpen:e,isVrSelectOpen:n.vrSelect}),I&&Object(s.h)(O.a,null))," ",x&&Object(s.h)(P.a,{transition:j,activeStep:E,snapshots:_,tourPlaying:y,totalSteps:g,editMode:!1,reelOpen:T,onToggleHLR:this.onToggleHLR})),Object(s.h)("div",{class:p({"footer-ui":!0,modalOpen:a})},Object(s.h)(k.a,{activeStep:E,tourPlaying:y,totalSteps:g,reelOpen:T,onToggleHLR:this.onToggleHLR}),Object(s.h)(S,{isTermsOpen:n.terms,isHelpOpen:n.help,toggleOpen:e})))},e}(s.Component),J=(n(842),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),$=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},tt=function(t){function e(e){return t.call(this,e)||this}return J(e,t),e.prototype.render=function(){var t,e=this.props.mode===R.Expanded,n=this.props.mode===R.Collapsed,o=this.props.formattedAddress?Object(s.h)("div",{class:"address"},Object(s.h)("i",{class:"icon-pin"}," "),this.props.formattedAddress):null,r=this.props.summary?Object(s.h)("div",{class:"summary-description"},this.props.summary):null,i=this.props.contactName?Object(s.h)("span",{id:"summary-name"},this.props.contactName,Object(s.h)("br",null)):null,a=this.props.formattedContactPhone?this.props.formattedContactPhone:this.props.phone;t=a&&Object(w.k)()?Object(s.h)("div",null,Object(s.h)("a",{id:"phone",href:"tel:"+this.props.phone},a)):a?Object(s.h)("span",{id:"summary-phone"},a,Object(s.h)("br",null)):null;var c=this.props.contactEmail?Object(s.h)("a",{id:"email",href:"mailto:"+this.props.contactEmail},this.props.contactEmail,Object(s.h)("br",null)):null,l=!!(i||t||c),u=l?Object(s.h)("i",{class:"icon-user"}," "):null,d=l?Object(s.h)("span",{class:"contact-block"},u,Object(s.h)("div",{class:"contact-data"},i,t,c)):null,f=this.props.shareUrl&&Object(s.h)("div",{id:"share-link"},Object(s.h)("hr",null),Object(s.h)("i",{class:"icon-ext-link"}),Object(s.h)("div",null,Object(s.h)("span",null,this.context.locale.t(h.a.WEBVR_LEARN_MORE)+": "),Object(s.h)("a",{onClick:this.props.onShareLinkClicked,href:this.props.shareUrl,target:"_blank"},this.props.shareUrl))),b=p({"main-title":!0,expanded:e=!(!e||!(l||o||r)),collapsed:n}),g=p({"summary-details":!0,expanded:e,collapsed:n,hasShare:!!f});return Object(s.h)("div",{id:"summary-wrapper",class:b},Object(s.h)("div",{class:g},r,d,o,f))},e=$([g.b],e)}(s.Component),et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ot=function(t){function e(e){return t.call(this,e)||this}return et(e,t),e.prototype.render=function(){var t=this.props.mode===R.Collapsed?"right":"left";return Object(s.h)("div",{id:"title-toggle",onClick:this.props.handleClick},Object(s.h)("span",{class:"icon icon-dpad-"+t}))},e=nt([g.b],e)}(s.Component),rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},at=function(t){function e(e){return t.call(this,e)||this}return rt(e,t),e.prototype.collapsed=function(){return this.props.mode===R.Collapsed},e.prototype.expanded=function(){return this.props.mode===R.Expanded},e.prototype.render=function(){var t=this.props.presentedBy,e=this.expanded()?this.context.locale.t(h.a.LESS):this.context.locale.t(h.a.MORE),n=this.expanded()?"up":"down",o=p({"main-title":!0,collapsed:this.collapsed()}),r=p({"co-brand":!0,hidden:!t}),i=p({titleText:!0,noCoBrand:!t});return Object(s.h)("div",{type:"button","data-balloon":this.props.name,"data-balloon-pos":"down",class:p("main-title-row",this.collapsed()||this.expanded()?"hideTooltip":""),style:"display: inline-block",onClick:this.props.handleClick},Object(s.h)("div",{id:"main-title-wrapper"},Object(s.h)("div",{class:o},Object(s.h)("div",{class:r},this.context.locale.t(h.a.PRESENTED_BY),Object(s.h)("span",{class:"title",id:"cobrandTitle"}," ",t)),this.props.showHint?Object(s.h)("div",{class:"hint"},Object(s.h)("span",{id:e.toLowerCase()+"-hint"},e+" ",Object(s.h)("span",{class:"icon icon-dpad-"+n}))):null,Object(s.h)("div",{id:"gui-name",class:i},this.props.name))))},e=it([g.b],e)}(s.Component),st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ct=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},lt=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},ut=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pt=new j.a("title-bar"),ht=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleTitleCollapse=function(){n.setState(n.toggleMode(R.Collapsed))},n.toggleTitleExpand=function(){n.state.mode===R.Expanded?n.setState(n.toggleMode(R.Normal)):n.setState(n.toggleMode(R.Expanded))},n.onShareLinkClicked=function(t){t.preventDefault(),n.context.analytics.track("showcase_share_origin_link_clicked"),window.open(n.state.shareUrl)},n}return st(e,t),e.prototype.componentDidMount=function(){return lt(this,void 0,void 0,function(){var t,e;return ut(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.props.sdk.Model.getDetails()];case 1:return t=n.sent(),this.setState({mode:R.Normal,lastMode:R.Normal,name:t.name,presentedBy:t.presentedBy,summary:t.summary,formattedAddress:t.formattedAddress,phone:t.phone,formattedContactPhone:t.formattedContactPhone,contactEmail:t.contactEmail,contactName:t.contactName,shareUrl:t.shareUrl}),[3,3];case 2:return e=n.sent(),pt.debug(e),[3,3];case 3:return[2]}})})},e.prototype.toggleMode=function(t){return this.props.toggleOpen(b.a.titleBar,t===R.Expanded),function(e,n){return{mode:e.mode===t?e.lastMode:t,lastMode:e.mode}}},e.prototype.render=function(){var t=!this.props.branding||1===this.props.mls||2===this.props.mls,e=t?"":this.state.presentedBy,n=t?"":this.state.phone,o=t?"":this.state.formattedContactPhone,r=t?"":this.state.contactEmail,i=t?"":this.state.contactName,a=this.props.share?this.state.shareUrl:"",c=""!==this.state.summary||""!==this.state.formattedAddress||""!==r||""!==i||""!==o||""!==n;return Object(s.h)("div",{id:"model-title",className:p(R[this.state.mode])},Object(s.h)("div",{class:"title-row"},Object(s.h)(ot,{mode:this.state.mode,handleClick:this.toggleTitleCollapse}),Object(s.h)(at,{name:this.state.name,mode:this.state.mode,showHint:c,presentedBy:e,handleClick:this.toggleTitleExpand})),Object(s.h)("div",{class:"details-row"},Object(s.h)(tt,{mode:this.state.mode,summary:this.state.summary,formattedAddress:this.state.formattedAddress,phone:n,formattedContactPhone:o,contactEmail:r,contactName:i,shareUrl:a,onShareLinkClicked:this.onShareLinkClicked})))},e=ct([g.b],e)}(s.Component);!function(t){t[t.Collapsed=0]="Collapsed",t[t.Normal=1]="Normal",t[t.Expanded=2]="Expanded"}(R||(R={}));n(840);var dt,ft=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=function(t){function e(e){var n=t.call(this,e)||this;return n.checkTitleEnabled=function(){var t=0!==n.props.guiState.title,e=2!==n.props.guiState.mls,o=n.props.guiState.modelName;return t&&e&&o},n.state={titleEnabled:!0},n}return ft(e,t),e.prototype.render=function(){var t=p({fadeOut:this.props.guiState.isModalOpen||this.props.guiState.tourState.tourPlaying});return Object(s.h)("div",{id:"top-ui",class:t},this.checkTitleEnabled()&&Object(s.h)(ht,{share:this.props.guiState.share,branding:this.props.guiState.branding,mls:this.props.guiState.mls,sdk:this.props.guiState.sdk,toggleOpen:this.props.guiState.toggleOpen}))},e}(s.Component),gt=n(549),yt=n(544),vt=n(548),mt=(n(832),n(473),n(511)),Ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wt=function(t){function e(e){return t.call(this,e)||this}return Ot(e,t),e}(mt.a),_t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Et=function(t){function e(e){return t.call(this,e)||this}return _t(e,t),e}(mt.a),St=n(393),Ct=n(20),Pt=n(161),kt=n(154),jt=n(71),Tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},At=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},xt=function(t){function e(e){var n=t.call(this,e)||this;return n.refreshVisibility=function(){var t=n.context.settings.tryGetProperty(Pt.a,!1),e=n.context.settings.tryGetProperty(K.a.Labels,!1),o=n.context.settings.tryGetProperty(jt.a,!1),r=n.context.settings.tryGetProperty(K.a.Measurements,!1);n.setState({labels:t&&e,measurements:o&&r,mattertags:n.context.settings.tryGetProperty(kt.a,!1)})},n.state={mattertags:!1,labels:!1,measurements:!1},n}return Tt(e,t),e.prototype.componentDidMount=function(){return Lt(this,void 0,void 0,function(){return At(this,function(t){return this.context.settings.onPropertyChanged(Pt.a,this.refreshVisibility),this.context.settings.onPropertyChanged(K.a.Labels,this.refreshVisibility),this.context.settings.onPropertyChanged(kt.a,this.refreshVisibility),this.context.settings.onPropertyChanged(K.a.Measurements,this.refreshVisibility),this.context.settings.onPropertyChanged(jt.a,this.refreshVisibility),this.refreshVisibility(),[2]})})},e.prototype.componentWillUnmount=function(){this.context.settings.removeOnPropertyChanged(Pt.a,this.refreshVisibility),this.context.settings.removeOnPropertyChanged(K.a.Labels,this.refreshVisibility),this.context.settings.removeOnPropertyChanged(kt.a,this.refreshVisibility),this.context.settings.removeOnPropertyChanged(K.a.Measurements,this.refreshVisibility),this.context.settings.removeOnPropertyChanged(jt.a,this.refreshVisibility)},e.prototype.render=function(){var t=this.props,e=t.viewmode,n=t.toggleOpen,o=t.sdk,r=t.tourPlaying;return Object(s.h)("div",{id:"overlay-ui"},this.state.mattertags&&Object(s.h)(gt.a,{tourPlaying:r,sdk:o,editMode:!1,toggleOpen:n}),this.state.labels&&Object(s.h)(yt.a,{sdk:o,viewmode:e,component:wt,dataType:St.a,modes:[Ct.b.FLOORPLAN]}),this.state.measurements&&Object(s.h)(vt.a,{sdk:o,viewmode:e,component:Et,modes:[Ct.b.FLOORPLAN,Ct.b.INSIDE,Ct.b.DOLLHOUSE]}))},e}(s.Component),Dt=(n(830),n(363)),Mt=n(452),It=n(338),Rt=n(455),Nt=n(96),Ht=(n(827),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Vt=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Ft=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Bt=function(t){function e(e){var n=t.call(this,e)||this;return n.state={termsText:"",show:!1,scrollClass:It.c.None},n.onScrollPositionChange=n.onScrollPositionChange.bind(n),n.closeModal=n.closeModal.bind(n),n}return Ht(e,t),e.prototype.componentDidMount=function(){return Vt(this,void 0,void 0,function(){var t,e,n,o=this;return Ft(this,function(r){switch(r.label){case 0:t=this.context.locale.languageCode,e="./terms/terms-"+t+".html",n="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,new Nt.RequestQueue({retries:0}).get(e)];case 2:return n=r.sent(),[3,4];case 3:return r.sent(),n=this.context.locale.t(h.a.TERMS_FAIL),[3,4];case 4:return window.requestAnimationFrame(function(){o.setState({show:!0,termsText:n})}),[2]}})})},e.prototype.componentDidUpdate=function(t,e){this.state.termsText!==e.termsText&&(this.termsTextDiv.innerHTML=this.state.termsText,[].slice.call(this.termsTextDiv.querySelectorAll("a")).forEach(function(t){t.setAttribute("target","_blank")}))},e.prototype.onScrollPositionChange=function(){this.scrollbars&&this.setState({scrollClass:this.scrollbars.scrollPosition.vertical})},e.prototype.closeModal=function(){this.props.toggleOpen(b.a.terms,!1)},e.prototype.render=function(){var t,e=this,n=p(((t={fadeIn:this.state.show})[this.state.scrollClass]=!0,t));return Object(s.h)("div",{id:"terms-modal",class:n},Object(s.h)("div",{id:"terms-wrapper"},Object(s.h)(Dt.a,{name:"terms",ref:function(t){return e.scrollbars=t},onScrollPositionChange:this.onScrollPositionChange,forceHidden:Object(Rt.a)(window)},Object(s.h)("div",{ref:function(t){return e.termsTextDiv=t},id:"terms-text"}))),Object(s.h)(Mt.a,{closeModal:this.closeModal}))},e}(s.Component),Ut=(n(658),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Gt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.render=function(){var t=this.props,e=t.componentStyle,n=t.style,o=t.onClick,r=t.children;return Object(s.h)("div",{class:p(e,this.props.class),style:n,onClick:o},r)},e=Gt([g.b],e)}(s.Component),zt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zt(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.children;return Object(s.h)(Wt,{componentStyle:"title",class:this.props.class,style:e},n)},e=Kt([g.b],e)}(s.Component),qt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qt(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.children,o=Array.isArray(n)&&n.length>0;return Object(s.h)(Wt,{componentStyle:o?void 0:"close",class:this.props.class,style:e,onClick:this.context.onModalHide},o?n:Object(s.h)("i",{class:"icon icon-close"}))},e=Xt([g.b],e)}(s.Component),Qt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qt(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.children;return Object(s.h)(Wt,{componentStyle:"body",class:this.props.class,style:e},n)},e=Jt([g.b],e)}(s.Component),te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ee=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.children;return Object(s.h)(Wt,{componentStyle:"footer",class:this.props.class,style:e},n)},e=ee([g.b],e)}(s.Component),oe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),re=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oe(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.children;return Object(s.h)(Wt,{componentStyle:"buttons",class:this.props.class,style:e},n)},e=re([g.b],e)}(s.Component),ae=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),se=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ae(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.onClick,o=t.children;return Object(s.h)(Wt,{componentStyle:"button",class:this.props.class,style:e,onClick:n},o)},e=se([g.b],e)}(s.Component),le=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ue=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return le(e,t),e.prototype.getChildContext=function(){return this._context||(this._context={onModalHide:this.props.onHide})},e.prototype.render=function(){var t=this.props,e=t.show,n=t.fixed,o=t.id,r=t.children,i=t.style;return Object(s.h)("div",{id:o,class:p("modal",{fadeIn:e},{fixed:n},this.props.class),style:i},r)},e.Title=Yt,e.Dismiss=Zt,e.Body=$t,e.Footer=ne,e.ButtonGroup=ie,e.Button=ce,e=ue([g.b],e)}(s.Component),he=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),de=function(t){function e(e){var n=t.call(this,e)||this;return n.onHide=n.onHide.bind(n),n}return he(e,t),e.prototype.onHide=function(){this.props.toggleOpen(b.a.vrSelect,!1)},e.prototype.renderPrevious=function(t,e){var n=this.props.previous,o=this.context.locale;return 0===t?null:Object(s.h)(pe.Button,{onClick:n},o.t(h.a.VR_PREVIOUS_CAPS))},e.prototype.renderNext=function(t,e){var n=this.props.next,o=this.context.locale;return t===e-1?Object(s.h)(pe.Dismiss,null,Object(s.h)(pe.Button,null,o.t(h.a.VR_GOT_IT_CAPS))):Object(s.h)(pe.Button,{onClick:n},0===t?o.t(h.a.VR_LEARN_MORE_CAPS):o.t(h.a.VR_NEXT_CAPS))},e.prototype.componentWillReceiveProps=function(t){var e=this;this.props.isVrSelectOpen&&!t.isVrSelectOpen&&setTimeout(function(){e.setState({page:0})},500)},e.prototype.render=function(){var t=this.props,e=t.isVrSelectOpen,n=t.children,o=this.context.locale;if(!n||!Array.isArray(n))return null;var r=this.props,i=r.page,a=r.isMobile,c=n.length,l=c>1?Object(s.h)("div",null,i+1+" / "+c):null;return Object(s.h)(pe,{id:"vrSelect",show:e,onHide:this.onHide,class:a?"mobile":"desktop"},Object(s.h)(pe.Title,null,o.t(h.a.VR_VIEW_SPACE)),Object(s.h)(pe.Dismiss,null),Object(s.h)(pe.Body,null,n[i]),Object(s.h)(pe.Footer,null,l,Object(s.h)(pe.ButtonGroup,null,this.renderPrevious(i,c),this.renderNext(i,c))))},e}(s.Component);!function(t){t.gearVr="gearvr",t.cardboardAndroid="googlevr",t.cardboardIos="googlevrios",t.android="android",t.ios="ios"}(dt||(dt={}));var fe,be=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},ge=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ye=function(){function t(e,n){this.sdk=e,this.sessionId=n,t.queue||(t.queue=new Nt.RequestQueue({retries:0})),this.storeLinks={},this.storeLinks[dt.gearVr]="https://www.oculus.com/experiences/gear-vr/811670972252145/?redirect_uri=",this.storeLinks[dt.cardboardAndroid]="https://play.google.com/store/apps/details?id=com.matterport.mpvrcardboard&redirect_uri=",this.storeLinks[dt.cardboardIos]="https://itunes.apple.com/us/app/matterport-vr/id1168808473&redirect_uri="}return t.prototype.getBranchKey=function(){var e=this.getOrigin();return t.branchKeyPromise||(t.branchKeyPromise=t.queue.get(e+"/api/v1/config/showcase",{responseType:"json"}).then(function(t){return t.branch_key})),t.branchKeyPromise},t.prototype.getBranchLink=function(e,n){return be(this,void 0,Promise,function(){var o,r,i,a,s,c,l,u,p;return ge(this,function(h){switch(h.label){case 0:o="https://support.matterport.com/hc/en-us/articles/224728887-What-do-I-need-for-Virtual-Reality",r="https://api.branch.io/v1/url",i=this.getAppLink(e,n),a="",h.label=1;case 1:return h.trys.push([1,4,,5]),c=(s=t.queue).post,l=[r],u={responseType:"json"},p={},[4,this.getBranchKey()];case 2:return[4,c.apply(s,l.concat([(u.body=(p.branch_key=h.sent(),p.data={m:e.sid,full_url:i,$desktop_url:o,$og_app_id:"331853976762864119",$og_title:e.title,$og_description:e.description,$og_image_url:location.origin+"/api/v1/player/models/"+e.sid+"/thumb",$canonical_url:window.location.href},p),u)])).then(function(t){a=t.url||i})];case 3:return h.sent(),[3,5];case 4:return h.sent(),a=i,[3,5];case 5:return[2,a]}})})},t.prototype.getOrigin=function(){var t=window.location.host;return-1===t.indexOf(".matterport.com")&&-1===t.indexOf("localhost")&&(t="my.matterport.com"),"https://"+t},t.prototype.getReferrer=function(){return w.d()?document.referrer:window.location.href},t.prototype.getSimpleLink=function(t){return this.getOrigin()+"/vr/show/?m="+t},t.prototype.getAppLink=function(t,e){var n=this.getOrigin(),o=this.getReferrer();return w.q("vrcoll",!1)?n+"/vr/dlist/?sids="+t.sid+"&lsid="+t.sid+"&ln="+encodeURIComponent(t.title)+"&ld="+encodeURIComponent(t.description)+"&display="+e+"&utm_medium="+(w.d()?"embed":"direct")+"&utm_source="+o+"&utm_showcase_session_id="+this.sessionId+"&ret="+encodeURIComponent(o):n+"/vr/show/?m="+t.sid+"&display="+e+"&utm_medium="+(w.d()?"embed":"direct")+"&utm_source="+o+"&utm_showcase_session_id="+this.sessionId+"&ret="+encodeURIComponent(o)},t.prototype.getStoreLink=function(t){var e=this.getReferrer(),n=e?"?redirect_uri="+encodeURIComponent(e+"&display="+t):"";return Promise.resolve(""+this.storeLinks[t]+n)},t.prototype.getDeepLink=function(t){return be(this,void 0,Promise,function(){var e,n,o,r,i;return ge(this,function(a){switch(a.label){case 0:return e=this.sdk.Model.getData(),t?[3,2]:(n=this.getSimpleLink,[4,e]);case 1:return[2,n.apply(this,[a.sent().sid])];case 2:return o=this.sdk.Model.getDetails(),i={},[4,e];case 3:return i.sid=a.sent().sid,[4,o];case 4:return i.title=a.sent().name,[4,o];case 5:return i.description=a.sent().summary,r=i,t===dt.cardboardIos?[2,this.getBranchLink(r,t)]:[2,this.getAppLink(r,t)]}})})},t}();!function(t){t.CardboardAndroid="googlevr",t.GearVR="gearvr",t.CardboardIOS="googlevrios",t.Cardboard="googlevr"}(fe||(fe={}));var ve,me=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),e.prototype.render=function(t,e){var n=t.className,o=t.href,r=t.children,i=t.onClick;return Object(s.h)("a",{className:n,href:o,target:"_blank",onClick:i},r)},e}(s.Component),we=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ee=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Se=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return we(e,t),e.prototype.componentDidMount=function(){return Ee(this,void 0,void 0,function(){var t;return Se(this,function(e){switch(e.label){case 0:return[4,this.props.vrLinks.getDeepLink(dt.cardboardIos)];case 1:return t=e.sent(),this.setState({deepLink:t}),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state.deepLink;return Object(s.h)("div",{className:"openVrApp"},Object(s.h)("h1",null,e.t(h.a.VR_SHOW_IOS_1)),Object(s.h)("ul",null,Object(s.h)(Oe,{href:o,onClick:t("launch_vr",{vr_platform:dt.ios,vr_app:fe.CardboardIOS})},Object(s.h)("li",null,Object(s.h)("img",{class:"headset-small",src:n(451)}),Object(s.h)("br",null),e.t(h.a.VR_GOOGLE_CARDBOARD)))),Object(s.h)("div",{className:"caption"},Object(s.h)("i",null,e.t(h.a.VR_SHOW_IOS_2))))},e=_e([g.b],e)}(s.Component),Pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pe(e,t),e.prototype.render=function(){var t=this.context.locale,e=this.props,n=e.next,o=e.onEnterVr;return Object(s.h)("div",{className:"openVrApp"},Object(s.h)("ul",null,Object(s.h)(pe.Button,{onClick:o,style:"margin-top: 40px"},t.t(h.a.WEBVR_ENTER_WEBVR))),Object(s.h)("div",null,Object(s.h)("hr",{style:"margin: 40px"})),Object(s.h)("ul",null,Object(s.h)("div",{className:"hasHover link",onClick:n},t.t(h.a.VR_APP_OPEN))))},e=ke([g.b],e)}(s.Component),Te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ae=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},xe=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},De=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Te(e,t),e.prototype.componentDidMount=function(){return Ae(this,void 0,void 0,function(){var t;return xe(this,function(e){switch(e.label){case 0:return[4,this.props.vrLinks.getStoreLink(dt.cardboardIos)];case 1:return t=e.sent(),this.setState({storeLink:t}),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state.storeLink;return Object(s.h)("div",{className:"whatYoullNeed"},Object(s.h)("h1",null,e.t(h.a.VR_NEED_CARDBOARD)),Object(s.h)("div",{className:"headset"},Object(s.h)("img",{class:"headset-large",src:n(451)})),Object(s.h)("ul",null,Object(s.h)("li",null,Object(s.h)("div",null,Object(s.h)("img",{class:"vr-modal-icon",src:n(824)})),Object(s.h)("span",null,Object(s.h)("strong",null,e.t(h.a.VR_COMPATIBLE_IPHONES_3)),Object(s.h)("br",null),e.t(h.a.VR_COMPATIBLE_IPHONES_2))),Object(s.h)("li",null,Object(s.h)("div",null,Object(s.h)("img",{class:"vr-modal-icon",src:n(657)})),Object(s.h)("span",null,Object(s.h)("strong",null,e.t(h.a.VR_APP_FOR_CARDBOARD)),Object(s.h)("br",null),Object(s.h)(Oe,{href:o,onClick:t("launch_store",{store:fe.CardboardIOS})},e.t(h.a.VR_DOWNLOAD_HERE))))))},e=Le([g.b],e)}(s.Component),Me=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ie=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Re=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Ne=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Me(e,t),e.prototype.componentDidMount=function(){return Re(this,void 0,void 0,function(){var t,e,n,o,r;return Ne(this,function(i){switch(i.label){case 0:return t=this.props.vrLinks,e=t.getDeepLink(dt.cardboardAndroid),n=t.getDeepLink(dt.gearVr),o=this.setState,r={},[4,e];case 1:return r.deepLinkCardboard=i.sent(),[4,n];case 2:return o.apply(this,[(r.deepLinkGearVr=i.sent(),r)]),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state,r=o.deepLinkCardboard,i=o.deepLinkGearVr;return Object(s.h)("div",{className:"openVrApp"},Object(s.h)("h1",null,e.t(h.a.VR_SHOW_SUPPORTED)),Object(s.h)("ul",null,Object(s.h)(Oe,{href:r,onClick:t("launch_vr",{vr_platform:dt.android,vr_app:fe.CardboardAndroid})},Object(s.h)("li",null,Object(s.h)("img",{class:"headset-small",src:n(451)}),Object(s.h)("br",null),e.t(h.a.VR_GOOGLE_CARDBOARD))),Object(s.h)(Oe,{href:i,onClick:t("launch_vr",{vr_platform:dt.android,vr_app:fe.GearVR})},Object(s.h)("li",null,Object(s.h)("img",{class:"headset-small",src:n(510)}),Object(s.h)("br",null),e.t(h.a.VR_SAMSUNG_GEAR_VR)))),Object(s.h)("div",{className:"caption"},Object(s.h)("i",null,e.t(h.a.VR_REQUIRE_HEADSET)),Object(s.h)("br",null),Object(s.h)("i",null,e.t(h.a.VR_REDIRECT_TO_STORE))))},e=Ie([g.b],e)}(s.Component),Ve=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fe=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Be=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Ue=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ve(e,t),e.prototype.componentDidMount=function(){return Be(this,void 0,void 0,function(){var t;return Ue(this,function(e){switch(e.label){case 0:return[4,this.props.vrLinks.getStoreLink(dt.cardboardAndroid)];case 1:return t=e.sent(),this.setState({storeLink:t}),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state.storeLink;return Object(s.h)("div",{className:"whatYoullNeed"},Object(s.h)("h1",null,e.t(h.a.VR_NEED_CARDBOARD)),Object(s.h)("div",{className:"headset"},Object(s.h)("img",{class:"headset-large",src:n(451)})),Object(s.h)("ul",null,Object(s.h)("li",null,Object(s.h)("div",null,Object(s.h)("img",{class:"vr-modal-icon",src:n(823)})),Object(s.h)("span",null,Object(s.h)("strong",null,e.t(h.a.VR_COMPATIBLE_ANDROID)),Object(s.h)("br",null),e.t(h.a.VR_ANDROID_DETAIL))),Object(s.h)("li",null,Object(s.h)("div",null,Object(s.h)("img",{class:"vr-modal-icon",src:n(657)})),Object(s.h)("span",null,Object(s.h)("strong",null,e.t(h.a.VR_APP_FOR_CARDBOARD)),Object(s.h)("br",null),Object(s.h)(Oe,{href:o,onClick:t("launch_store",{store:fe.CardboardAndroid})},e.t(h.a.VR_DOWNLOAD_HERE))))))},e=Fe([g.b],e)}(s.Component),We=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ze=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ke=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Ye=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return We(e,t),e.prototype.componentDidMount=function(){return Ke(this,void 0,void 0,function(){var t;return Ye(this,function(e){switch(e.label){case 0:return[4,this.props.vrLinks.getStoreLink(dt.gearVr)];case 1:return t=e.sent(),this.setState({storeLink:t}),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state.storeLink;return Object(s.h)("div",{className:"whatYoullNeed"},Object(s.h)("h1",null,e.t(h.a.VR_NEED_SAMSUNG)),Object(s.h)("div",{className:"headset"},Object(s.h)("img",{class:"headset-large",src:n(510)})),Object(s.h)("ul",null,Object(s.h)("li",null,Object(s.h)("div",null,Object(s.h)("img",{class:"vr-modal-icon",src:n(822)})),Object(s.h)("span",null,Object(s.h)("strong",null,e.t(h.a.VR_COMPATIBLE_SAMSUNG)),Object(s.h)("br",null),e.t(h.a.VR_SAMSUNG_DETAIL))),Object(s.h)("li",null,Object(s.h)("div",null,Object(s.h)("img",{class:"vr-modal-icon",src:n(821)})),Object(s.h)("span",null,Object(s.h)("strong",null,e.t(h.a.VR_APP_FOR_SAMSUNG)),Object(s.h)("br",null),Object(s.h)(Oe,{href:o,onClick:t("launch_store",{store:fe.GearVR})},e.t(h.a.VR_DOWNLOAD_HERE))))))},e=ze([g.b],e)}(s.Component),Xe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ze=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Qe=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Je=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},$e=function(t){function e(e){var n=t.call(this,e)||this;return n.setCurrentPanel=n.setCurrentPanel.bind(n),n.openCardboardPanel=n.openCardboardPanel.bind(n),n.openGearVrPanel=n.openGearVrPanel.bind(n),n.closePanel=n.closePanel.bind(n),n}return Xe(e,t),e.prototype.handleLinkFocus=function(t){t.target.select()},e.prototype.handleLinkBlur=function(t){var e=t.target;e.selectionStart=e.selectionEnd=-1},e.prototype.setCurrentPanel=function(t){this.setState({currentPanel:t})},e.prototype.openCardboardPanel=function(){this.setCurrentPanel(ve.cardboard)},e.prototype.openGearVrPanel=function(){this.setCurrentPanel(ve.gearVr)},e.prototype.closePanel=function(){this.setCurrentPanel(ve.none)},e.prototype.componentDidMount=function(){return Qe(this,void 0,void 0,function(){var t,e,n,o,r,i,a;return Je(this,function(s){switch(s.label){case 0:return t=this.props.vrLinks,e=t.getDeepLink(),n=t.getStoreLink(dt.cardboardIos),o=t.getStoreLink(dt.cardboardAndroid),r=t.getStoreLink(dt.gearVr),i=this.setState,a={},[4,e];case 1:return a.deepLink=s.sent(),[4,n];case 2:return a.cardboardIosStoreLink=s.sent(),[4,o];case 3:return a.cardboardAndroidStoreLink=s.sent(),[4,r];case 4:return i.apply(this,[(a.gearVrStoreLink=s.sent(),a)]),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state,r=o.deepLink,i=o.cardboardAndroidStoreLink,a=o.cardboardIosStoreLink,c=o.gearVrStoreLink,l=o.currentPanel;return Object(s.h)("div",{class:"openVrApp"},Object(s.h)("h1",null,e.t(h.a.VR_OPEN_ANDROID_LINK)),Object(s.h)("div",{class:"vr-deep-link"},Object(s.h)("input",{readOnly:!0,value:r,onFocus:this.handleLinkFocus,onBlur:this.handleLinkBlur})),Object(s.h)("h1",null,e.t(h.a.VR_ANDROID_OPTIONS)),Object(s.h)("ul",null,l!==ve.gearVr?Object(s.h)("li",{class:"hasHover",onClick:this.openCardboardPanel},Object(s.h)("img",{class:"headset-small",src:n(451)}),Object(s.h)("br",null),e.t(h.a.VR_GOOGLE_CARDBOARD)):null,l!==ve.cardboard?Object(s.h)("li",{class:"hasHover",onClick:this.openGearVrPanel},Object(s.h)("img",{class:"headset-small",src:n(510)}),Object(s.h)("br",null),e.t(h.a.VR_SAMSUNG_GEAR_VR)):null,l===ve.cardboard?Object(s.h)("li",null,Object(s.h)("i",{onClick:this.closePanel,class:"icon hasHover icon-close panel-close"}),Object(s.h)(Oe,{href:i,onClick:t("launch_store",{store:fe.CardboardAndroid})},Object(s.h)("img",{class:"store-badge",src:n(656)})),Object(s.h)("br",null),Object(s.h)(Oe,{href:a,onClick:t("launch_store",{store:fe.CardboardIOS})},Object(s.h)("img",{class:"store-badge",src:n(655)}))):null,l===ve.gearVr?Object(s.h)("li",null,Object(s.h)("i",{onClick:this.closePanel,class:"icon hasHover icon-close panel-close"}),Object(s.h)(Oe,{href:c,onClick:t("launch_store",{store:fe.GearVR})},Object(s.h)("img",{class:"store-badge",src:n(654)}))):null))},e=Ze([g.b],e)}(s.Component);!function(t){t.none="none",t.cardboard="cardboard",t.gearVr="gearVr"}(ve||(ve={}));var tn,en=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nn=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},on=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},rn=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},an=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return en(e,t),e.prototype.componentDidMount=function(){return on(this,void 0,void 0,function(){var t,e,n,o,r;return rn(this,function(i){switch(i.label){case 0:return t=this.props.vrLinks,e=t.getStoreLink(dt.cardboardIos),n=t.getStoreLink(dt.cardboardAndroid),o=this.setState,r={},[4,e];case 1:return r.iosStoreLink=i.sent(),[4,n];case 2:return o.apply(this,[(r.androidStoreLink=i.sent(),r)]),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state,r=o.iosStoreLink,i=o.androidStoreLink;return Object(s.h)("div",{className:"whatYoullNeed"},Object(s.h)("div",{className:"header"},Object(s.h)("img",{class:"headset-large",src:n(451)}),Object(s.h)("h1",null,e.t(h.a.VR_NEED_CARDBOARD))),Object(s.h)("ul",null,Object(s.h)("li",null,Object(s.h)(Oe,{href:r,onClick:t("launch_store",{store:fe.CardboardAndroid})},Object(s.h)("img",{class:"store-badge",src:n(655)})),Object(s.h)("strong",null,e.t(h.a.VR_COMPATIBLE_IPHONES_1)),Object(s.h)("br",null),Object(s.h)("span",null,e.t(h.a.VR_COMPATIBLE_IPHONES_2))),Object(s.h)("li",null,Object(s.h)(Oe,{href:i,onClick:t("launch_store",{store:fe.CardboardIOS})},Object(s.h)("img",{class:"store-badge",src:n(656)})),Object(s.h)("strong",null,e.t(h.a.VR_COMPATIBLE_ANDROID)),Object(s.h)("br",null),Object(s.h)("span",null,e.t(h.a.VR_ANDROID_DETAIL)))))},e=nn([g.b],e)}(s.Component),sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cn=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ln=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},un=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sn(e,t),e.prototype.componentDidMount=function(){return ln(this,void 0,void 0,function(){var t;return un(this,function(e){switch(e.label){case 0:return[4,this.props.vrLinks.getStoreLink(dt.gearVr)];case 1:return t=e.sent(),this.setState({storeLink:t}),[2]}})})},e.prototype.render=function(){var t=this.props.analytics,e=this.context.locale,o=this.state.storeLink;return Object(s.h)("div",{className:"whatYoullNeed"},Object(s.h)("div",{className:"header"},Object(s.h)("img",{class:"headset-large",src:n(510)}),Object(s.h)("h1",null,e.t(h.a.VR_NEED_SAMSUNG))),Object(s.h)("ul",null,Object(s.h)("li",null,Object(s.h)(Oe,{href:o,onClick:t("launch_store",{store:fe.GearVR})},Object(s.h)("img",{class:"store-badge",src:n(654)})),Object(s.h)("strong",null,e.t(h.a.VR_COMPATIBLE_SAMSUNG)),Object(s.h)("br",null),Object(s.h)("span",null,e.t(h.a.VR_SAMSUNG_DETAIL)))))},e=cn([g.b],e)}(s.Component),hn=n(408),dn=(n(820),n(82)),fn=n(818),bn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gn=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},yn=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},vn=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},mn=new j.a("vr-select"),On=function(t){function e(e){var n=t.call(this,e)||this;n.state={pages:[],page:0};var o=new fn;return mn.debug("WebVR Polyfill version:",o),n.previous=n.previous.bind(n),n.next=n.next.bind(n),n.onWebVrEnter=n.onWebVrEnter.bind(n),n.onExitVr=n.onExitVr.bind(n),n.analyticsFn=n.analyticsFn.bind(n),n}return bn(e,t),e.prototype.componentDidMount=function(){return yn(this,void 0,void 0,function(){var t,e,n,o,r,i,a,c,l;return vn(this,function(u){switch(u.label){case 0:return t=this.props.sdk,e=this.context.analytics,n=new ye(t,e.getSessionId()),o=[],[4,this.webvrDetected()];case 1:switch(r=u.sent(),this.platform=this.getPlatform(r),i=[Object(s.h)(Ce,{key:"openVrApp",vrLinks:n,analytics:this.analyticsFn}),Object(s.h)(De,{key:"whatYoullNeed",vrLinks:n,analytics:this.analyticsFn})],a=[Object(s.h)(He,{key:"openVrApp",vrLinks:n,analytics:this.analyticsFn}),Object(s.h)(Ge,{key:"whatYoullNeedCardboard",vrLinks:n,analytics:this.analyticsFn}),Object(s.h)(qe,{key:"whatYoullNeedGearVr",vrLinks:n,analytics:this.analyticsFn})],c=[Object(s.h)($e,{key:"openVrApp",vrLinks:n,analytics:this.analyticsFn}),Object(s.h)(an,{key:"whatYoullNeedCardboard",vrLinks:n,analytics:this.analyticsFn}),Object(s.h)(pn,{key:"whatYoullNeedGearVr",vrLinks:n,analytics:this.analyticsFn})],l=[Object(s.h)(je,{key:"openWebVrApp",vrLinks:n,onEnterVr:this.onWebVrEnter,next:this.next,analytics:this.analyticsFn})],this.platform){case tn.ios:o=i;break;case tn.android:o=a;break;case tn.webvrAndroid:o=l.concat(a),t.VR.preloadVr();break;case tn.webvrDesktop:o=l.concat(c),t.VR.preloadVr();break;case tn.desktop:default:o=c}return this.setState({pages:o}),[2]}})})},e.prototype.componentWillReceiveProps=function(t){if(this.props.isVrSelectOpen!==t.isVrSelectOpen){var e=t.isVrSelectOpen?"click_vr_button":"vr_modal_close";this.isWebVr(this.platform)&&(e=t.isVrSelectOpen?"click_webvr_button":"webvr_modal_close"),this.vrAnalytics(e)}},e.prototype.render=function(){var t=this.props,e=t.isVrSelectOpen,n=t.toggleOpen,o=t.isMobile,r=this.state,i=r.pages,a=r.page;return Object(s.h)(de,{isVrSelectOpen:e,isMobile:o,toggleOpen:n,next:this.next,previous:this.previous,page:a},i)},e.prototype.onWebVrEnter=function(){var t=this;if(this.vrDisplay&&this.vrDisplay.capabilities.canPresent&&!this.vrDisplay.isPresenting){this.vrAnalytics("webvr_enter_app"),this.props.sdk.VR.presentVr();var e=document.createElement("canvas");for(e.getContext("webgl"),e.className="webvr-canvas",document.bgColor="#000",document.body.style.backgroundColor="#000";document.body.firstChild;)document.body.removeChild(document.body.firstChild);document.body.appendChild(e),this.vrDisplay.requestPresent([{source:e}]).then(function(){window.addEventListener("vrdisplaypresentchange",t.onExitVr)}).catch(function(e){Object(dn.c)(e,"Failure setting up WebVR menu"),mn.error("requestPresent Failed:",e),t.vrAnalytics("webvr_present_error")}),window.dispatchEvent(new Event("vrapp-start"))}else mn.error("vrDisplay not found, or already presenting"),this.vrAnalytics("webvr_present_error")},e.prototype.onExitVr=function(){if(!this.vrDisplay.isPresenting){this.vrAnalytics("webvr_exit_app"),window.removeEventListener("vrdisplaypresentchange",this.onExitVr);var t=window.location.href;-1===window.location.search.indexOf("&qs=1")&&(t+="&qs=1"),mn.info("redirecting to:",t),window.location.replace(t)}},e.prototype.getPlatform=function(t){if(w.i()){var e=w.e();if(e.major>9||9===e.major&&e.minor>=1)return tn.ios}else if(w.f()){if(t)return tn.webvrAndroid;var n=w.a();if(n.major>4||4===n.major&&n.minor>4||4===n.major&&4===n.minor&&n.patch>=4)return tn.android}return t?tn.webvrDesktop:tn.desktop},e.prototype.webvrDetected=function(){return yn(this,void 0,Promise,function(){var t,e=this;return vn(this,function(n){switch(n.label){case 0:return t=!1,mn.debug("isWebVRAvailable:",hn.b()),hn.b()?[4,hn.c().then(function(n){n&&(e.vrDisplay=n,t=!0),mn.debug("vrDisplayPromise:",n)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,t]}})})},e.prototype.vrAnalytics=function(t,e){this.analyticsFn(t,e)()},e.prototype.analyticsFn=function(t,e){var n=this;return function(){var o=w.j()?"landscape":"portrait",r={gui_action:t,orientation:o};r=Object.assign(r,e),n.context.analytics.track("showcase_gui",r)}},e.prototype.previous=function(){this.vrAnalytics(this.isWebVr?"webvr_modal_prev":"vr_modal_prev"),this.setState({page:this.state.page-1})},e.prototype.next=function(){this.vrAnalytics(this.isWebVr?"webvr_learn_more":"vr_modal_next"),this.setState({page:this.state.page+1})},e.prototype.isWebVr=function(t){return t===tn.webvrAndroid||t===tn.webvrDesktop},e=gn([g.b],e)}(s.Component);!function(t){t.ios="ios",t.android="android",t.desktop="unsupported",t.webvrAndroid="webvrAndroid",t.webvrDesktop="webvrDesktop"}(tn||(tn={}));n(562);var wn,_n,En=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return En(e,t),e.prototype.render=function(){var t=this.props.isMobile,e=this.context.locale;return Object(s.h)("div",{class:"cta"},Object(s.h)("h1",{class:p({mobile:t})},e.t(t?h.a.MOBILE_SHORT_CTA:h.a.DESKTOP_SHORT_CTA)))},e}(s.Component),Cn={mouse:{click:n(816),clickInside:n(815),dragLeft:n(814),dragRight:n(813),play:n(812),positionLeft:n(811),positionRight:n(810),zoom:n(809)},gesture:{drag:n(808),dragTwoFinger:n(807),pinch:n(806),position:n(805),positionTwoFinger:n(804),tap:n(803),tapInside:n(802),play:n(801)},keyboard:{all:n(800),inside:n(799),leftRight:n(798),spaceBar:n(797),upDown:n(796),zoom:n(795)},moreHelp:{view360:n(794),mattertag:n(793)}},Pn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.keys={header:h.a.DESKTOP_SHORT_CTA,move:h.a.MOVE,inside:h.a.INSIDE,rotate:h.a.ROTATE,play:h.a.PLAY,zoom:h.a.ZOOM},e.clickInside={Icon:Cn.mouse.clickInside,Label:e.keys.inside,FooterIcon:Cn.keyboard.inside},e.clickMove={Icon:Cn.mouse.positionRight,Label:e.keys.move,FooterIcon:""},e.moveUpDown={Icon:Cn.mouse.click,Label:e.keys.move,FooterIcon:Cn.keyboard.upDown},e.play={Icon:Cn.mouse.play,Label:e.keys.play,FooterIcon:null},e.zoom={Icon:Cn.mouse.zoom,Label:e.keys.zoom,FooterIcon:Cn.keyboard.zoom},e.dragMove={Icon:Cn.mouse.positionLeft,Label:e.keys.move,FooterIcon:null},e.dragRotateLeft={Icon:Cn.mouse.dragLeft,Label:e.keys.rotate,FooterIcon:Cn.keyboard.leftRight},e.dragRotateRight={Icon:Cn.mouse.dragRight,Label:e.keys.rotate,FooterIcon:Cn.keyboard.leftRight},e.left=e.clickInside,e.center=e.clickMove,e.right=e.play,e}return Pn(e,t),e.prototype.render=function(){var t=this.props.viewmode,e=this.context.locale;return this.configureViewmodeSpecifics(t),Object(s.h)("div",{class:p({cta:!0})},Object(s.h)("h1",null,e.t(this.keys.header)),Object(s.h)("h2",null,e.t(this.left.Label)),Object(s.h)("img",{src:this.left.Icon}),this.left.FooterIcon?Object(s.h)("hr",null):Object(s.h)("span",null),this.left.FooterIcon?Object(s.h)("img",{class:"footer-icon",src:this.left.FooterIcon}):Object(s.h)("span",null),Object(s.h)("h2",null,e.t(this.center.Label)),Object(s.h)("img",{src:this.center.Icon}),this.center.FooterIcon?Object(s.h)("hr",null):Object(s.h)("span",null),this.center.FooterIcon?Object(s.h)("img",{class:"footer-icon",src:this.center.FooterIcon}):Object(s.h)("span",null),Object(s.h)("h2",null,e.t(this.right.Label)),Object(s.h)("img",{src:this.right.Icon}),this.right.FooterIcon?Object(s.h)("hr",null):Object(s.h)("span",null),this.right.FooterIcon?Object(s.h)("img",{class:"footer-icon",src:this.right.FooterIcon}):Object(s.h)("span",null))},e.prototype.configureViewmodeSpecifics=function(t){switch(t){case Ct.b.INSIDE:this.left=this.dragRotateLeft,this.center=this.moveUpDown,this.right=this.props.isHelpCta?this.zoom:this.play;break;case Ct.b.OUTSIDE:case Ct.b.DOLLHOUSE:this.left=this.dragRotateLeft,this.center=this.clickMove,this.right=this.clickInside;break;case Ct.b.FLOORPLAN:this.left=this.dragMove,this.center=this.dragRotateRight,this.right=this.clickInside}},e}(s.Component),jn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.keys={shortCta:h.a.MOBILE_SHORT_CTA,move:h.a.MOVE,inside:h.a.INSIDE,rotate:h.a.ROTATE,play:h.a.PLAY,zoom:h.a.ZOOM},e.clickInside={Icon:Cn.gesture.tapInside,Label:e.keys.inside},e.clickMove={Icon:Cn.gesture.tap,Label:e.keys.move},e.dragRotate={Icon:Cn.gesture.drag,Label:e.keys.rotate},e.dragMove={Icon:Cn.gesture.position,Label:e.keys.move},e.play={Icon:Cn.gesture.play,Label:e.keys.play},e.zoom={Icon:Cn.gesture.pinch,Label:e.keys.zoom},e.left=e.dragRotate,e.center=e.clickInside,e.right=e.play,e}return jn(e,t),e.prototype.render=function(){var t=p({mobile:!0}),e=this.props.viewmode,n=this.context.locale;return this.configureViewmodeSpecifics(e),Object(s.h)("div",{class:p({cta:!0,mobile:!0})},Object(s.h)("h1",{class:t},n.t(this.keys.shortCta)),Object(s.h)("h2",{class:t},n.t(this.left.Label)),Object(s.h)("img",{src:this.left.Icon}),Object(s.h)("h2",{class:t},n.t(this.center.Label)),Object(s.h)("img",{src:this.center.Icon}),Object(s.h)("h2",{class:t},n.t(this.right.Label)),Object(s.h)("img",{src:this.right.Icon}))},e.prototype.configureViewmodeSpecifics=function(t){switch(t){case Ct.b.INSIDE:this.left=this.dragRotate,this.center=this.clickMove,this.right=this.props.isHelpCta?this.zoom:this.play;break;case Ct.b.DOLLHOUSE:case Ct.b.OUTSIDE:this.left=this.dragRotate,this.center=this.clickInside,this.right=this.props.isHelpCta?this.zoom:this.play;break;case Ct.b.FLOORPLAN:this.left=this.dragMove,this.center=this.clickInside,this.right=this.props.isHelpCta?this.zoom:this.play}},e}(s.Component),Ln=n(365),An=n(25),xn=n(5),Dn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mn=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},In=new j.a("cta"),Rn=function(t){function e(e){var n=t.call(this,e)||this;return n.styles=[wn.NONE],n.modal="cta",n.state={ctaSource:_n.TOUR,seenCta:!1,style:n.styles[0]},n}return Dn(e,t),e.prototype.onStart=function(t){this.showAtStart&&t.phase===xn.a.PLAYING&&this.props.toggleOpen(this.modal,!0,!1)},e.prototype.handleInteraction=function(){this.props.showCta&&!this.state.seenCta&&(this.setState({seenCta:!0}),this.props.toggleOpen(this.modal,!1,!1))},e.prototype.componentDidMount=function(){try{this.onTourStopped=this.onTourStopped.bind(this),this.onTourStarted=this.onTourStarted.bind(this),this.onStart=this.onStart.bind(this),this.handleInteraction=this.handleInteraction.bind(this),this.props.canvas&&(this.props.canvas.addEventListener("mousedown",this.handleInteraction),this.props.canvas.addEventListener("pointerdown",this.handleInteraction),this.props.canvas.addEventListener("touchstart",this.handleInteraction)),this.context.messageBus.subscribe(Ln.f,this.onTourStopped),this.context.messageBus.subscribe(Ln.a,this.onTourStopped),this.context.messageBus.subscribe(Ln.c,this.onTourStarted),this.context.messageBus.subscribe(An.a,this.onStart)}catch(t){In.debug(t)}var t=this.state.ctaSource,e=parseInt(this.context.settings.tryGetProperty("tourcta",1),10);!isNaN(e)&&e in wn&&(this.styles[0]=e,t=_n.TOUR);var n=parseInt(this.context.settings.tryGetProperty("help",0),10);if(!isNaN(n)&&n in wn&&n!==wn.NONE){this.styles[0]===wn.NONE?this.styles[0]=n:this.styles.unshift(n),t=_n.HELP;var o=1===this.context.settings.tryGetProperty("ts",0),r=1===this.context.settings.tryGetProperty("qs",0);o||(r?this.props.toggleOpen(this.modal,!0,!1):this.showAtStart=!0)}this.styles[0]!==wn.NONE&&this.setState({style:this.styles[0],ctaSource:t})},e.prototype.componentWillUnmount=function(){this.context.messageBus.unsubscribe(Ln.f,this.onTourStopped),this.context.messageBus.unsubscribe(Ln.a,this.onTourStopped),this.context.messageBus.unsubscribe(Ln.c,this.onTourStarted),this.context.messageBus.unsubscribe(An.a,this.onStart),this.props.canvas&&(this.props.canvas.removeEventListener("mousedown",this.handleInteraction),this.props.canvas.removeEventListener("pointerdown",this.handleInteraction),this.props.canvas.removeEventListener("touchstart",this.handleInteraction))},e.prototype.render=function(){var t={ctaContainer:!0,mobile:this.props.isMobile,showMessage:this.props.showCta,small:this.state.style===wn.SMALL,helpCta:this.state.ctaSource===_n.HELP};return Object(s.h)("div",{id:"cta-container",class:p(t)},this.chooseCtaStyle())},e.prototype.chooseCtaStyle=function(){var t=this.props.isMobile,e=this.props.viewmode;switch(this.state.style){case wn.NONE:return null;case wn.SMALL:return Object(s.h)(Sn,{isMobile:this.props.isMobile});case wn.LARGE:return t?Object(s.h)(Tn,{isMobile:t,viewmode:e,isHelpCta:this.state.ctaSource===_n.HELP}):Object(s.h)(kn,{viewmode:e,isHelpCta:this.state.ctaSource===_n.HELP})}},e.prototype.onTourStopped=function(){this.state.ctaSource!==_n.TOUR||this.state.seenCta||this.props.toggleOpen(this.modal,!0,!1)},e.prototype.onTourStarted=function(){this.state.ctaSource===_n.HELP&&2===this.styles.length&&this.setState({ctaSource:_n.TOUR,seenCta:!1,style:this.styles[1]}),this.props.showCta&&this.props.toggleOpen(this.modal,!1,!1)},e=Mn([g.b],e)}(s.Component);!function(t){t[t.NONE=0]="NONE",t[t.LARGE=1]="LARGE",t[t.SMALL=2]="SMALL"}(wn||(wn={})),function(t){t[t.HELP=0]="HELP",t[t.TOUR=1]="TOUR"}(_n||(_n={}));var Nn,Hn,Vn,Fn,Bn,Un,Gn,Wn,zn,Kn,Yn,qn,Xn,Zn,Qn,Jn,$n,to,eo,no,oo,ro,io,ao,so,co,lo,uo,po,ho,fo,bo,go,yo,vo;n(792);!function(t){t[t.navigation=0]="navigation",t[t.moreHelp=1]="moreHelp"}(Nn||(Nn={})),function(t){t.left="left",t.middle="middle",t.right="right"}(Hn||(Hn={})),function(t){t.topInfo="topInfo",t.bigImage="bigImage",t.bottomInfo="bottomInfo",t.keyboard="keyboard"}(Vn||(Vn={})),function(t){t.desktop="desktop",t.mobile="mobile"}(Fn||(Fn={})),function(t){t.hlr="hlr",t.dollhouse="dollhouse",t.floors="floors",t.mattertag="mattertag",t.floorplan="floorplan",t.tour="tour",t.inside="inside",t.vr="vr",t.view360="view360",t.fullscreen="fullscreen"}(Bn||(Bn={})),function(t){t.landscape="landscape",t.portrait="portrait"}(Un||(Un={}));var mo=((Gn={})[Fn.desktop]=((Wn={})[Hn.left]=((zn={})[Vn.topInfo]="HELP_DESKTOP_PANORAMA_1A",zn[Vn.bottomInfo]="HELP_DESKTOP_PANORAMA_1B",zn[Vn.bigImage]=Cn.mouse.dragLeft,zn[Vn.keyboard]=Cn.keyboard.leftRight,zn),Wn[Hn.middle]=((Kn={})[Vn.topInfo]="HELP_DESKTOP_PANORAMA_2A",Kn[Vn.bottomInfo]="HELP_DESKTOP_PANORAMA_2B",Kn[Vn.bigImage]=Cn.mouse.click,Kn[Vn.keyboard]=Cn.keyboard.upDown,Kn),Wn[Hn.right]=((Yn={})[Vn.topInfo]="HELP_DESKTOP_PANORAMA_3A",Yn[Vn.bottomInfo]="HELP_DESKTOP_PANORAMA_3B",Yn[Vn.bigImage]=Cn.mouse.zoom,Yn[Vn.keyboard]=Cn.keyboard.zoom,Yn),Wn),Gn[Fn.mobile]=((qn={})[Hn.left]=((Xn={})[Vn.topInfo]="HELP_MOBILE_PANORAMA_1",Xn[Vn.bigImage]=Cn.gesture.drag,Xn),qn[Hn.middle]=((Zn={})[Vn.topInfo]="HELP_MOBILE_PANORAMA_2",Zn[Vn.bigImage]=Cn.gesture.tap,Zn),qn[Hn.right]=((Qn={})[Vn.topInfo]="HELP_MOBILE_3",Qn[Vn.bigImage]=Cn.gesture.pinch,Qn),qn),Gn),Oo=((Jn={})[Fn.desktop]=(($n={})[Hn.left]=((to={})[Vn.topInfo]="HELP_DESKTOP_DOLLHOUSE_1A",to[Vn.bottomInfo]="HELP_DESKTOP_DOLLHOUSE_1B",to[Vn.bigImage]=Cn.mouse.dragLeft,to[Vn.keyboard]=Cn.keyboard.all,to),$n[Hn.middle]=((eo={})[Vn.topInfo]="HELP_DESKTOP_DOLLHOUSE_2A",eo[Vn.bigImage]=Cn.mouse.positionRight,eo),$n[Hn.right]=((no={})[Vn.topInfo]="HELP_DESKTOP_DOLLHOUSE_3A",no[Vn.bigImage]=Cn.mouse.zoom,no),$n),Jn[Fn.mobile]=((oo={})[Hn.left]=((ro={})[Vn.topInfo]="HELP_MOBILE_DOLLHOUSE_1",ro[Vn.bigImage]=Cn.gesture.drag,ro),oo[Hn.middle]=((io={})[Vn.topInfo]="HELP_MOBILE_DOLLHOUSE_2",io[Vn.bigImage]=Cn.gesture.positionTwoFinger,io),oo[Hn.right]=((ao={})[Vn.topInfo]="HELP_MOBILE_3",ao[Vn.bigImage]=Cn.gesture.pinch,ao),oo),Jn),wo=((so={})[Fn.desktop]=((co={})[Hn.left]=((lo={})[Vn.topInfo]="HELP_DESKTOP_FLOORPLAN_1A",lo[Vn.bigImage]=Cn.mouse.positionLeft,lo),co[Hn.middle]=((uo={})[Vn.topInfo]="HELP_DESKTOP_FLOORPLAN_2A",uo[Vn.bottomInfo]="HELP_DESKTOP_FLOORPLAN_2B",uo[Vn.bigImage]=Cn.mouse.dragRight,uo[Vn.keyboard]=Cn.keyboard.leftRight,uo),co[Hn.right]=((po={})[Vn.topInfo]="HELP_DESKTOP_FLOORPLAN_3A",po[Vn.bottomInfo]="HELP_DESKTOP_FLOORPLAN_3B",po[Vn.bigImage]=Cn.mouse.zoom,po[Vn.keyboard]=Cn.keyboard.upDown,po),co),so[Fn.mobile]=((ho={})[Hn.left]=((fo={})[Vn.topInfo]="HELP_MOBILE_FLOORPLAN_1",fo[Vn.bigImage]=Cn.gesture.position,fo),ho[Hn.middle]=((bo={})[Vn.topInfo]="HELP_MOBILE_FLOORPLAN_2",bo[Vn.bigImage]=Cn.gesture.dragTwoFinger,bo),ho[Hn.right]=((go={})[Vn.topInfo]="HELP_MOBILE_3",go[Vn.bigImage]=Cn.gesture.pinch,go),ho),so),_o=JSON.parse(JSON.stringify(mo));_o.desktop.middle=((yo={})[Vn.topInfo]="HELP_DESKTOP_360_2A",yo[Vn.bottomInfo]="HELP_DESKTOP_360_2B",yo[Vn.bigImage]=Cn.mouse.clickInside,yo[Vn.keyboard]=Cn.keyboard.inside,yo),_o.mobile.middle=((vo={})[Vn.topInfo]="HELP_MOBILE_360_2",vo[Vn.bigImage]=Cn.gesture.tapInside,vo);var Eo,So,Co,Po,ko,jo,To,Lo,Ao,xo,Do,Mo,Io={INSIDE:mo,OUTSIDE:_o,FLOORPLAN:wo,DOLLHOUSE:Oo},Ro=(n(790),n(360)),No=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ho=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Vo=function(t){function e(e){var n=t.call(this,e)||this;return n.state={overflow:!1},n}return No(e,t),e.prototype.componentWillReceiveProps=function(t){t.isHelpOpen&&!this.props.isHelpOpen&&((this.navigationDiv&&this.navigationDiv.clientHeight||0)/(this.navigationDiv.parentElement&&this.navigationDiv.parentElement.clientHeight||1)>.7&&this.setState({overflow:!0}))},e.prototype.getAssetObj=function(t){switch(t){case this.props.Modes.DOLLHOUSE:return Io.DOLLHOUSE[this.props.device];case this.props.Modes.FLOORPLAN:return Io.FLOORPLAN[this.props.device];case this.props.Modes.OUTSIDE:return Io.OUTSIDE[this.props.device];case this.props.Modes.INSIDE:default:return Io.INSIDE[this.props.device]}},e.prototype.buildRows=function(){var t=this.getAssetObj(this.props.viewmode),e=[];for(var n in Vn){var o=[],r=[];for(var i in Hn)if(o.push(this.wrapAsset(t,i,n,!1)),n===Vn.bigImage){var a=!t[i][Vn.bottomInfo];r.push(Object(s.h)("div",{class:p(i,"column",{noDivider:a})},Object(s.h)("hr",null)))}e.push(Object(s.h)("div",{class:p(n,"row")},o)),r.length>0&&this.props.device===Fn.desktop&&e.push(Object(s.h)("div",{class:p("hr","row")},r))}return e},e.prototype.buildMobilePortrait=function(){var t=this.getAssetObj(this.props.viewmode),e=[];for(var n in t)for(var o in t[n])e.push(this.wrapAsset(t,n,o,!0));return e},e.prototype.wrapAsset=function(t,e,n,o){var r=t[e][n],i=n===Vn.bigImage||n===Vn.keyboard;return Object(s.h)("div",{class:o?p(n,"row"):p(e,"column")},r&&i?Object(s.h)("img",{src:r}):r&&this.context.locale.t(r))},e.prototype.render=function(){var t,e=this,n=this.props.device===Fn.mobile&&this.props.orientation===Ro.a.PORTRAIT,o=p(((t={navigation:!0,small:this.state.overflow})[this.props.viewmode]=!0,t));return Object(s.h)("div",{class:o,ref:function(t){e.navigationDiv=t}},n?Object(s.h)(Dt.a,{name:"navigation",forceHidden:!1},Object(s.h)("div",{class:"nav-wrapper"},this.buildMobilePortrait())):this.buildRows())},e=Ho([g.b],e)}(s.Component),Fo=((Eo={})[Bn.hlr]=((So={})[Vn.topInfo]="HELP_MORE_HLR_A",So[Vn.bigImage]="icon-hlr",So[Vn.bottomInfo]="HELP_DESKTOP_MORE_HLR_B",So),Eo[Bn.dollhouse]=((Co={})[Vn.topInfo]="HELP_MORE_DOLLHOUSE_A",Co[Vn.bigImage]="icon-dollhouse",Co[Vn.bottomInfo]="HELP_MOBILE_MORE_DOLLHOUSE_B",Co),Eo[Bn.floors]=((Po={})[Vn.topInfo]="HELP_MORE_FLOORS_A",Po[Vn.bigImage]="icon-floor-controls",Po[Vn.bottomInfo]="HELP_DESKTOP_MORE_FLOORS_B",Po),Eo[Bn.mattertag]=((ko={})[Vn.topInfo]="HELP_MORE_MATTERTAG_A",ko[Vn.bigImage]=Cn.moreHelp.mattertag,ko[Vn.bottomInfo]="HELP_MOBILE_MORE_MATTERTAG_B",ko),Eo[Bn.tour]=((jo={})[Vn.topInfo]="HELP_MORE_TOUR_A",jo[Vn.bigImage]="icon-play",jo[Vn.bottomInfo]="HELP_DESKTOP_MORE_TOUR_B",jo),Eo[Bn.inside]=((To={})[Vn.topInfo]="HELP_MORE_INSIDE_A",To[Vn.bigImage]="icon-panorama",To[Vn.bottomInfo]="HELP_MOBILE_MORE_INSIDE_B",To),Eo[Bn.vr]=((Lo={})[Vn.topInfo]="HELP_MORE_VR_A",Lo[Vn.bigImage]="icon-vr",Lo[Vn.bottomInfo]="HELP_MOBILE_MORE_VR_B",Lo),Eo[Bn.view360]=((Ao={})[Vn.topInfo]="HELP_MORE_360_A",Ao[Vn.bigImage]=Cn.moreHelp.view360,Ao[Vn.bottomInfo]="HELP_MOBILE_MORE_360_B",Ao),Eo[Bn.floorplan]=((xo={})[Vn.topInfo]="HELP_MORE_FLOORPLAN_A",xo[Vn.bigImage]="icon-floorplan",xo[Vn.bottomInfo]="HELP_MOBILE_FLOORPLAN_B",xo),Eo),Bo=JSON.parse(JSON.stringify(Fo));Bo[Bn.fullscreen]=((Do={})[Vn.topInfo]="HELP_MORE_FULLSCREEN_A",Do[Vn.bigImage]="icon-fullscreen",Do[Vn.bottomInfo]="HELP_DESKTOP_MORE_FULLSCREEN_B",Do),Bo[Bn.dollhouse][Vn.bottomInfo]="HELP_DESKTOP_MORE_DOLLHOUSE_B",Bo[Bn.mattertag][Vn.bottomInfo]="HELP_DESKTOP_MORE_MATTERTAG_B",Bo[Bn.inside][Vn.bottomInfo]="HELP_DESKTOP_MORE_INSIDE_B",Bo[Bn.vr][Vn.bottomInfo]="HELP_DESKTOP_MORE_VR_B",Bo[Bn.view360][Vn.bottomInfo]="HELP_DESKTOP_MORE_360_B",Bo[Bn.floorplan][Vn.bottomInfo]="HELP_DESKTOP_FLOORPLAN_B";var Uo=((Mo={})[Fn.desktop]=Bo,Mo[Fn.mobile]=Fo,Mo),Go=(n(788),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Wo=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},zo=[Vn.topInfo,Vn.bigImage,Vn.bottomInfo],Ko=function(t){function e(e){return t.call(this,e)||this}return Go(e,t),e.prototype.componentDidMount=function(){this.scrollbars.scrollTo({x:0,y:0})},e.prototype.buildInstructions=function(){for(var t,e,n=[],o=this.props.device===Fn.desktop?5:this.props.orientation===Ro.a.LANDSCAPE?3:2,r=Object.keys(Uo[this.props.device]),i=0;i<r.length;i+=o){try{for(var a=Wo(zo),c=a.next();!c.done;c=a.next()){for(var l=c.value,u=[],h=0;h<o;h++)if(!(i+h>=r.length)){var d=Uo[this.props.device][r[i+h]][l],f=p(l,r[i+h],{noAsset:!d});switch(l){case Vn.topInfo:u.push(Object(s.h)("div",{class:f},this.context.locale.t(d)));break;case Vn.bigImage:u.push(Object(s.h)("div",{class:f},d.indexOf(".png")>-1?Object(s.h)("img",{src:d}):Object(s.h)("span",{class:d},"floors"===r[i+h]?Object(s.h)("span",null,"2"):null)));break;case Vn.bottomInfo:u.push(Object(s.h)("div",{class:f},this.context.locale.t(d)))}}n.push(Object(s.h)("div",{class:p("innerRow",l)},u))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}n.push(Object(s.h)("div",{class:"rowPadding"}))}return n.pop(),n},e.prototype.render=function(){var t=this;return Object(s.h)("div",{class:p("more-help-wrapper",this.props.device)},Object(s.h)(Dt.a,{name:"more-help-wrapper",ref:function(e){return t.scrollbars=e},forceHidden:!1},Object(s.h)("div",{class:p("more-help")},this.buildInstructions())))},e}(s.Component),Yo=(n(786),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),qo=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Xo=function(t){function e(e){var n=t.call(this,e)||this;return n.setOrientation=function(t){n.setState({orientation:t})},n.handleTabClick=function(t){return function(){n.setState({tab:t})}},n.device=n.props.isMobile?Fn.mobile:Fn.desktop,n.state={tab:Nn.navigation,orientation:Object(Ro.d)()},n.closeHelp=n.closeHelp.bind(n),n.orientationSubscription=Object(Ro.c)(Ro.b.ORIENTATION_CHANGED,n.setOrientation),n}return Yo(e,t),e.prototype.componentDidMount=function(){this.orientationSubscription.renew()},e.prototype.componentWillUnmount=function(){this.orientationSubscription.cancel()},e.prototype.componentWillReceiveProps=function(t){!t.isHelpOpen&&this.props.isHelpOpen&&this.setState({tab:Nn.navigation})},e.prototype.closeHelp=function(){this.props.toggleOpen(b.a.help,!1)},e.prototype.render=function(){return Object(s.h)("div",{id:"help-modal",class:p(this.device,{fadeIn:this.props.isHelpOpen})},Object(s.h)("div",{class:p("tabs",this.state.tab)},Object(s.h)("div",{class:p("navigation-tab",{active:this.state.tab===Nn.navigation}),onClick:this.handleTabClick(Nn.navigation)},Object(s.h)("span",null,this.context.locale.t(h.a.HELP_NAVIGATION_TAB))),Object(s.h)("div",{class:p("more-help-tab",{active:this.state.tab===Nn.moreHelp}),onClick:this.handleTabClick(Nn.moreHelp)},Object(s.h)("span",null,this.context.locale.t(h.a.HELP_MORE_HELP_TAB)))),this.state.tab===Nn.navigation&&Object(s.h)(Vo,{isHelpOpen:this.props.isHelpOpen,device:this.device,Modes:this.props.allModes,viewmode:this.props.viewmode,orientation:this.state.orientation}),this.state.tab===Nn.moreHelp&&Object(s.h)(Ko,{isHelpOpen:this.props.isHelpOpen,device:this.device,orientation:this.state.orientation}),Object(s.h)(Mt.a,{closeModal:this.closeHelp}))},e=qo([g.b],e)}(s.Component),Zo=n(381),Qo=(n(784),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Jo=function(t){function e(e){var n=t.call(this,e)||this;return n.closeIframe=function(){n.props.toggleOpen(b.a.mattertagEmbLink,!1),n.setState({url:"",isIframeOpen:!1})},n.setIFrameOpen=function(t){n.props.toggleOpen(b.a.mattertagEmbLink,!0),n.setState({isIframeOpen:!0,url:t.extUrl})},n}return Qo(e,t),e.prototype.componentDidMount=function(){this.context.messageBus.subscribe(Zo.b,this.setIFrameOpen)},e.prototype.componentWillUnmount=function(){this.context.messageBus.unsubscribe(Zo.b,this.setIFrameOpen)},e.prototype.render=function(){return this.state.url?Object(s.h)("div",{class:"mattertag-emb-link"},Object(s.h)("iframe",{id:"mattertag-emb-iframe",name:"mattertagEmb",sandbox:"allow-forms allow-scripts allow-same-origin allow-presentation"}),Object(s.h)(Mt.a,{closeModal:this.closeIframe})):null},e}(s.Component),$o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tr=function(t){function e(e){return t.call(this,e)||this}return $o(e,t),e.prototype.render=function(){var t=this.props.guiState,e=t.openComponents,n=t.viewmode,o=t.toggleOpen,r=t.mobile,i=t.sdk,a=t.glCanvas;return Object(s.h)("div",{id:"modal-container"},e.terms&&Object(s.h)(Bt,{toggleOpen:o}),Object(s.h)(On,{isVrSelectOpen:e.vrSelect,isMobile:r,toggleOpen:o,sdk:i}),Object(s.h)(Xo,{isHelpOpen:e.help,isMobile:r,toggleOpen:o,viewmode:n,allModes:i.Mode.Mode}),Object(s.h)(Rn,{canvas:a,isMobile:r,viewmode:n,toggleOpen:o,showCta:e.cta}),Object(s.h)(Jo,{toggleOpen:o}))},e}(s.Component),er=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nr=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},or=function(t){function e(e){var n=t.call(this,e)||this;return n.state={visible:!1,fps:""},n.OnPerfStat=n.OnPerfStat.bind(n),n.props.sdk.on(n.props.sdk.Stat.Event.FPS,n.OnPerfStat),n}return er(e,t),e.prototype.OnPerfStat=function(t){this.setState({visible:!0,fps:t.toFixed(2)+" fps"})},e.prototype.componentWillUnmount=function(){this.props.sdk.off(this.props.sdk.Stat.Event.FPS,this.OnPerfStat)},e.prototype.render=function(){return Object(s.h)("div",{id:"perf"},Object(s.h)("p",null,this.state.visible?this.state.fps:""))},e=nr([g.b],e)}(s.Component),rr=n(52);n.d(e,"initShowcaseUi",function(){return ur});var ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ar=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},sr=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},cr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},lr=new j.a("showcase-ui"),ur=function(t,e,n,o,r,i,a,c,l){return Object(s.render)(Object(s.h)(pr,{sdk:r,locale:t,analytics:e,settings:n,mainDiv:o,messageBus:i,market:a,commandBinder:c,onAppReadyChanged:l}),o)},pr=function(t){function e(e){var n=t.call(this,e)||this;n.onModeChange=function(t,e){n.setState({viewmode:e})},n.updateTourState=function(){var t=n.tourData.getCurrentTourState();n.setState({tourState:t})},n.checkFeatureEnablement=function(){var t=n.props.settings.tryGetProperty("title",1),e=n.props.settings.tryGetProperty(K.a.DetailsModelName,!0),o=n.props.settings.tryGetProperty("mls",0),r=n.props.settings.tryGetProperty("brand",!0),i=n.isShareEnabled(o,r);n.setState({mls:o,share:i,branding:r,title:t,modelName:e})},n.subscribeToSettings=function(){[K.a.DetailsModelName,"title","mls","brand","enable_social_sharing","is_public"].forEach(function(t){return n.props.settings.onPropertyChanged(t,n.checkFeatureEnablement)})},n.unsubscribeFromSettings=function(){[K.a.DetailsModelName,"title","mls","brand","enable_social_sharing","is_public"].forEach(function(t){return n.props.settings.removeOnPropertyChanged(t,n.checkFeatureEnablement)})},n.toggleOpenComponents=function(t,e,o){void 0===o&&(o=!0),n.setState(function(r,i){var a=r.openComponents;a[t]=e;var s=t in b.a&&e;if(s&&(n.props.commandBinder.issueCommand(new T.d,!1),o))for(var c in b.a)c!==t&&(a[c]=!1);return{openComponents:a,isModalOpen:s=s&&-1===b.b.indexOf(t)}})};var o=document.getElementsByClassName("webgl-canvas")[0];return n.state={glCanvas:o,sdk:e.sdk,market:e.market,commandBinder:e.commandBinder,viewmode:e.sdk.Mode.Mode.INSIDE,is360:!1,modelSupportsVr:!1,panoMap:{},panoList:[],mobile:Object(w.k)(),toggleOpen:n.toggleOpenComponents,isModalOpen:!1,openComponents:{titleBar:!1,terms:!1},mls:1,branding:!1,share:!1,title:0,modelName:!1,tourState:{}},n}return ir(e,t),e.prototype.getChildContext=function(){return{mainDiv:this.props.mainDiv,settings:this.props.settings,analytics:this.props.analytics,locale:this.props.locale,messageBus:this.props.messageBus,market:this.props.market,commandBinder:this.props.commandBinder}},e.prototype.componentDidMount=function(){return ar(this,void 0,void 0,function(){var t,e,n,o,r,i,a,s,c,l;return sr(this,function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),this.props.sdk.on(this.props.sdk.Mode.Event.CHANGE_END,this.onModeChange),[4,this.props.sdk.Model.getData()];case 1:return t=u.sent(),[4,this.props.sdk.Camera.getPose()];case 2:for(i in e=u.sent(),n=e.mode,o=t.sweeps,r={},o)a=o[i],r[a.uuid]=a;return this.setState({panoMap:r,panoList:o,modelSupportsVr:t.modelSupportsVr,viewmode:n}),this.checkFeatureEnablement(),this.subscribeToSettings(),this.props.onAppReadyChanged(!0),this.props.messageBus.subscribe(Ln.f,this.updateTourState),this.props.messageBus.subscribe(Ln.c,this.updateTourState),this.props.messageBus.subscribe(Ln.d,this.updateTourState),this.props.messageBus.subscribe(Ln.a,this.updateTourState),this.props.messageBus.subscribe(Ln.b,this.updateTourState),[4,Promise.all([this.props.market.waitForData(rr.b)])];case 3:return s=cr.apply(void 0,[u.sent(),1]),c=s[0],this.tourData=c,this.tourData.getReel().onChanged(this.updateTourState),this.updateTourState(),[3,5];case 4:return l=u.sent(),lr.debug(l),[3,5];case 5:return[2]}})})},e.prototype.componentWillUnmount=function(){return ar(this,void 0,void 0,function(){return sr(this,function(t){return this.props.messageBus.unsubscribe(Ln.f,this.updateTourState),this.props.messageBus.unsubscribe(Ln.c,this.updateTourState),this.props.messageBus.unsubscribe(Ln.d,this.updateTourState),this.props.messageBus.unsubscribe(Ln.a,this.updateTourState),this.props.messageBus.unsubscribe(Ln.b,this.updateTourState),this.tourData.getReel().removeOnChanged(this.updateTourState),this.props.onAppReadyChanged(!1),this.unsubscribeFromSettings(),this.props.sdk.off(this.props.sdk.Mode.Event.CHANGE_END,this.onModeChange),[2]})})},e.prototype.isShareEnabled=function(t,e){var n=0===t&&e,o=this.props.settings.tryGetProperty("enable_social_sharing",!1)&&this.props.settings.tryGetProperty("is_public",!1);return n&&o},e.prototype.render=function(){var t=this.props.sdk,e=this.state,n=e.viewmode,o=e.toggleOpen;return Object(s.h)("div",{id:"gui"},Object(s.h)(or,{sdk:t}),Object(s.h)(bt,{guiState:this.state}),Object(s.h)(tr,{guiState:this.state}),!this.state.openComponents[b.a.mattertagEmbLink]&&Object(s.h)(Q,{guiState:this.state}),!this.state.openComponents[b.a.mattertagEmbLink]&&Object(s.h)(xt,{viewmode:n,tourPlaying:this.state.tourState.tourPlaying,toggleOpen:o,sdk:t}))},e}(s.Component)},235:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o,r=n(45),i=n(238),a=n(6),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},l=function(t){function e(e,n,o){var s,l,u=t.call(this,n,o)||this;u.target=e;try{for(var p=c(e.keys),h=p.next();!h.done;h=p.next()){var d=h.value,f=e.get(d),b=new i.a(f,n,o);b.onChanged(u.triggerChangeHandlers),u.targetMonitors[d]=b}}catch(t){s={error:t}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}var g={onAdded:function(t,e){var s=new i.a(t,n,o);s.onChanged(u.triggerChangeHandlers),u.targetMonitors[e]=s;var c=new r.b(e,r.a.added,Object(a.a)(t));u.diffRecord.push(c),u.triggerChangeHandlers(c)},onRemoved:function(t,e){delete u.targetMonitors[e];var n=u.diffRecord.findIndex(function(t){return t.index===e});-1!==n&&u.diffRecord.splice(n,1);var o=new r.b(e,r.a.removed,Object(a.a)(t));u.triggerChangeHandlers(o),-1===n&&u.diffRecord.push(o)}};return u.target.onElementChanged(g),u}return s(e,t),e.prototype.commitChanges=function(){this.invokeCallbacks(this.getDiffRecord())},e.prototype.getDiffRecord=function(){var t=[],e=function(e){var o=n.targetMonitors[e];if(o.hasDiffRecord()){var i=o.getDiffRecord(),s=n.diffRecord.findIndex(function(t){return t.index===e});-1!==s?Object(a.e)(n.diffRecord[s].diff,i):t.push(new r.b(e,r.a.updated,i))}},n=this;for(var o in this.targetMonitors)e(o);return this.diffRecord.concat(t)},e}(r.c)},238:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n(35),r=n(6),i=n(18),a=n(93),s=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},c=function(){function t(t,e,n){var o=this;this.updatePhaseSync=n,this.target=t,this.clearDiffRecord(),this.target.onChanged(function(){o.diffRecord=Object(r.c)(o.originalData,Object(r.a)(o.target)),o.handleAggregation()}),this.aggregationType=e.aggregationType,this.changedHandlers=[]}return t.prototype.hasDiffRecord=function(){return Object.keys(this.diffRecord).length>0},t.prototype.getDiffRecord=function(){return this.diffRecord},t.prototype.clearDiffRecord=function(){this.originalData=Object(r.a)(this.target),this.diffRecord={}},t.prototype.onChanged=function(t){this.changedHandlers.push(t)},t.prototype.removeOnChanged=function(t){Object(a.a)(this.changedHandlers,t)},t.prototype.commitChanges=function(){this.triggerChangeHandlers(this.diffRecord)},t.prototype.handleAggregation=function(){var t=this;switch(this.aggregationType){case o.a.Immediate:this.triggerChangeHandlers(this.diffRecord);break;case o.a.NextFrame:if(!this.updatePhaseSync)throw new Error("handleAggregation() -> Next frame aggregation requested, but updatePhaseSync is null");this.nextFramePromise||(this.nextFramePromise=this.updatePhaseSync.after(i.a.Begin).then(function(){t.triggerChangeHandlers(t.diffRecord),t.nextFramePromise=void 0}));break;case o.a.Duration:throw new Error("AggregationType.Duration: Please implement me :)");case o.a.Manual:}},t.prototype.triggerChangeHandlers=function(t){var e,n;if(this.changedHandlers.length>0)try{for(var o=s(this.changedHandlers),r=o.next();!r.done;r=o.next()){(0,r.value)(t)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t}()},278:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return u});var o,r,i=n(9),a=n(70),s=n(46),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};!function(t){t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.UP_LEFT="up-left",t.UP_RIGHT="up-right",t.DOWN_LEFT="down-left",t.DOWN_RIGHT="down-right"}(r||(r={}));var u=function(t){function e(){var e=t.call(this)||this;return e.onClick=function(t){e.props.onClick&&e.props.onClick(),void 0!==e.props.tooltipTimeout&&window.setTimeout(function(){e.setState({tooltipEnabled:!1})},e.props.tooltipTimeout)},e.onMouseEnter=function(t){e.enableTooltip(),e.adjustBalloonPosIfNeeded(t)},e.enableTooltip=function(){e.setState({tooltipEnabled:!0})},e.state={currentPosition:null,tooltipEnabled:!0},e}return c(e,t),e.prototype.render=function(){var t=this.props,e=t.children,n=t.position,o=t.content,r=t.className,a=this.state,c=a.currentPosition,l=a.tooltipEnabled;return Object(i.h)("div",{type:"button","data-balloon":o,"data-balloon-pos":c||n,class:s(r,{disabled:!l}),onClick:this.onClick,onTouchStart:this.enableTooltip,onMouseEnter:this.onMouseEnter},e)},e.prototype.adjustBalloonPosIfNeeded=function(t){if(null===this.state.currentPosition){var e=t.target,n=this.props.position,o=n;if(n!==r.LEFT&&n!==r.RIGHT){var i=window.getComputedStyle(e,":after"),a=i.width?parseInt(i.width,10):0;if(a>0){var s=e.getBoundingClientRect(),c=(a-s.width)/2,l=n===r.UP||n===r.UP_RIGHT||n===r.UP_LEFT;s.left-c<=0?o=l?r.UP_RIGHT:r.DOWN_RIGHT:(n===r.UP_LEFT||n===r.DOWN_LEFT)&&s.left-a<=0?o=l?r.UP:r.DOWN:s.right+c>=window.innerWidth?o=l?r.UP_LEFT:r.DOWN_LEFT:(n===r.UP_RIGHT||n===r.DOWN_RIGHT)&&s.right+a>=window.innerWidth&&(o=l?r.UP:r.DOWN)}}this.setState({currentPosition:o})}},e=l([a.b],e)}(i.Component)},279:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o,r=n(9),i=n(70),a=n(46),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.render=function(){var t={button:!0,enabled:this.props.enabled};return this.props.appendClass&&Object.keys(this.props.appendClass).length>0&&Object.assign(t,this.props.appendClass),Object(r.h)("div",{id:this.props.buttonId,class:a(t),onClick:this.props.enabled?this.props.clickCallback:void 0,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,"data-balloon":this.props.toolTip?this.props.toolTip:null,"data-balloon-pos":this.props.toolTipPosition?this.props.toolTipPosition:null},this.props.message)},e=c([i.b],e)}(r.Component)},312:function(t,e,n){"use strict";var o=n(327),r=n(21),i=n(146),a=n(1),s=n(10),c=n(17),l=function(t,e){return t&&e?t.equals(e):t===e},u=n(47),p=n(320),h=n(144);n.d(e,"b",function(){return b}),n.d(e,"a",function(){return m});var d,f=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t,e,n){void 0===n&&(n=!0),e.position=g(t.position,e.position,n),e.rotation=g(t.rotation,e.rotation,n),e.projection=g(t.projection,e.projection,n)},g=function(t,e,n){return void 0===n&&(n=!0),t&&!e?e=t.clone():t&&e?e.copy(t):n&&(e=void 0),e},y=function(t){return Object(u.a)({position:Object(u.a)(new a.a),rotation:Object(u.a)(new s.a),projection:Object(o.c)(t),focalDistance:-1})},v=function(){return Object(u.a)({startTime:0,duration:0,active:!1,type:null,progress:Object(u.a)(new i.a(0)),blackoutProgress:Object(u.a)(new i.a(0)),from:Object(u.a)({position:Object(u.a)(new a.a),rotation:Object(u.a)(new s.a),projection:new h.a}),to:Object(u.a)({position:Object(u.a)(new a.a),rotation:Object(u.a)(new s.a),projection:new h.a}),rotationDelay:0,rotationDuration:1,matrixDelay:0,matrixDuration:1,activeInternal:!1})},m=function(t){function e(e,n){var r=t.call(this)||this;return r.width=e,r.height=n,r.pose=y(e/n),r.transition=v(),r.setCameraDimensions(e,n),r._baseFovY=c.a.DEG2RAD*o.a.fov,r}return f(e,t),e.prototype.setCameraDimensions=function(t,e){this.width=t,this.height=e,this.pose.projection.copy(this.isOrtho()?Object(o.b)(t,e,e/(2*this.orthoZoom())):Object(o.c)(t/e))},Object.defineProperty(e.prototype,"baseFovY",{get:function(){return this._baseFovY},enumerable:!0,configurable:!0}),e.prototype.aspect=function(){return this.pose.projection.elements[5]/this.pose.projection.elements[0]},e.prototype.fovY=function(){return 2*Math.atan(1/this.pose.projection.elements[5])},e.prototype.fovX=function(){return 2*Math.atan(1*this.aspect()/this.pose.projection.elements[5])},e.prototype.isOrtho=function(){return Object(p.n)(this.pose.projection)},e.prototype.baseZoom=function(){return this.pose.projection.elements[0]/2},e.prototype.zoom=function(){return this.isOrtho()?this.orthoZoom():this.baseFovY/this.fovY()},e.prototype.orthoZoom=function(){return Object(p.e)(this.pose.projection)},e.prototype.copyTransition=function(t){this.transition.active=t.active,this.transition.activeInternal=t.activeInternal,this.transition.type=t.type,this.transition.startTime=t.startTime,this.transition.duration=t.duration,this.transition.rotationDelay=t.rotationDelay,this.transition.rotationDuration=t.rotationDuration,this.transition.matrixDelay=t.matrixDelay,this.transition.matrixDuration=t.matrixDuration,t.progress&&this.transition.progress.copy(t.progress),t.blackoutProgress&&this.transition.blackoutProgress.copy(t.blackoutProgress),t.from&&b(t.from,this.transition.from),t.to&&b(t.to,this.transition.to)},e.prototype.canTransition=function(){return!this.transition.active},e.prototype.update=function(t){this.copy(t)},e.prototype.clone=function(){var t=new e(this.width,this.height);return t.copy(this),t},e.prototype.copy=function(t){var e=this;this.pose.atomic(function(){e.pose.position.copy(t.pose.position),e.pose.rotation.copy(t.pose.rotation),e.pose.focalDistance=t.pose.focalDistance,e.pose.projection.copy(t.pose.projection),e.pose.setDirty()}),this._baseFovY=t.baseFovY,this.transition.atomic(function(){e.copyTransition(t.transition),e.transition.setDirty()})},e.prototype.shallowIsEqual=function(t){return this.pose.position.equals(t.pose.position)&&this.pose.rotation.equals(t.pose.rotation)&&this.pose.projection.equals(t.pose.projection)&&this.pose.focalDistance===t.pose.focalDistance&&this.baseFovY===t.baseFovY},e.prototype.isEqual=function(t){return this.shallowIsEqual(t)&&this.transitionIsEqual(t.transition)},e.prototype.transitionIsEqual=function(t){return this.transition.active===t.active&&this.transition.type===t.type&&this.transition.progress.equals(t.progress)&&this.transition.blackoutProgress.equals(t.blackoutProgress)&&this.transition.rotationDelay===t.rotationDelay&&this.transition.rotationDuration===t.rotationDuration&&this.transition.matrixDelay===t.matrixDelay&&this.transition.matrixDuration===t.matrixDuration&&this.transition.activeInternal===t.activeInternal&&l(this.transition.from.position,t.from.position)&&l(this.transition.from.rotation,t.from.rotation)&&l(this.transition.from.projection,t.from.projection)&&l(this.transition.to.position,t.to.position)&&l(this.transition.to.rotation,t.to.rotation)&&l(this.transition.to.projection,t.to.projection)&&this.transition.startTime===t.startTime&&this.transition.duration===t.duration},e}(r.a)},320:function(t,e,n){"use strict";n.d(e,"n",function(){return U}),n.d(e,"b",function(){return G}),n.d(e,"c",function(){return W}),n.d(e,"d",function(){return z}),n.d(e,"i",function(){return K}),n.d(e,"l",function(){return Y}),n.d(e,"j",function(){return q}),n.d(e,"k",function(){return X}),n.d(e,"h",function(){return Z}),n.d(e,"f",function(){return Q}),n.d(e,"q",function(){return J}),n.d(e,"p",function(){return $}),n.d(e,"g",function(){return tt}),n.d(e,"o",function(){return et}),n.d(e,"a",function(){return nt}),n.d(e,"m",function(){return ot}),n.d(e,"e",function(){return rt});var o,r,i,a,s,c,l,u,p,h,d,f,b,g,y,v,m,O,w,_,E,S,C,P,k,j,T,L,A=n(91),x=n(1),D=n(49),M=n(10),I=n(50),R=n(334),N=n(11),H=n(144),V=n(48),F=n(7),B=n(149),U=function(t){return 1===t.elements[15]},G=function(t,e){var n=new x.a;if(e.intersectBox(t,n),!n)return null;var o=new x.a;return Object(F.e)(n.x,t.max.x,B.a.epsilon)?o.x=-1:Object(F.e)(n.x,t.min.x,B.a.epsilon)?o.x=1:Object(F.e)(n.y,t.max.y,B.a.epsilon)?o.y=-1:Object(F.e)(n.y,t.min.y,B.a.epsilon)?o.y=1:Object(F.e)(n.z,t.max.z,B.a.epsilon)?o.z=-1:o.z=1,t.containsPoint(e.origin)||o.multiplyScalar(-1),{point:n,normal:o}},W=(o=new x.a,function(t,e,n,r){return o.copy(t).sub(e),o.clampLength(n,r),e.clone().add(o)}),z=function(){var t=new x.a;return function(e,n,o,r){t.copy(n).sub(e);var i=Math.atan2(Math.sqrt(Math.pow(t.x,2)+Math.pow(t.z,2)),t.y),a=Math.min(Math.max(o,i),r);return Math.abs(i-a)>Number.EPSILON?K(e,n,i-a,!1):e}}(),K=function(){var t=new x.a,e=new x.a;return function(n,o,r,i){return t.copy(o).sub(n),i?e.copy(V.a.UP):e.copy(t).applyAxisAngle(V.a.UP,-1*Math.PI/2).setY(0).normalize(),t.applyAxisAngle(e,r),o.clone().sub(t)}}(),Y=(r=new x.a,i=new x.a,function(t,e,n){return r.copy(t).sub(e).normalize(),i.copy(t).sub(n).normalize(),(new M.a).setFromUnitVectors(r,i)}),q=(a=new H.a,function(t,e){return a.setPosition(t),a.lookAt(t,e,V.a.UP),(new M.a).setFromRotationMatrix(a.asThreeMatrix4())}),X=(s=new x.a,function(t,e,n){return s.copy(V.a.FORWARD).applyQuaternion(t).normalize(),s.clone().multiplyScalar(-1*n).add(e)}),Z=(c=new R.a,l=new x.a,u=new x.a,function(t,e,n){return u.set(0,0,0),l.copy(V.a.FORWARD).applyQuaternion(e),c.set(t,l),c.intersectPlane(n,u)}),Q=(p=new x.a,h=new x.a,d=new x.a,f=new x.a,b=[new x.a,new x.a,new x.a,new x.a,new x.a,new x.a,new x.a,new x.a],g=new x.a,y=new x.a,v=new x.a,m=new x.a,O=new I.a,w=new x.a,_=new R.a,E=new x.a,S=new x.a,function(t,e,n,o,r,i){p.copy(V.a.FORWARD).applyQuaternion(e).setY(0),h.copy(p).setY(-Math.PI/6).normalize(),f.copy(h).applyAxisAngle(V.a.UP,-Math.PI/2).setY(0).normalize(),d.copy(f).cross(h).normalize();for(var a=0,s=o.max,c=o.min,l=[s,c],u=0;u<2;u++)for(var C=l[u].x,P=0;P<2;P++)for(var k=l[P].y,j=0;j<2;j++){var T=l[j].z;b[a].set(C,k,T),a++}g.copy(c),v.copy(t).setY(c.y);var L=y.copy(g).sub(v).dot(h);b.forEach(function(t){if(t.y!==s.y){var e=y.copy(t).sub(v).dot(h);e<L&&(g.copy(t),L=e)}});var A=Math.sign(g.dot(f));m.copy(g).setX(g.x===s.x?c.x:s.x),Math.sign(m.dot(f))!==A?O.set(w.set(0,0,-1*Math.sign(g.z)),Math.abs(g.z)):(m.copy(g).setZ(g.z===s.z?c.z:s.z),O.set(w.set(-1*Math.sign(g.x),0,0),Math.abs(g.x))),_.set(t,E.copy(h).multiplyScalar(-1)),_.intersectPlane(O,S);var x=Math.min(Math.abs(S&&S.dot(h)),L),D=0,M=0;b.forEach(function(e){y.copy(e).sub(t);var n=Math.abs(y.dot(f)),o=Math.abs(y.dot(d));n>D&&(D=n),o>M&&(M=o)});var I=D/Math.tan(r*i/2),R=M/Math.tan(r/2),N=Math.max(I,R)+Math.abs(x),H={};return H.position=t.clone().add(h.clone().multiplyScalar(1.1*-N)),H.rotation=q(H.position,t),H}),J=(C=new N.a,function(){var t=new N.a,e=new D.a;return function(n,o,r,i,a){return a=a||new A.a,t.makeRotationFromQuaternion(r).setPosition(o),t.getInverse(t),t.premultiply(i.asThreeMatrix4()),e.x=n.x,e.y=n.y,e.z=n.z,e.w=1,e.applyMatrix4(t),e.x/=e.w,e.y/=e.w,e.z/=e.w,e.w=1,a.x=e.x,a.y=e.y,a}}()),$=(P=new x.a,function(t,e){var n=t.angleTo(e);return Math.sign(P.crossVectors(t,e).dot(V.a.UP))*n}),tt=(k=new H.a,j=new x.a,function(t,e,n,o){return o=o||new H.a,t.parent?t.parent.getWorldPosition(j):t.getWorldPosition(j),o.lookAt(e,j,n),t.parent&&o.premultiply(k.getInverse(t.parent.matrixWorld)),o.extractRotation(o),o}),et=function(t){return!!t&&1===t.elements[15]},nt=function(t,e,n,o){if(void 0===o&&(o=1.5),et(t)){var r=rt(t);return o*window.innerHeight/(2*r)}var i=e.distanceTo(n),a=2*Math.atan(1/t.elements[5]),s=o/(2*Math.tan(a/2)*i);return window.innerHeight*s},ot=(T=new x.a,L=new N.a,function(t,e,n){var o=T.set(0,0,-t).applyMatrix4(e).z;return T.set(2/n,0,o).applyMatrix4(L.getInverse(e)),T.x}),rt=function(t){return 1/t.elements[5]}},327:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return a});var o=n(144),r={fov:75,near:.1,far:1500},i=function(t){return(new o.a).makePerspectiveFov(r.fov,t,r.near,r.far)},a=function(t,e,n){void 0===n&&(n=1);var i=t/2,a=e/2,s=(new o.a).makeOrthographic(-i,i,a,-a,r.near,r.far);return s.elements[0]*=n,s.elements[5]*=n,s}},333:function(t,e,n){"use strict";var o;n.d(e,"a",function(){return o}),function(t){t[t.ESCAPE=27]="ESCAPE",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.LEFTARROW=37]="LEFTARROW",t[t.UPARROW=38]="UPARROW",t[t.RIGHTARROW=39]="RIGHTARROW",t[t.DOWNARROW=40]="DOWNARROW",t[t.TAB=9]="TAB",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.SPACE=32]="SPACE",t[t.RETURN=13]="RETURN",t[t.SEMICOLON=186]="SEMICOLON",t[t.PLUSEQUALS=187]="PLUSEQUALS",t[t.DASHUNDERSCORE=189]="DASHUNDERSCORE",t[t.OPENBRACKET=219]="OPENBRACKET",t[t.SHIFT=16]="SHIFT",t[t.ALT=18]="ALT"}(o||(o={}))},338:function(t,e,n){"use strict";var o;n.d(e,"d",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"f",function(){return c}),n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"i",function(){return u}),n.d(e,"h",function(){return p}),n.d(e,"e",function(){return h}),n.d(e,"c",function(){return l}),n.d(e,"j",function(){return d});var r,i,a=250,s=function(){return{wrapperLength:1,childLength:1,scrollOffset:1,isVisible:!1}},c=function(){return{scrollbar:null,animation:null,dragStartScroll:0}};!function(t){t.horizontal="horizontal",t.vertical="vertical"}(r||(r={})),function(t){t.x="x",t.y="y"}(i||(i={}));var l,u=function(t){switch(t){case r.horizontal:return i.x;case r.vertical:return i.y}throw Error()},p=function(t){switch(t){case i.x:return r.horizontal;case i.y:return r.vertical}throw Error()},h=((o={})[r.horizontal]={scrollOffset:"scrollLeft",offsetLength:"offsetWidth",clientLength:"clientWidth",positionOffset:"offsetLeft",lengthName:"width",offsetName:"left",eventPosition:"clientX",delta:i.x},o[r.vertical]={scrollOffset:"scrollTop",offsetLength:"offsetHeight",clientLength:"clientHeight",positionOffset:"offsetTop",lengthName:"height",offsetName:"top",eventPosition:"clientY",delta:i.y},o);!function(t){t.Beginning="Beginning",t.Middle="Middle",t.End="End",t.None="None"}(l||(l={}));var d=function(t,e){return e?t<.01?l.Beginning:1-t<.01?l.End:l.Middle:l.None}},351:function(t,e,n){"use strict";var o;n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),function(t){t.START_LOCATION="START_LOCATION",t.VIEW_SCAN_MANAGEMENT="VIEW_SCAN_MANAGEMENT",t.VIEW_360="VIEW_360",t.PHOTOS="PHOTOS",t.LABELS_MANAGEMENT="LABELS_MANAGEMENT",t.MEASUREMENTS="MEASUREMENTS",t.MATTERTAGS="MATTERTAGS",t.HLR="HLR",t.VR_PATH="VR_PATH",t.SETTINGS_PANEL="SETTINGS_PANEL"}(o||(o={}));var r,i={START_LOCATION:"start_loc",VIEW_SCAN_MANAGEMENT:"scan",VIEW_360:"view_360",LABELS_MANAGEMENT:"annotation",PHOTOS:"gallery",MEASUREMENTS:"measure",MATTERTAGS:"mattertag",HLR:"hlr",VR_PATH:"vr_edit",SETTINGS_PANEL:"settings_panel"};!function(t){t.START_LOCATION="START LOCATION",t.VIEW_SCAN_MANAGEMENT="3D SCANS",t.VIEW_360="360° VIEWS",t.LABELS_MANAGEMENT="LABELS",t.PHOTOS="",t.MEASUREMENTS="MEASUREMENTS",t.MATTERTAGS="MATTERTAGS",t.VR_PATH="",t.SETTINGS_PANEL=""}(r||(r={}))},356:function(t,e,n){"use strict";var o=n(30),r=n(453),i=n(147),a=n(454),s=n(378),c=n(60),l=n(373),u=n(377),p=n(9),h=function(){return{title:Object(p.h)("span",null,"Delete Mattertag Post"),message:Object(p.h)("span",null,"Are you sure you want to delete this Mattertag Post?"),cancellable:!0,cancel:"No",confirm:"Yes"}},d=n(414),f=n(20),b=n(4),g=n(351),y=n(14),v=n(474),m=n(3);n.d(e,"a",function(){return A}),n.d(e,"b",function(){return x});var O,w,_,E,S,C,P=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},j=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},T=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},L=new m.a("mattertag-manager"),A=function(t){function e(n,s,p,y,m){var O=t.call(this,[])||this;return O.engine=n,O.dataMap=s,O.catalogMap=p,O.activeTool=y,O.floorsManager=m,O.floorMattertagList={},O.mattertagsDataMap={},O.selectedObservable=Object(c.b)(null),O.editingObservable=Object(c.b)(null),O.mattertagObservable={},O.bindings=[],O.tagPropSubs=[],O.actionProperty=e.actionProperty,O.temporaryTag=null,O.isToolActive=!1,O.handleToolChange=function(t){return k(O,void 0,void 0,function(){var e;return j(this,function(n){switch(n.label){case 0:return e=this.isToolActive&&t!==g.a.MATTERTAGS,this.isToolActive=t===g.a.MATTERTAGS,e?[4,this.saveUncommittedTag()]:[3,2];case 1:n.sent(),this.dataMap.mattertagView.selected&&this.closeBillboard(this.dataMap.mattertagView.selected),this.revertChanges(),this.toggleEditing(null),n.label=2;case 2:return[2]}})})},O.getState=function(t){return O.mattertagsDataMap[t]},O.navigateToTag=function(t){O.isSidVisible(t)&&O.engine.commandBinder.issueCommand(new a.a(t,i.c.FLY)).then(function(){O.dataMap.mattertagView.addState===l.a.OPENING&&(O.dataMap.mattertagView.setAddState(l.a.OPEN),O.dataMap.mattertagView.setEditing(t))})},O.addTag=function(){return k(O,void 0,void 0,function(){var t=this;return j(this,function(e){switch(e.label){case 0:return this.dataMap.viewmodes.currentMode===b.a.Panorama?[3,2]:[4,this.engine.commandBinder.issueCommand(new f.a(f.b.INSIDE))];case 1:e.sent(),e.label=2;case 2:return[4,this.saveUncommittedTag()];case 3:return e.sent(),[2,this.engine.commandBinder.issueCommand(new v.a).then(function(e){if(e){var n=t.dataMap.mattertags.getTag(e);n&&(Object(r.a)(n,{observableDict:t.mattertagObservable,dataMap:t.mattertagsDataMap,floorSidList:t.floorMattertagList,floorProperty:"floorIndex",makeState:t.makeMattertagState}),t.temporaryTag=n,t.updateEditing({sid:e,edit:!0}),t.navigateToTag(e))}})]}})})},O.removeTag=function(t,e){return k(O,void 0,void 0,function(){var n,o,r,i=this;return j(this,function(a){switch(a.label){case 0:return e?[3,2]:(n=h(),[4,this.engine.commandBinder.issueCommand(new u.b(u.a.DISPLAY,n))]);case 1:if(a.sent()===d.a.CANCEL)return[2];a.label=2;case 2:if((o=this.dataMap.mattertagView.uncommittedTag)&&o!==t)throw Error("Mattertag manager -> prevented a call to removeTag that wasn't removing an uncommittedTag tag");return(r=this.dataMap.mattertags.getTag(t))&&this.closeBillboard(r.sid),[2,this.engine.commandBinder.issueCommand(new v.c(t)).then(function(){i.removeFromData(r),i.temporaryTag=null}).catch(function(){L.debug("Couldn't remove tag "+t+". Are you sure it was in the collection?")})]}})})},O.getColorFromString=function(t){if(t)return new o.a(t)},O.onSelectedChanged=function(){return k(O,void 0,void 0,function(){var t,e;return j(this,function(n){switch(n.label){case 0:return(t=this.getAddState())===l.a.PLACING||t===l.a.OPENING?[3,2]:((e=this.dataMap.mattertagView.selected)&&this.updateSelected({sid:e,select:!0}),this.dataMap.mattertagView.uncommittedTag===e?[3,2]:[4,this.saveUncommittedTag()]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},O.onEditingTagChanged=function(){var t=O.dataMap.mattertagView.editing;t&&O.dataMap.mattertagView.selected!==t&&O.selectTag(t,!0),O.editingObservable.value=t},O.makeMattertagState=function(t){return{sid:t.sid,floor:t.floorIndex,label:t.label,description:t.description,mediaSrc:t.mediaSrc,mediaType:t.mediaType,visible:t.enabled,color:"#"+t.color.getHexString(),stemHeight:t.stemVector.length(),stemVisible:t.stemVisible,selected:!1,editing:!1}},O.setupDataAndObservable(),O.bindings.push(O.dataMap.mattertagView.onSelectedChanged(O.onSelectedChanged,!1),O.dataMap.mattertagView.onEditingTagChanged(O.onEditingTagChanged,!1)),O}return P(e,t),e.prototype.connect=function(){var t,e,n,o;try{for(var r=T(this.bindings),i=r.next();!i.done;i=r.next()){i.value.renew()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}try{for(var a=T(this.tagPropSubs),s=a.next();!s.done;s=a.next()){s.value.renew()}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}this.activeTool.onPropertyChanged("tool",this.handleToolChange)},e.prototype.disconnect=function(){var t,e,n,o;try{for(var r=T(this.bindings),i=r.next();!i.done;i=r.next()){i.value.cancel()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}try{for(var a=T(this.tagPropSubs),s=a.next();!s.done;s=a.next()){s.value.cancel()}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}this.activeTool.removeOnPropertyChanged("tool",this.handleToolChange)},e.prototype.editItem=function(t,n){switch(t){case e.Action.EDIT:var o=n;return this.editMattertag(o);case e.Action.SELECT:var r=n;return this.selectTag(r.sid,r.select);case e.Action.TOGGLE_VISIBILITY:return this.toggleMattertagVisibility(n);case e.Action.CHANGE_VISIBILITY:case e.Action.CHANGE_TEXT:case e.Action.CHANGE_STEM_HEIGHT:case e.Action.CHANGE_STEM_VISIBILITY:case e.Action.CHANGE_COLOR:case e.Action.CHANGE_MEDIA:return this.modifyMattertag(n);case e.Action.SAVE:var i=n;return this.commitMattertag(i.sid);case e.Action.REVERT:return this.revertChanges();case e.Action.ADD:return this.addTag();case e.Action.DELETE:var a=n;return this.removeTag(a.sid,a.suppressConfirmation)}},e.prototype.onStateUpdated=function(t,n){var o=this,r=[];return t.forEach(function(t){switch(t){case e.State.SELECTED:r.push(o.selectedObservable.onChanged(n));break;case e.State.EDITING:r.push(o.editingObservable.onChanged(n));break;case e.State.MATTERTAG_LABEL:case e.State.MATTERTAG_DESCRIPTION:case e.State.MATTERTAG_COLOR:case e.State.MATTERTAG_AMOUNT:case e.State.MATTERTAG_VISIBLE:case e.State.MATTERTAG_STEM_HEIGHT:case e.State.MATTERTAG_STEM_VISIBLE:case e.State.MATTERTAG_MEDIA_SOURCE:var i=D[t];r.push(o.mattertagObservable[i].onChanged(n))}}),r},Object.defineProperty(e.prototype,"floorDataMap",{get:function(){return Object(r.b)(this.mattertagsDataMap,this.floorMattertagList)},enumerable:!0,configurable:!0}),e.prototype.getCount=function(){return Object.keys(this.mattertagsDataMap).length},e.prototype.toggleEditing=function(t){t&&this.dataMap.mattertagView.selected!==t&&this.selectTag(t,!0),this.editingObservable.value=t,this.dataMap.mattertagView.setEditing(t)},Object.defineProperty(e.prototype,"editing",{get:function(){return this.editingObservable.value},enumerable:!0,configurable:!0}),e.prototype.cancelChanges=function(){this.revertChanges()},e.prototype.removeFromData=function(t){Object(r.e)(t,{observableDict:this.mattertagObservable,dataMap:this.mattertagsDataMap,floorSidList:this.floorMattertagList,floorProperty:"floorIndex"})},e.prototype.closeBillboard=function(t){this.dataMap.mattertagView.removeBillboards([t]),this.dataMap.mattertagView.selected===t&&this.dataMap.mattertagView.selectTag(null)},e.prototype.isNewTag=function(t){return this.dataMap.mattertagView.isAddingTag()&&this.temporaryTag&&this.temporaryTag.sid===t},e.prototype.getAddState=function(){return this.dataMap.mattertagView.addState},e.prototype.updateSelected=function(t){var e=t.select,n={sid:t.sid,toggled:e,observable:this.selectedObservable,dataMap:this.mattertagsDataMap,property:"selected"};Object(r.c)(n),e||(this.toggleEditing(null),this.closeBillboard(t.sid))},e.prototype.editMattertag=function(t){var e=t.sid;if(this.updateEditing(t),this.isSidVisible(e))this.navigateToTag(e);else{var n=this.dataMap.mattertagView;n.selected===t.sid||(n.selected&&n.removeBillboards([n.selected]),n.selectTag(e),n.addBillboards([e]))}},e.prototype.updateEditing=function(t){var e={sid:t.sid,toggled:t.edit,observable:this.editingObservable,dataMap:this.mattertagsDataMap,property:"editing"};Object(r.c)(e),this.updateSelected({sid:t.sid,select:t.edit})},e.prototype.isSidVisible=function(t){return this.mattertagsDataMap[t]&&this.mattertagsDataMap[t].visible},e.prototype.selectTag=function(t,e){this.isSidVisible(t)&&(this.updateSelected({sid:t,select:e}),e&&this.navigateToTag(t))},e.prototype.toggleMattertagVisibility=function(t){return k(this,void 0,Promise,function(){var e;return j(this,function(n){switch(n.label){case 0:return e=t.visible,this.closeBillboard(t.sid),[4,this.engine.commandBinder.issueCommand(new v.d(t.sid,{enabled:e},!0))];case 1:return n.sent(),[2]}})})},e.prototype.modifyMattertag=function(t){return k(this,void 0,Promise,function(){var e;return j(this,function(n){switch(n.label){case 0:return delete(e=Object.assign({},t,{color:this.getColorFromString(t.color),enabled:t.visible})).sid,[4,this.engine.commandBinder.issueCommand(new v.d(t.sid,e,!1))];case 1:return n.sent(),t.hasOwnProperty("stemHeight")&&(this.mattertagsDataMap[t.sid].stemHeight=this.dataMap.mattertags.getTag(t.sid).stemVector.length()),t.hasOwnProperty("color")&&(this.mattertagsDataMap[t.sid].color="#"+this.dataMap.mattertags.getTag(t.sid).color.getHexString(),this.mattertagObservable.color.value++),[2]}})})},e.prototype.commitMattertag=function(t){return k(this,void 0,void 0,function(){var e;return j(this,function(n){switch(n.label){case 0:if(this.isTagEmpty(t))return this.isNewTag(t)?[2,this.revertChanges()]:[2,this.removeTag(t,!0)];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.saveMattertag(t)];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),L.debug("Mattertag Commit failed, the mattertag-editor must have been unloaded - "+e),[3,4];case 4:return[2]}})})},e.prototype.saveUncommittedTag=function(){return k(this,void 0,void 0,function(){var t;return j(this,function(e){switch(e.label){case 0:return(t=this.dataMap.mattertagView.uncommittedTag)?[4,this.commitMattertag(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.saveMattertag=function(t){return k(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this.engine.commandBinder.issueCommand(new v.b)];case 1:return e.sent(),this.dataMap.mattertagView.selected&&this.dataMap.mattertagView.selected===t&&(this.closeBillboard(t),this.toggleEditing(null)),this.temporaryTag=null,[2]}})})},e.prototype.revertChanges=function(){return k(this,void 0,void 0,function(){var t,e;return j(this,function(n){switch(n.label){case 0:return t=this.dataMap.mattertagView.isAddingTag(),[4,this.engine.commandBinder.issueCommand(new v.e).catch(function(t){L.debug(t)})];case 1:return n.sent(),t?this.temporaryTag&&(this.removeFromData(this.temporaryTag),this.temporaryTag=null):(e=this.selectedObservable.value)&&this.dataMap.mattertags.getTag(e)&&(this.mattertagsDataMap[e].color="#"+this.dataMap.mattertags.getTag(e).color.getHexString(),this.mattertagObservable.color.value++),this.dataMap.mattertagView.selected&&this.closeBillboard(this.dataMap.mattertagView.selected),this.toggleEditing(null),[2]}})})},e.prototype.setupDataAndObservable=function(){var t={iterable:this.dataMap.mattertags.collection,makeState:this.makeMattertagState,dataMap:this.mattertagsDataMap,floorSidList:this.floorMattertagList,floorProperty:"floorIndex",catalogMap:this.catalogMap,subscriptions:this.tagPropSubs,observableDict:this.mattertagObservable,propertyKeys:x,ignorePropertyKeys:{enabled:"visible",stemVector:"stemHeight"}};Object(r.g)(t),Object(r.i)(this.floorMattertagList,this.mattertagsDataMap,"label"),Object(r.h)(t),this.setupPropToDataMapObservables(),this.mattertagObservable.amount=Object(c.b)(Object.keys(this.mattertagsDataMap).length)},e.prototype.setupPropToDataMapObservables=function(){var t=this,e=this.catalogMap.enabled.createSubscription(function(e,n){t.mattertagsDataMap[e.sid]&&(t.mattertagsDataMap[e.sid].visible=e[n],t.mattertagObservable.enabled.value++)},!0),n=this.catalogMap.stemVector.createSubscription(function(e,n){t.mattertagsDataMap[e.sid]&&(t.mattertagsDataMap[e.sid].stemHeight=e[n].length(),t.mattertagObservable.stemVector.value++)},!0);this.tagPropSubs.push(e,n)},e.prototype.isTagEmpty=function(t){var e=this.getState(t);if(e){var n=e.label,o=e.description,r=e.mediaSrc;return Object(y.e)(n)&&Object(y.e)(o)&&Object(y.e)(r)}return!0},e.prototype.onMattertagAddStateChanged=function(t){return this.dataMap.mattertagView.onAddStateChanged(t,!0)},e}(s.a);S=A||(A={}),(E=S.Action||(S.Action={}))[E.ADD=1]="ADD",E[E.TOGGLE_VISIBILITY=2]="TOGGLE_VISIBILITY",E[E.CHANGE_VISIBILITY=3]="CHANGE_VISIBILITY",E[E.CHANGE_TEXT=4]="CHANGE_TEXT",E[E.CHANGE_STEM_HEIGHT=5]="CHANGE_STEM_HEIGHT",E[E.CHANGE_STEM_VISIBILITY=6]="CHANGE_STEM_VISIBILITY",E[E.CHANGE_COLOR=7]="CHANGE_COLOR",E[E.CHANGE_MEDIA=8]="CHANGE_MEDIA",E[E.DELETE=9]="DELETE",E[E.SELECT=10]="SELECT",E[E.EDIT=11]="EDIT",E[E.SAVE=12]="SAVE",E[E.REVERT=13]="REVERT",S.actionProperty=((C={})[S.Action.SELECT]="select",C[S.Action.EDIT]="edit",C[S.Action.TOGGLE_VISIBILITY]="enabled",C[S.Action.CHANGE_VISIBILITY]="enabled",C),(_=S.State||(S.State={}))[_.SELECTED=1]="SELECTED",_[_.EDITING=2]="EDITING",_[_.MATTERTAG_VISIBLE=3]="MATTERTAG_VISIBLE",_[_.MATTERTAG_LABEL=4]="MATTERTAG_LABEL",_[_.MATTERTAG_DESCRIPTION=5]="MATTERTAG_DESCRIPTION",_[_.MATTERTAG_COLOR=6]="MATTERTAG_COLOR",_[_.MATTERTAG_STEM_HEIGHT=7]="MATTERTAG_STEM_HEIGHT",_[_.MATTERTAG_STEM_VISIBLE=8]="MATTERTAG_STEM_VISIBLE",_[_.MATTERTAG_MEDIA_SOURCE=9]="MATTERTAG_MEDIA_SOURCE",_[_.MATTERTAG_AMOUNT=10]="MATTERTAG_AMOUNT";var x=["label","description","color","mediaSrc","enabled","stemVector","stemVisible"],D=((w={})[A.State.MATTERTAG_LABEL]="label",w[A.State.MATTERTAG_DESCRIPTION]="description",w[A.State.MATTERTAG_COLOR]="color",w[A.State.MATTERTAG_VISIBLE]="enabled",w[A.State.MATTERTAG_AMOUNT]="amount",w[A.State.MATTERTAG_STEM_HEIGHT]="stemVector",w[A.State.MATTERTAG_STEM_VISIBLE]="stemVisible",w[A.State.MATTERTAG_MEDIA_SOURCE]="mediaSrc",w)},360:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return r}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return d});var o,r,i=n(359);!function(t){t[t.RESIZE=1]="RESIZE",t[t.ORIENTATION_CHANGED=2]="ORIENTATION_CHANGED"}(o||(o={})),function(t){t[t.PORTRAIT=1]="PORTRAIT",t[t.LANDSCAPE=2]="LANDSCAPE"}(r||(r={}));var a=[],s=[],c={w:window.innerWidth,h:window.innerHeight},l=new i.c(function(){return c},function(t){return a.push(t)},function(t){a=a.filter(function(e){return e!==t})}),u=function(){return window.innerWidth>window.innerHeight?r.LANDSCAPE:r.PORTRAIT},p=u(),h=new i.c(function(){return p},function(t){return s.push(t)},function(t){s=s.filter(function(e){return e!==t})});function d(t,e){switch(t){case o.RESIZE:return l.createSubscription(e);case o.ORIENTATION_CHANGED:return h.createSubscription(e)}}var f,b,g=function(){var t=function(){window.clearInterval(f),window.clearTimeout(b)};t();var e=function(){c.w===window.innerWidth&&c.h===window.innerHeight||(c.w=window.innerWidth,c.h=window.innerHeight,function(){if(a.length>0&&a.forEach(function(t){return t(c)}),s.length>0){var t=u();t!==p&&(p=t,s.forEach(function(e){return e(t)}))}}())};f=window.setInterval(e,100),b=window.setTimeout(t,1e3),e()};window.addEventListener("resize",g)},363:function(t,e,n){"use strict";var o,r=n(9),i=n(338),a=n(477),s=n(433),c=n(476),l=n(432),u=n(94),p=(n(475),n(46)),h=n(360),d=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(){return(f=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},b=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};r.options.debounceRendering=requestAnimationFrame;var g=function(t){function e(e){var n=t.call(this,e)||this;return n.horizontal=Object(i.f)(),n.vertical=Object(i.f)(),n.manuallyMoved=!1,n.scrollPosition={horizontal:i.c.Beginning,vertical:i.c.End},n.getScrollableContainer=function(){return n.innerWrapper},n.getScrolledOffset=function(t){var e=i.e[t].scrollOffset;return n.innerWrapper[e]/n.state[t].childLength},n.state={horizontal:Object(i.g)(),vertical:Object(i.g)()},n.resizeSubscription=Object(h.c)(h.b.RESIZE,function(){return n.handleExternalChange(h.b.RESIZE)}),n.scrollTo=n.scrollTo.bind(n),n.handlePressStart=n.handlePressStart.bind(n),n.handlePressMove=n.handlePressMove.bind(n),n.handleDragEnd=n.handleDragEnd.bind(n),n.handleDragStart=n.handleDragStart.bind(n),n.handleWheelEvent=n.handleWheelEvent.bind(n),n.handleClick=n.handleClick.bind(n),n.toggleVisibility=n.toggleVisibility.bind(n),n.hasManuallyMoved=n.hasManuallyMoved.bind(n),n.inputFilter=new l.a({handlePressStart:n.handlePressStart,handlePressMove:n.handlePressMove,handleDragStart:n.handleDragStart,handleDragEnd:n.handleDragEnd,handleClick:n.handleClick}),window.PointerEvent||(window.addEventListener("mousemove",n.inputFilter.handleEvent),window.addEventListener("mouseleave",n.inputFilter.handleEvent),window.addEventListener("mouseup",n.inputFilter.handleEvent)),window.addEventListener("pointermove",n.inputFilter.handleEvent),window.addEventListener("pointerup",n.inputFilter.handleEvent),window.addEventListener("touchmove",n.inputFilter.handleEvent),window.addEventListener("touchend",n.inputFilter.handleEvent),window.addEventListener("touchcancel",n.inputFilter.handleEvent),n}return d(e,t),e.prototype.componentDidMount=function(){this.resizeSubscription.renew(),this.innerWrapper.addEventListener("wheel",this.handleWheelEvent,!0),this.props.scrollbarScrollingOnly?this.innerWrapper.addEventListener("click",this.handleClick):(this.innerWrapper.addEventListener("mousedown",this.inputFilter.handleEvent),this.innerWrapper.addEventListener("pointerdown",this.inputFilter.handleEvent),this.innerWrapper.addEventListener("touchstart",this.inputFilter.handleEvent)),this.firstChild=this.innerWrapper.firstElementChild,this.props.onScrollPositionChange&&this.props.onScrollPositionChange(),this.props.hasOwnProperty("suppressDrag")&&this.inputFilter.setEnabled(!!this.props.suppressDrag)},e.prototype.componentWillUnmount=function(){this.resizeSubscription.cancel(),window.PointerEvent||(window.removeEventListener("mousemove",this.inputFilter.handleEvent),window.removeEventListener("mouseleave",this.inputFilter.handleEvent),window.removeEventListener("mouseup",this.inputFilter.handleEvent)),window.removeEventListener("pointermove",this.inputFilter.handleEvent),window.removeEventListener("touchmove",this.inputFilter.handleEvent),window.removeEventListener("pointerup",this.inputFilter.handleEvent),window.removeEventListener("touchend",this.inputFilter.handleEvent),window.removeEventListener("touchcancel",this.inputFilter.handleEvent),this.innerWrapper.removeEventListener("wheel",this.handleWheelEvent,!0),this.props.scrollbarScrollingOnly?this.innerWrapper.removeEventListener("click",this.handleClick):(this.innerWrapper.removeEventListener("mousedown",this.inputFilter.handleEvent),this.innerWrapper.removeEventListener("pointerdown",this.inputFilter.handleEvent),this.innerWrapper.removeEventListener("touchstart",this.inputFilter.handleEvent))},e.prototype.componentWillReceiveProps=function(t){t.suppressDrag!==this.props.suppressDrag&&(this.inputFilter.setEnabled(!!this.props.suppressDrag),this.props.suppressDrag&&(this.manuallyMoved=!1))},e.prototype.getSnapshotBeforeUpdate=function(){this.props.waitToUpdate||this.handleExternalChange()},e.prototype.componentDidUpdate=function(){var t=this;if(this.horizontal.animation||this.vertical.animation){var e={};for(var n in this.state){var o=n;this[o].animation&&(this[o].animation.isAnimating?e[Object(i.i)(o)]=this[o].animation.getUpdatedValue():this[o].animation=null)}Object.keys(e).length>0&&window.requestAnimationFrame(function(){t.innerWrapper&&t.scrollTo(e)})}},e.prototype.scrollTo=function(t){var e,n;if(t.hasOwnProperty(i.a.x)||t.hasOwnProperty(i.a.y)){var o={};try{for(var r=b(this.getVisibleAxes(t)),a=r.next();!a.done;a=r.next()){var s=a.value,c=Object(i.h)(s),l=i.e[c].scrollOffset,u=t[s];if(void 0!==u){if(isNaN(u))return;this.innerWrapper[l]=Math.max(Math.min(1,u)*this.state[c].childLength,0),o[c]=f({},this.state[c],{scrollOffset:this.innerWrapper[l]})}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this.setState(o)}},e.prototype.animatedScrollTo=function(t,e){var n,o;if(t.hasOwnProperty(i.a.x)||t.hasOwnProperty(i.a.y))try{for(var r=b(this.getVisibleAxes(t)),a=r.next();!a.done;a=r.next()){var s=a.value,l=Object(i.h)(s),u=i.e[l].scrollOffset;this[l].animation=new c.a({duration:e||i.d,startValue:this.innerWrapper[u]/this.state[l].childLength,endValue:Math.max(0,Math.min(1,t[s]))})}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},e.prototype.setScrollCenter=function(t){var e,n;if(t&&t.compareDocumentPosition(this.innerWrapper)&Node.DOCUMENT_POSITION_CONTAINS){this.scrollCenter=t;var o={},r={};try{for(var a=b(this.getVisibleAxes(this.state)),s=a.next();!s.done;s=a.next()){var c=s.value,l=Object(i.i)(c);o[l]=t[i.e[c].positionOffset]+t[i.e[c].offsetLength]/2;for(var u=t;u.parentElement&&u!==this.innerWrapper;)u=u.parentElement,o[l]+=u[i.e[c].positionOffset];var p=this.outerWrapper.parentElement[i.e[c].offsetLength];r[l]=(o[l]-p/2)/this.state[c].childLength}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}Object.keys(r).length>0&&this.animatedScrollTo(r)}},e.prototype.getVisibleAxes=function(t){var e=[];for(var n in t)(t[n]||"number"==typeof t[n])&&(n in i.a&&this.state[Object(i.h)(n)].isVisible?e.push(n):n in i.b&&this.state[n].isVisible&&e.push(n));return e},e.prototype.handleDragStart=function(){delete this.scrollCenter,this.hasManuallyMoved()},e.prototype.handlePressStart=function(){this.horizontal.dragStartScroll=this.innerWrapper.scrollLeft,this.vertical.dragStartScroll=this.innerWrapper.scrollTop},e.prototype.handlePressMove=function(t){var e,n,o={};try{for(var r=b(this.getVisibleAxes(t)),a=r.next();!a.done;a=r.next()){var s=a.value,c=Object(i.h)(s);o[s]=(t[s]+this[c].dragStartScroll)/this.state[c].childLength}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this.scrollTo(o)},e.prototype.handleWheelEvent=function(t){this.props.singleScrollDirection===i.b.horizontal&&0===t.deltaX&&0!==t.deltaY?(this.handlePressStart(),this.handlePressMove({x:t.deltaY,y:0})):(this.hasManuallyMoved(),this.handleExternalChange())},e.prototype.handleClick=function(t){this.props.handleClick&&this.props.handleClick(t)},e.prototype.toggleVisibility=function(t){var e=this;return function(n){var o=f({},e.state[t],{isVisible:n});if(Object(s.a)(e.state[t],o)){var r={};r[t]=o,e.setState(r),e.props.onScrollbarVisibilityChange&&e.props.onScrollbarVisibilityChange()}}},e.prototype.toggleScrollPosition=function(t){var e=this;return function(n){e.scrollPosition[t]=n,e.props.onScrollPositionChange&&e.props.onScrollPositionChange(n)}},e.prototype.handleDragEnd=function(t,e){var n,o;try{for(var r=b(this.getVisibleAxes(t)),a=r.next();!a.done;a=r.next()){var s=a.value,l=Object(i.h)(s),p=t[s]/e,h=Math.min(i.d,Math.abs(i.d*p)),d=this.innerWrapper[i.e[l].scrollOffset],f=p*h/2;this[l].animation=new c.a({duration:h,startValue:d/this.state[l].childLength,endValue:Math.max(0,Math.min((d+f)/this.state[l].childLength,1)),easingFunction:u.h})}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}this.setState({})},e.prototype.handleExternalChange=function(t){this.scrollCenter&&t&&t===h.b.RESIZE&&this.setScrollCenter(this.scrollCenter);var e={};for(var n in this.state){var o=n,r=i.e[o].clientLength,a=f({},this.state[o],{wrapperLength:Number(this.innerWrapper&&this.innerWrapper[r])||1,childLength:Number(this.firstChild&&this.firstChild[r])||1,scrollOffset:this.innerWrapper&&this.innerWrapper[i.e[o].scrollOffset]});Object(s.a)(this.state[o],a)&&(e[o]=a)}Object.keys(e).length>0&&this.setState(e)},e.prototype.hasManuallyMoved=function(){this.manuallyMoved=!0,this.props.onScrolled&&this.props.onScrolled()},e.prototype.resetManuallyMoved=function(){this.manuallyMoved=!1},e.prototype.render=function(){var t=this,e={"max-height":this.props.scrollbarHeight?this.props.scrollbarHeight:""};return Object(r.h)("div",{class:p("outerScrollbarWrapper",this.props.singleScrollDirection+"Only","scrollbar-"+this.props.name),ref:function(e){t.outerWrapper=e},style:e},Object(r.h)("div",{class:"innerScrollbarWrapper",ref:function(e){t.innerWrapper=e}},Object(r.h)("div",{class:"paddingScrollbarWrapper"},this.props.children)),this.props.singleScrollDirection!==i.b.vertical&&Object(r.h)(a.a,{direction:i.b.horizontal,ref:function(e){t.horizontal.scrollbar=e},wrapperLength:this.state.horizontal.wrapperLength,childLength:this.state.horizontal.childLength,scrollOffset:this.state.horizontal.scrollOffset,scrollTo:this.scrollTo,onVisibilityChange:this.toggleVisibility(i.b.horizontal),onScrollPositionChange:this.toggleScrollPosition(i.b.horizontal),forceHidden:this.props.forceHidden,onThumbDrag:this.hasManuallyMoved}),this.props.singleScrollDirection!==i.b.horizontal&&Object(r.h)(a.a,{direction:i.b.vertical,ref:function(e){t.vertical.scrollbar=e},wrapperLength:this.state.vertical.wrapperLength,childLength:this.state.vertical.childLength,scrollOffset:this.state.vertical.scrollOffset,scrollTo:this.scrollTo,onVisibilityChange:this.toggleVisibility(i.b.vertical),onScrollPositionChange:this.toggleScrollPosition(i.b.vertical),forceHidden:this.props.forceHidden,onThumbDrag:this.hasManuallyMoved}))},e}(r.Component);e.a=g},364:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var o,r=n(21),i=n(60),a=n(93),s=n(35),c=n(235),l=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},p=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n.addState=!1,n.selected=new i.a(null),n.hovered=new i.a(null),n.viewdataChangeHandlers=[],n.derivedData={},n}return l(e,t),e.prototype.update=function(t){this.data=t.data,this.selected=t.selected,this.hovered=t.hovered,this.derivedData=t.derivedData,this.makeViewData=t.makeViewData,this.insertionHeight=t.insertionHeight,this.isFloorplan=t.isFloorplan,this.isUnaligned=t.isUnaligned,this.viewdataChangeHandlers=t.viewdataChangeHandlers,this.monitor=t.monitor},e.prototype.setViewDataFactory=function(t){this.makeViewData=t},e.prototype.getViewData=function(t){var e=this.data.get(t),n=this.derivedData[t];return e&&!n&&this.makeViewData&&(this.derivedData[t]=this.makeViewData(e)),this.derivedData[t]},e.prototype.iterate=function(t){this.data.iterate(t)},e.prototype.initialize=function(t){this.monitor=new c.a(this.data.getCollection(),{aggregationType:s.a.NextFrame},t)},e.prototype.dispose=function(){},e.prototype.notifyOnChanged=function(){var t,e;try{for(var n=u(this.viewdataChangeHandlers),o=n.next();!o.done;o=n.next()){(0,o.value)()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.onDataChanged=function(t,e){var n=this;void 0===e&&(e=!1);var o={renew:function(){n.monitor.onChanged(t)},cancel:function(){n.monitor.removeOnChanged(t)}};return e&&o.renew(),o},e.prototype.onViewDataChanged=function(t,e){var n=this;void 0===e&&(e=!1);var o={renew:function(){n.viewdataChangeHandlers.push(t)},cancel:function(){Object(a.a)(n.viewdataChangeHandlers,t)}};return e&&o.renew(),o},e}(r.a)},369:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o,r=n(21),i=n(1),a=n(72),s=n(146),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e,n,o){var r=t.call(this)||this;return r.opacity=new s.a(e),r.bounds=n,r.center=o,r}return c(e,t),e.prototype.update=function(t){this.opacity.copy(t.opacity),this.bounds=new a.a(t.bounds.min,t.bounds.max),this.center=(new i.a).copy(t.center)},e}(r.a)},377:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s});var o,r,i=n(16),a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t[t.CANCEL=0]="CANCEL",t[t.DISPLAY=1]="DISPLAY"}(r||(r={}));var s=function(t){function e(e,n){var o=t.call(this)||this;if(e&&!n)throw new Error("Cannot open empty modal");return o.payload={open:e,properties:n},o}return a(e,t),e.id="WORKSHOP_MODAL",e}(i.a)},378:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=function(){function t(e){var n,o;void 0===e&&(e=[]),this.catalogs=e,this.id=t,this.onUpdateCallbacks=[],this.subscriptions=[],this.triggerOnUpdates=this.triggerOnUpdates.bind(this);try{for(var r=i(this.catalogs),a=r.next();!a.done;a=r.next()){var s=a.value;this.subscriptions.push(s.createSubscription(this.triggerOnUpdates))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}}return t.prototype.connect=function(){},t.prototype.disconnect=function(){},t.prototype.activate=function(){},t.prototype.deactivate=function(){},t.prototype.onUpdate=function(t){return this.onUpdateCallbacks.push(t),1===this.onUpdateCallbacks.length&&this.enableSubscriptions(),t},t.prototype.removeOnUpdate=function(t){var e=this.onUpdateCallbacks.indexOf(t);-1!==e&&(this.onUpdateCallbacks.splice(e,1),0===this.onUpdateCallbacks.length&&this.disableSubscriptions())},t.prototype.enableSubscriptions=function(){var t,e;try{for(var n=i(this.subscriptions),o=n.next();!o.done;o=n.next()){o.value.renew()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.disableSubscriptions=function(){var t,e;try{for(var n=i(this.subscriptions),o=n.next();!o.done;o=n.next()){o.value.cancel()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.triggerOnUpdates=function(t,e){var n,o;try{for(var r=i(this.onUpdateCallbacks),a=r.next();!a.done;a=r.next()){(0,a.value)(t,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(a)},379:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(333),s=n(70),c=n(363),l=n(338),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},h=function(t){function e(e){var n=t.call(this,e)||this;return n.textInput=null,n.onInput=function(t){var e=t.target.value;n.setState({currentText:e}),n.props.onInput&&n.props.onInput(e)},n.getRef=function(t){n.textInput=t},n.state={editing:!1,currentText:n.props.text},n.startEditing=n.startEditing.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n.stopEditing=n.stopEditing.bind(n),n.handleOutsideClick=n.handleOutsideClick.bind(n),n}return u(e,t),e.prototype.componentDidMount=function(){this.textInput&&(this.textInput.addEventListener("keypress",function(t){return t.stopPropagation()}),this.textInput.addEventListener("keydown",function(t){return t.stopPropagation()}),this.textInput.addEventListener("keyup",function(t){return t.stopPropagation()}),this.props.closeOnFocusOut&&this.textInput.addEventListener("focusout",this.handleOutsideClick),(this.props.editing||this.props.autofocus)&&this.startEditing())},e.prototype.componentWillReceiveProps=function(t){t.editing&&!this.props.editing&&this.startEditing(),t.text!==this.props.text&&this.setState({currentText:t.text||t.defaultText})},e.prototype.handleOutsideClick=function(t){if(this.state.editing&&this.textInput){var e=this.textInput.value||this.props.defaultText;this.stopEditing(e,!0)}},e.prototype.stopEditing=function(t,e){void 0===e&&(e=!0),this.setState({editing:!1}),e&&this.props.text!==t?(this.setState({currentText:t}),this.props.onEdited&&this.props.onEdited(t)):this.props.onCancelEditing&&this.props.onCancelEditing()},e.prototype.getCurrentText=function(){return this.state.currentText},e.prototype.stopPropagation=function(t){t.stopPropagation()},e.prototype.startEditing=function(t){this.textInput&&(t&&t.stopPropagation(),this.setState({editing:!0}),this.props.onStartEditing&&this.props.onStartEditing(),this.textInput.focus(),this.props.defaultText&&this.textInput.select&&this.state.currentText===this.props.defaultText&&this.textInput.select())},e.prototype.onKeyPress=function(t){if(!this.props.onKeyPress||!this.props.onKeyPress(t)){t.stopPropagation();var e=t.which||t.keyCode;if("keydown"!==t.type||e===a.a.TAB){var n=t.target.value||this.props.defaultText;e!==a.a.RETURN&&e!==a.a.TAB||t.shiftKey||(t.preventDefault(),this.setState({editing:!1}),this.props.onEdited&&this.props.onEdited(n))}}},e.prototype.componentDidUpdate=function(t,e){!e.editing&&this.state.editing&&this.textInput&&this.textInput.focus()},e.prototype.getFractionalCounter=function(){if(this.props.maxLength&&this.props.fractionalCounter)return this.state.currentText.length+"/"+this.props.maxLength},e.prototype.render=function(){var t=this.state,e=t.editing,n=t.currentText,o=this.props,a=o.appendClass,s=o.hint,u=o.isDisabled,p=o.placeholder,h=o.maxLength,d=o.tabIndex,f=o.textarea,b=o.readOnlyText,g=o.fractionalCounter,y=o.showUnderline,v={inputDiv:!0,editing:e};a&&Object.keys(a).length>0&&Object.assign(v,a);var m={ref:this.getRef,class:i(v),type:"text",value:n,placeholder:p,maxLength:h,onInput:this.onInput,onClick:this.props.propagateMouseEvent?void 0:this.stopPropagation,onKeyPress:this.onKeyPress,disabled:u,readonly:this.props.readOnlyMode,onKeyDown:this.onKeyPress,tabIndex:d},O=Object(r.h)("div",{class:i("current-text",{"has-hint":!!s,"has-placeholder":!n}),"data-hint":s||void 0,onClick:this.startEditing},n||p||"");return Object(r.h)("div",{class:i("modifiable-text",{editing:e,"fractional-counter":g,default:!n}),"data-fractional-counter":this.getFractionalCounter()},f?Object(r.h)(c.a,{name:"text-input",singleScrollDirection:l.b.vertical,forceHidden:!1},O):O,Object(r.h)(f?"textarea":"input",m),b&&Object(r.h)("div",{class:"read-only-text"},b),y&&Object(r.h)("div",{class:"editable-line"}))},e=p([s.b],e)}(r.Component);e.a=h},386:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r});var o=16/9,r=1/o},399:function(t,e,n){"use strict";var o;n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r}),function(t){t.terms="terms",t.titleBar="titleBar",t.vrSelect="vrSelect",t.webVr="webVr",t.mattertag="mattertag",t.help="help",t.cta="cta",t.mattertagEmbLink="mattertagEmbLink"}(o||(o={}));var r=[o.cta,o.titleBar]},408:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a});var o=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},r=function(){return"getVRDisplays"in navigator},i=function(){return navigator.getVRDisplays().then(function(t){var e,n;try{for(var r=o(t),i=r.next();!i.done;i=r.next()){var a=i.value;if(a){var s=a.displayName;if(s&&s.match(/daydream/i))return a}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}throw Error("daydream not found in VRDisplays")})},a=function(){return navigator.getVRDisplays().then(function(t){return t.length>0&&t[0].capabilities.canPresent?t[0]:null})}},409:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o,r=n(16),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this)||this;return n.id="SET_MESH_OPACITY",n.payload={value:e},n}return i(e,t),e}(r.a)},414:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(452),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;return n.stopPropagation=function(t){t.stopPropagation()},n.onCancel=function(t){t.stopPropagation(),n.props.close(d.CANCEL)()},n.onConfirm=function(t){t.stopPropagation(),n.props.close(d.CONFIRM)()},n}return s(e,t),e.prototype.render=function(){return Object(r.h)("div",{id:"workshop-modal-background",onClick:this.stopPropagation,class:i({open:this.props.isOpen})},Object(r.h)("div",{class:"ws-modal container--medium--width"},Object(r.h)("div",{class:"ws-modal-title"},this.props.properties.title),Object(r.h)(a.a,{closeModal:this.onCancel}),Object(r.h)("div",{class:"ws-modal-message"},this.props.properties.message),Object(r.h)("div",{class:"modal-buttons"},this.props.properties.confirm&&Object(r.h)("div",{class:"portalButton confirm",onClick:this.onConfirm},this.props.properties.confirm),this.props.properties.cancel&&Object(r.h)("div",{class:"portalButton cancel",onClick:this.onCancel},this.props.properties.cancel))))},e}(r.Component),l=n(70),u=n(490),p=n(377),h=n(3);n.d(e,"b",function(){return m}),n.d(e,"a",function(){return d});var d,f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},g=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},y=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},v=new h.a("workshop-modal"),m=function(t){function e(e){var n=t.call(this)||this;return n.modalProperties={title:"",message:"",cancellable:!0},n.state={isOpen:!1},n.handleModalCommand=n.handleModalCommand.bind(n),n.close=n.close.bind(n),n}return f(e,t),e.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){return y(this,function(t){try{this.props.commandBinder.addBinding(p.b,this.handleModalCommand)}catch(t){v.debug(t)}return[2]})})},e.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){return y(this,function(t){try{this.props.commandBinder.removeBinding(p.b,this.handleModalCommand)}catch(t){v.debug(t)}return[2]})})},e.prototype.handleModalCommand=function(t){return g(this,void 0,Promise,function(){return y(this,function(e){switch(e.label){case 0:return t.open!==p.a.DISPLAY?[3,3]:this.state.isOpen?this.cancellable?[4,this.close(d.CANCEL)()]:[2,Promise.reject("Cannot close non-cancellable modal")]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,this.openModal(t.properties)];case 3:return this.state.isOpen?(this.close(d.CANCEL)(),[2,this.togglePromise]):[2,Promise.reject("Cannot cancel a closed modal")]}})})},e.prototype.openModal=function(t){var e=this;return this.props.commandBinder.issueCommand(new u.a(400,3)),this.props.handleBlur(!0),this.modalProperties=t,this.setState({isOpen:!0}),this.cancellable=t.cancellable,this.togglePromise=new Promise(function(t){e.promiseResolve=t}),this.togglePromise},e.prototype.close=function(t){var e=this;return function(){e.props.commandBinder.issueCommand(new u.a(400,0)),e.props.handleBlur(!1),e.promiseResolve(t),e.setState({isOpen:!1})}},e.prototype.render=function(){return Object(r.h)(c,{properties:this.modalProperties,isOpen:this.state.isOpen,close:this.close})},e=b([l.b],e)}(r.Component);!function(t){t[t.CONFIRM=0]="CONFIRM",t[t.CANCEL=1]="CANCEL"}(d||(d={}))},416:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o,r=n(9),i=n(6),a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(n){var o,r=t.call(this,n)||this;return r.eventsToSend=((o={})[e.SendEvent.HOVER]=!1,o[e.SendEvent.CLICK]=!1,o[e.SendEvent.BUTTON]=!1,o),r.onHoverEvent=function(t){switch(t.type){case"mousemove":r.props.onMouseMove&&r.props.onMouseMove(t);break;case"mouseenter":r.props.onMouseEnter&&r.props.onMouseEnter(t);break;case"mouseleave":r.props.onMouseLeave&&r.props.onMouseLeave(t);break;case"pointermove":r.props.onMouseMove&&r.props.onMouseMove(t);break;case"pointerenter":r.props.onMouseEnter&&r.props.onMouseEnter(t);break;case"pointerleave":r.props.onMouseLeave&&r.props.onMouseLeave(t)}r.eventsToSend[e.SendEvent.HOVER]&&r.isValidTarget(t.target)&&r.sendEventThrough(t.type,t)},r.isValidTarget=function(t){return t===r.mouseThroughElement||r.props.includeChildrenEvents&&t.compareDocumentPosition(r.mouseThroughElement)&Node.DOCUMENT_POSITION_CONTAINS},r.onClick=function(t){r.props.onClick&&r.props.onClick(t),r.eventsToSend[e.SendEvent.CLICK]&&r.isValidTarget(t.target)&&(r.sendEventThrough("mousedown",t),window.setTimeout(function(){return r.sendEventThrough("mouseup",t)},0))},r.onButtonEvent=function(t){r.eventsToSend[e.SendEvent.BUTTON]&&r.isValidTarget(t.target)&&r.sendEventThrough(t.type,t)},r.onClick=r.onClick.bind(r),r.target=n.clickTarget||document.getElementsByTagName("canvas")[0],r.registerEvents(),r}return a(e,t),e.prototype.componentWillReceiveProps=function(t){Object(i.b)(this.props.sendEvents,t.sendEvents)&&this.registerEvents()},e.prototype.render=function(){var t=this;return Object(r.h)("div",{id:this.props.id,ref:function(e){return t.mouseThroughElement=e},style:this.props.style||{},class:this.props.className,onMouseEnter:this.onHoverEvent,onMouseLeave:this.onHoverEvent,onMouseMove:this.onHoverEvent,onPointerEnter:this.onHoverEvent,onPointerLeave:this.onHoverEvent,onPointerMove:this.onHoverEvent,onMouseDown:this.onButtonEvent,onMouseUp:this.onButtonEvent,onPointerDown:this.onButtonEvent,onPointerUp:this.onButtonEvent,onClick:this.onClick},this.props.children)},e.prototype.registerEvents=function(){this.props.sendEvents.length&&(this.eventsToSend[e.SendEvent.CLICK]=this.props.sendEvents.indexOf(e.SendEvent.CLICK)>-1,this.eventsToSend[e.SendEvent.HOVER]=this.props.sendEvents.indexOf(e.SendEvent.HOVER)>-1,this.eventsToSend[e.SendEvent.BUTTON]=this.props.sendEvents.indexOf(e.SendEvent.BUTTON)>-1)},e.prototype.sendEventThrough=function(t,e){var n;try{n=window.PointerEvent?new PointerEvent(t,e):new MouseEvent(t,e)}catch(o){(n=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}this.target.dispatchEvent(n)},e}(r.Component);!function(t){!function(t){t[t.HOVER=1]="HOVER",t[t.CLICK=2]="CLICK",t[t.BUTTON=3]="BUTTON"}(t.SendEvent||(t.SendEvent={}))}(s||(s={}))},431:function(t,e,n){},432:function(t,e,n){"use strict";var o=n(489),r=n(459),i=function(){function t(t){this.shouldHandleEvents=!0,this.callbacks=t,this.handleEvent=this.handleEvent.bind(this)}return t.prototype.handleEvent=function(t){if(this.shouldHandleEvents)switch(t.stopPropagation(),t.type){case"mousedown":case"touchstart":case"pointerdown":this.onPressStart(t);break;case"mousemove":case"pointermove":case"touchmove":this.onPressMove(t);break;case"mouseup":case"pointerup":case"mouseleave":case"touchend":case"touchcancel":case"pointercancel":case"pointerleave":this.onPressEnd(t)}},t.prototype.setEnabled=function(t){this.shouldHandleEvents=t,this.couldBeDrag=this.couldBeDrag&&t},t.prototype.getPosition=function(t){return Object(o.b)(t)?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY}},t.prototype.onPressStart=function(t){this.couldBeDrag=!0,this.dragEvents=[],this.dragStart=this.getPosition(t),this.callbacks.handlePressStart&&this.callbacks.handlePressStart(this.getPosition(t))},t.prototype.onPressMove=function(t){if(this.couldBeDrag){var e=this.getPosition(t);this.addDragEvent(e),this.isDragging||Math.sqrt(Math.pow(e.x-this.dragStart.x,2)+Math.pow(e.y-this.dragStart.y,2))>r.f&&(this.isDragging=!0,this.callbacks.handleDragStart&&this.callbacks.handleDragStart()),this.callbacks.handlePressMove&&this.callbacks.handlePressMove({x:this.dragStart.x-e.x,y:this.dragStart.y-e.y})}},t.prototype.onPressEnd=function(t){if(this.couldBeDrag){if(this.couldBeDrag=!1,this.isDragging){if(!this.dragEvents||!this.dragEvents[0])return;var e=this.dragEvents[0],n=this.dragEvents[this.dragEvents.length-1];if(this.callbacks.handleDragEnd){var o={x:0,y:0};Date.now()-n.timestamp<100&&(o.x=e.position.x-n.position.x,o.y=e.position.y-n.position.y),this.callbacks.handleDragEnd(o,n.timestamp-e.timestamp)}}else this.callbacks.handleClick&&this.callbacks.handleClick(t);this.isDragging=!1}},t.prototype.addDragEvent=function(t){this.dragEvents.push({position:t,timestamp:Date.now()}),this.dragEvents.length>10&&this.dragEvents.shift()},t}();e.a=i},433:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(t,e){for(var n in e)if(t[n]!==e[n])return!0;return!1}},451:function(t,e,n){t.exports=n.p+"images/headset-cardboard.png"},452:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o,r=n(9),i=(n(575),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClick=n.handleClick.bind(n),n}return i(e,t),e.prototype.handleClick=function(t){this.props.closeModal(t)},e.prototype.render=function(){return Object(r.h)("div",{class:"close-button",onClick:this.handleClick},Object(r.h)("span",{class:"icon icon-close"}))},e}(r.Component)},453:function(t,e,n){"use strict";n.d(e,"g",function(){return i}),n.d(e,"i",function(){return a}),n.d(e,"h",function(){return s}),n.d(e,"f",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"e",function(){return u}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return d});var o=n(60),r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function i(t){var e,n,o=t.iterable,i=t.makeState,a=t.dataMap,s=t.floorSidList,c=t.floorProperty;try{for(var l=r(o),u=l.next();!u.done;u=l.next()){var p=u.value;if(!p.sid)throw new Error("Item has no sid");a[p.sid]=Object.assign({},i(p));var h=p[c];s[h]||(s[h]=[]),s[h].push(p.sid)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}function a(t,e,n){for(var o in t)t[o].sort(function(t,o){var r={aText:e[t][n],bText:e[o][n]},i=r.aText,a=r.bText,s={aNum:parseInt(i,10),bNum:parseInt(a,10)},c=s.aNum,l=s.bNum;return isNaN(c)||isNaN(l)?i.toLowerCase()<a.toLowerCase()?-1:1:c-l})}function s(t){var e,n,i=t.catalogMap,a=t.subscriptions,s=t.observableDict,c=t.dataMap,l=t.propertyKeys,u=t.ignorePropertyKeys,p=void 0===u?{}:u,h=function(t){var e=t;if(s[e]=Object(o.b)(0),p&&!p[e]){var n=i[t].createSubscription(function(n,o){c[n.sid]&&(c[n.sid][e]=n[o],s[t].value++)},!0);a.push(n)}};try{for(var d=r(l),f=d.next();!f.done;f=d.next()){h(f.value)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}}function c(t){var e=t.catalogMap,n=t.observableDict,r=t.dataMap;n.amount=Object(o.b)(Object.keys(r).length),e.added.createSubscription(function(e){return l(e,t)},!0),e.removed.createSubscription(function(e){return u(e,t)},!0)}function l(t,e){var n=e.observableDict,o=e.dataMap,r=e.floorSidList,i=e.makeState,a=e.floorProperty,s=e.sortFunction,c=t[a];o[t.sid]=i(t),r[c]||(r[c]=[]),r[c].push(t.sid),s&&s(),n.amount.value++}function u(t,e){var n=e.observableDict,o=e.dataMap,r=e.floorSidList,i=t[e.floorProperty];delete o[t.sid];var a=r[i].indexOf(t.sid);-1!==a&&r[i].splice(a,1),n.amount.value--}function p(t,e){var n={};for(var o in e)n[o]=e[o].map(function(e){return t[e]});return n}function h(t){var e=t.sid,n=t.toggled,o=t.observable,r=t.dataMap,i=t.property,a=t.onChosen,s=o.value;e===s&&n||e!==s&&!n||(s&&r[s]&&(r[s].selected=!1),r[e]&&(r[e][i]=n),n&&a&&a(e),o.value=n?e:null)}function d(t){for(var e in t)0===t[e].length&&delete t[e]}},455:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(t){return t.innerWidth<487||t.innerHeight<487}},459:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"c",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"j",function(){return u}),n.d(e,"i",function(){return p}),n.d(e,"h",function(){return h}),n.d(e,"g",function(){return d}),n.d(e,"k",function(){return f});var o=n(8),r=1e3/60,i=.05,a=Math.PI/2/1e3,s=.1/60,c=.02,l=25,u=3,p=3,h=.16,d=Object(o.l)()?45:Object(o.m)()?20:35,f=.01},473:function(t,e,n){},474:function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return u});var o,r=n(16),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n,o){void 0===o&&(o=!1);var r=t.call(this)||this;return r.payload={sid:e,options:n,commitImmediately:o},r}return i(e,t),e}(r.a),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="ADD_TEMP_MATTERTAG",e}return i(e,t),e}(r.a),c=(function(t){function e(e){var n=t.call(this)||this;return n.id="ADD_MATTERTAG",n.payload={tag:e},n}i(e,t)}(r.a),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="COMMIT_MATTERTAG",e}return i(e,t),e}(r.a)),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="REVERT_MATTERTAG",e}return i(e,t),e}(r.a),u=function(t){function e(e){var n=t.call(this)||this;return n.id="DELETE_MATTERTAG",n.payload={sid:e},n}return i(e,t),e}(r.a)},475:function(t,e,n){},476:function(t,e,n){"use strict";var o=n(94),r=function(){function t(t){this.isAnimating=!0,this.duration=t.duration,this.startValue=t.startValue,this.changeValue=t.endValue-this.startValue,this.easingFunction=t.easingFunction||o.d}return t.prototype.getUpdatedValue=function(){this.startTime||(this.startTime=Date.now());var t=Date.now()-this.startTime;return t>this.duration&&(this.isAnimating=!1),this.easingFunction(t,this.startValue,this.changeValue,this.duration)},t}();e.a=r},477:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o,r=n(9),i=n(433),a=n(432),s=n(338),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=t.call(this,e)||this;return n.state={visible:!1,trackLength:1,thumbLength:1,thumbOffset:0},n.direction=s.e[e.direction],n.handlePressStart=n.handlePressStart.bind(n),n.handlePressMove=n.handlePressMove.bind(n),n.handleTrackClick=n.handleTrackClick.bind(n),n.inputFilter=new a.a({handlePressStart:n.handlePressStart,handlePressMove:n.handlePressMove}),window.PointerEvent||(window.addEventListener("mousemove",n.inputFilter.handleEvent),window.addEventListener("mouseleave",n.inputFilter.handleEvent),window.addEventListener("mouseup",n.inputFilter.handleEvent)),window.addEventListener("pointermove",n.inputFilter.handleEvent),window.addEventListener("pointerup",n.inputFilter.handleEvent),n}return c(e,t),e.prototype.componentWillUnmount=function(){window.PointerEvent||(window.removeEventListener("mousemove",this.inputFilter.handleEvent),window.removeEventListener("mouseleave",this.inputFilter.handleEvent),window.removeEventListener("mouseup",this.inputFilter.handleEvent)),window.removeEventListener("pointermove",this.inputFilter.handleEvent),window.removeEventListener("pointerup",this.inputFilter.handleEvent)},e.prototype.getTrackLength=function(){return Number(this.thumbTrack&&this.thumbTrack[this.direction.clientLength]||window.innerWidth)},e.prototype.handleTrackClick=function(t){var e;if(t.target===this.thumbTrack){var n=this.direction.eventPosition,o=this.thumbTrack.getBoundingClientRect()[this.direction.offsetName],r=t[n]<o+this.state.thumbOffset,i=this.getTrackLength(),a=0;a=r?Math.max(0,(this.state.thumbOffset-this.state.thumbLength)/i):Math.min(i,(this.state.thumbOffset+this.state.thumbLength)/i),this.props.scrollTo(((e={})[Object(s.i)(this.props.direction)]=a,e))}},e.prototype.handlePressStart=function(t){this.dragStartThumbOffset=this.state.thumbOffset},e.prototype.handlePressMove=function(t){var e,n=this.getTrackLength(),o=(this.dragStartThumbOffset-t[this.direction.delta])/n;this.props.scrollTo(((e={})[Object(s.i)(this.props.direction)]=o,e)),this.props.onThumbDrag&&this.props.onThumbDrag()},e.prototype.componentDidUpdate=function(){var t=this.props,e=t.wrapperLength,n=t.childLength,o=t.scrollOffset;if(e>0&&n>0){var r=this.getTrackLength(),a=e/n*r,c={thumbLength:a,visible:n>e,thumbOffset:Math.min(o/n*r,r-a)};if(Object(i.a)(this.state,c)){var l=this.state.visible!==c.visible;l&&this.props.onVisibilityChange&&this.props.onVisibilityChange(c.visible);var u=Object(s.j)(c.thumbOffset/(r-a),c.visible);(u!==this.scrollPosition||l)&&(this.scrollPosition=u,this.props.onScrollPositionChange&&this.props.onScrollPositionChange(u)),this.setState(c)}}},e.prototype.render=function(){var t,e=this,n=((t={})[""+this.direction.lengthName]=this.state.thumbLength+"px",t[""+this.direction.offsetName]=this.state.thumbOffset+"px",t);return Object(r.h)("div",null,this.state.visible&&!this.props.forceHidden&&Object(r.h)("div",{class:"scrollbarTrack "+this.props.direction,onClick:this.handleTrackClick,ref:function(t){e.thumbTrack=t}},Object(r.h)("div",{class:"scrollbarThumb",style:n,onMouseDown:this.inputFilter.handleEvent,onTouchStart:this.inputFilter.handleEvent})))},e}(r.Component)},489:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r});var o=function(t){return void 0!==t.pointerId},r=function(t){return void 0!==t.changedTouches}},490:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o,r=n(16),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n){var o=t.call(this)||this;return o.name="blur-canvas",o.payload={duration:e,pixelBlur:n},o}return i(e,t),e}(r.a)},493:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(433),s=n(338),c=n(477),l=n(476),u=n(432),p=n(94),h=(n(475),n(360)),d=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r.options.debounceRendering=requestAnimationFrame;var f=function(t){function e(e){var n=t.call(this,e)||this;return n.dragStartScroll=0,n.getScrollableContainer=function(){return n.innerWrapper},n.scrollWithScrollBar=function(t){t.hasOwnProperty("x")&&n.scrollTo(t.x)},n.scrollTo=function(t){void 0===t||isNaN(t)||(n.innerWrapper.scrollLeft=Math.max(Math.min(1,t)*n.state.childLength,0),n.setState({scrollOffset:n.innerWrapper.scrollLeft}))},n.handleDragStart=function(){n.setState({scrollCenter:null})},n.handlePressStart=function(){n.dragStartScroll=n.innerWrapper.scrollLeft},n.handlePressMove=function(t){var e=(t.x+n.dragStartScroll)/n.state.childLength;n.scrollTo(e)},n.handleWheelEvent=function(t){0===t.deltaX&&0!==t.deltaY?(n.handlePressStart(),n.handlePressMove({x:t.deltaY,y:0})):(n.setState({scrollCenter:null}),n.handleExternalChange())},n.handleClick=function(t){n.props.handleClick&&n.props.handleClick(t)},n.handleDragEnd=function(t,e){var o=t.x/e,r=Math.min(s.d,Math.abs(s.d*o)),i=n.innerWrapper.scrollLeft,a=o*r/2;n.animation=new l.a({duration:r,startValue:i/n.state.childLength,endValue:Math.max(0,Math.min((i+a)/n.state.childLength,1)),easingFunction:p.h})},n.state={scrollCenter:null,scrollOffset:0,wrapperLength:0,childLength:0},n.resizeSubscription=Object(h.c)(h.b.RESIZE,function(){return n.handleExternalChange(h.b.RESIZE)}),n.inputFilter=new u.a({handlePressStart:n.handlePressStart,handlePressMove:n.handlePressMove,handleDragStart:n.handleDragStart,handleDragEnd:n.handleDragEnd,handleClick:n.handleClick}),n}return d(e,t),e.prototype.componentDidMount=function(){this.resizeSubscription.renew(),this.innerWrapper.addEventListener("wheel",this.handleWheelEvent,!0);var t=this.inputFilter.handleEvent;window.PointerEvent||(window.addEventListener("mousemove",t),window.addEventListener("mouseleave",t),window.addEventListener("mouseup",t)),window.addEventListener("pointermove",t),window.addEventListener("pointerup",t),window.addEventListener("touchmove",t),window.addEventListener("touchend",t),window.addEventListener("touchcancel",t),this.props.scrollbarScrollingOnly?this.innerWrapper.addEventListener("click",this.handleClick):(this.innerWrapper.addEventListener("mousedown",t),this.innerWrapper.addEventListener("pointerdown",t),this.innerWrapper.addEventListener("touchstart",t))},e.prototype.componentWillUnmount=function(){this.resizeSubscription.cancel(),this.innerWrapper.removeEventListener("wheel",this.handleWheelEvent,!0);var t=this.inputFilter.handleEvent;window.PointerEvent||(window.removeEventListener("mousemove",t),window.removeEventListener("mouseleave",t),window.removeEventListener("mouseup",t)),window.removeEventListener("pointermove",t),window.removeEventListener("touchmove",t),window.removeEventListener("pointerup",t),window.removeEventListener("touchend",t),window.removeEventListener("touchcancel",t),this.props.scrollbarScrollingOnly?this.innerWrapper.removeEventListener("click",this.handleClick):(this.innerWrapper.removeEventListener("mousedown",t),this.innerWrapper.removeEventListener("pointerdown",t),this.innerWrapper.removeEventListener("touchstart",t))},e.prototype.componentDidUpdate=function(){var t=this;if(this.animation)if(this.animation.isAnimating){var e=this.animation.getUpdatedValue();window.requestAnimationFrame(function(){t.innerWrapper&&t.scrollTo(e)})}else this.animation=null},e.prototype.getSnapshotBeforeUpdate=function(){this.props.waitToUpdate||this.handleExternalChange()},e.prototype.scrollToElement=function(t){if(t&&t.compareDocumentPosition(this.innerWrapper)&Node.DOCUMENT_POSITION_CONTAINS){this.setState({scrollCenter:t});for(var e=t.offsetLeft+t.offsetWidth/2,n=t;n.parentElement&&n!==this.innerWrapper;)e+=(n=n.parentElement).offsetLeft;var o=(e-this.outerWrapper.parentElement.offsetWidth/2)/this.state.childLength;this.animation=new l.a({duration:s.d,startValue:this.innerWrapper.scrollLeft/this.state.childLength,endValue:Math.max(0,Math.min(1,o))})}},e.prototype.handleExternalChange=function(t){this.state.scrollCenter&&t&&t===h.b.RESIZE&&this.scrollToElement(this.state.scrollCenter);var e={wrapperLength:Number(this.innerWrapper&&this.innerWrapper.clientWidth)||1,childLength:Number(this.innerWrapper.firstElementChild&&this.innerWrapper.firstElementChild.clientWidth)||1,scrollOffset:this.innerWrapper&&this.innerWrapper.scrollLeft};Object(a.a)(this.state,e)&&this.setState(e)},e.prototype.render=function(){var t=this,e=this.props,n=e.hideScrollbar,o=e.children,a=e.onScrollableChanged,l=e.onScrollPositionChange,u=this.state,p=u.wrapperLength,h=u.childLength,d=u.scrollOffset;return Object(r.h)("div",{class:i("outerScrollbarWrapper","HorizontalOnly"),ref:function(e){t.outerWrapper=e}},Object(r.h)("div",{class:"innerScrollbarWrapper",ref:function(e){t.innerWrapper=e}},Object(r.h)("div",{class:"paddingScrollbarWrapper"},o)),Object(r.h)(c.a,{direction:s.b.horizontal,wrapperLength:p,childLength:h,scrollOffset:d,scrollTo:this.scrollWithScrollBar,forceHidden:n,onVisibilityChange:a,onScrollPositionChange:l}))},e}(r.Component),b=n(455),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t){function e(e){var n=t.call(this,e)||this;return n.onWindowResize=function(){var t=Object(b.a)(window);n.state.hideScrollbar!==t&&n.setState({hideScrollbar:t})},n.onScrollableChanged=function(t){n.setState({scrollable:t})},n.onScrollPositionChange=function(t){n.setState({scrollPosition:t})},n.getScrollableContainer=function(){return n.scrollbar?n.scrollbar.getScrollableContainer():void 0},n.handleHighlightClickable=function(){n.props.highlightClickable(!0)},n.state={scrollLeft:0,hideScrollbar:Object(b.a)(window),scrollPosition:s.c.None,scrollable:!1,usedTour:!1},n.resizeSubscription=Object(h.c)(h.b.RESIZE,n.onWindowResize),n}return g(e,t),e.prototype.componentDidMount=function(){this.resizeSubscription.renew(),this.onScrollableChanged(!0),this.onScrollPositionChange(s.c.Beginning)},e.prototype.componentWillUnmount=function(){this.resizeSubscription.cancel()},e.prototype.componentDidUpdate=function(t){var e=this.props.activeElement;null!==e&&t.activeElement!==e&&this.scrollbar.scrollToElement(e)},e.prototype.setSorting=function(t){t?this.el.classList.add("sorting"):this.el.classList.remove("sorting")},e.prototype.componentWillReceiveProps=function(t){t.tourPlaying&&!this.props.tourPlaying&&this.setState({usedTour:!0})},e.prototype.render=function(){var t,e=this,n=this.props,o=n.hasSnapshots,a=n.scrollbarScrollingOnly,s=n.children,c=n.tourPlaying,l=n.totalSteps,u=this.state,p=u.hideScrollbar,h=u.scrollPosition,d=u.scrollable,b=u.usedTour,g=i(((t={scrollable:d})[h]=!0,t["tour-playing"]=c,t["progress-visible"]=l>0&&(c||b),t));return Object(r.h)("div",{id:"reel",class:g,ref:function(t){e.el=t}},Object(r.h)(f,{ref:function(t){return e.scrollbar=t},hideScrollbar:p,scrollbarScrollingOnly:a,waitToUpdate:!o,handleClick:this.handleHighlightClickable,onScrollableChanged:this.onScrollableChanged,onScrollPositionChange:this.onScrollPositionChange},s))},e}(r.Component);e.a=y},510:function(t,e,n){t.exports=n.p+"images/headset-gearvr.png"},511:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o,r=n(9),i=n(46),a=(n(473),n(564),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.position,o=e.text,a=e.readOnlyText,s={left:n.x+"px",top:n.y+"px",transform:this.props.rotation?"translate(-50%, -50%) rotate("+this.props.rotation+"deg) ":"translate(-50%, -50%)"},c=a?o+" "+a:o;return this.props.visible?Object(r.h)("div",{ref:function(e){t.label=e},id:this.props.sid,class:i("label"),style:s},Object(r.h)("span",null,c)):null},e}(r.Component)},513:function(t,e,n){"use strict";n.d(e,"b",function(){return p}),n.d(e,"a",function(){return r});var o,r,i=n(9),a=n(666),s=n.n(a),c=n(46),l=(n(570),n(569),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=0,p=function(t){function e(e){var n=t.call(this,e)||this;return n.setValue=function(t){n.setState({value:t})},n.getValue=function(){var t=n.slider.getValue();return"object"==typeof t?t.value:t},n.onSliderInput=function(){var t=n.getValue();n.setState({value:t}),n.props.onInput&&n.props.onInput(t)},n.onSliderChange=function(){var t=n.getValue();n.setState({value:t}),n.props.onChange&&n.props.onChange(t)},n.getLeftOffset=function(){return 100*(n.state.value-n.props.min)/(n.props.max-n.props.min)+"%"},n.getSliderId=function(){return"slider-with-tooltip-"+n.id},n.getStyleElement=function(){return"#"+n.getSliderId()+" .mdc-slider__thumb-container {\n        left: "+n.getLeftOffset()+"\n    }"},n.getDisplayValue=function(t){var e=n.props,o=e.formatNumbers,r=e.units;return(o?o(t):t)+(r||"")},n.setActive=function(t){return function(){return n.setState({active:t})}},n.hasChanged=function(){n.setState({hasChanged:!1})},n.onMouseDown=function(t){n.props.onInputStart&&n.props.onInputStart()},n.onMouseUp=function(t){n.props.onInputEnd&&n.props.onInputEnd()},n.id=u++,n.state={value:void 0!==e.initialValue?e.initialValue:(e.max+e.min)/2,active:!1,hasChanged:!1},n.setActiveSlider=n.setActive(!0),n.setInactiveSlider=n.setActive(!1),n}return l(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mouseleave",this.onMouseUp)},e.prototype.componentWillUnmount=function(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mouseleave",this.onMouseUp)},e.prototype.componentDidUpdate=function(t,e){e.value!==this.state.value&&(clearTimeout(this.hasChangedTimeout),this.setState({hasChanged:!0}),this.hasChangedTimeout=window.setTimeout(this.hasChanged,450))},e.prototype.render=function(){var t=this,e=this.props,n=e.width,o=e.displayBounds,a=e.min,l=e.max,u=e.discrete,p=e.toolTipPosition,h=this.state,d=h.active,f=h.hasChanged,b=h.value;return Object(i.h)("div",{id:this.getSliderId(),class:c("slider-with-tooltip",{displayBounds:o}),style:"width:"+n+"px",onMouseEnter:this.setActiveSlider,onMouseLeave:this.setInactiveSlider},p===r.UP&&Object(i.h)("div",{class:c("slider-tooltip",{active:d||f}),"data-balloon":this.getDisplayValue(b),"data-balloon-pos":r.UP,style:{left:this.getLeftOffset()}}),o&&Object(i.h)("div",{class:"min-amount"},this.getDisplayValue(a)),Object(i.h)(s.a,{ref:function(e){return t.slider=e},discrete:u,min:a,max:l,value:b,onInput:this.onSliderInput,onChange:this.onSliderChange,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp}),o&&Object(i.h)("div",{class:"max-amount"},this.getDisplayValue(l)),Object(i.h)("style",{dangerouslySetInnerHTML:{__html:this.getStyleElement()}}),p===r.DOWN&&Object(i.h)("div",{class:c("slider-tooltip",{active:d||f}),"data-balloon":this.getDisplayValue(b),"data-balloon-pos":r.DOWN,style:{left:this.getLeftOffset()}}))},e}(i.Component);!function(t){t.UP="up",t.DOWN="down"}(r||(r={}))},517:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(20),s=n(379),c=n(7),l=n(278),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){var n=t.call(this,e)||this;return n.removeHighlight=function(t){t.stopPropagation(),n.props.onRemoveHighlight&&n.props.onRemoveHighlight(n.props.snapshot.sid)},n.shouldShowZoomMarker=function(){var t=n.props,e=t.snapshot,o=t.editable,r=e.mode===a.b.OUTSIDE||e.mode===a.b.INSIDE;return o&&r&&!Object(c.e)(e.zoom,1,.01)},n.onActivated=function(t){return t.preventDefault(),n.props.onActivated(n.element)},n.onStartEditing=n.onStartEditing.bind(n),n.onCancelEditing=n.onCancelEditing.bind(n),n.onEdited=n.onEdited.bind(n),n}return u(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.snapshot,o=e.active,a=e.editable,s=e.getRef,c=e.index,u=this.getMarker(n.mode,n.is360),p=!!n.name||a;return Object(r.h)("div",{key:n.sid,class:"highlight-box "+(o?"active":""),onClick:this.onActivated,ref:function(e){t.element=e,s(c,t.element)}},Object(r.h)("img",{class:"highlight-image",src:n.thumbnailUrl}),Object(r.h)("div",{class:"image-bar"},Object(r.h)("span",{class:i("image-marker",u)}),this.shouldShowZoomMarker()&&Object(r.h)(l.a,{content:"Photos captured above or below 100% zoom will be presented at 100% zoom.",position:l.b.DOWN_LEFT,className:"highlight-zoomed"},Object(r.h)("svg",{viewBox:"0 0 12 12"},Object(r.h)("polygon",{fill:"#fbc606",points:"0 0, 12 0, 12 12"}))),a&&Object(r.h)(l.a,{className:"highlight-remove",content:"Remove from Highlights",position:l.b.DOWN_LEFT},Object(r.h)("span",{class:i("icon-close"),onClick:this.removeHighlight}))),Object(r.h)("div",{class:i("image-name",{shadowed:p})},this.getImageCaption()))},e.prototype.getImageCaption=function(){var t=this.props,n=t.snapshot;return t.editable?Object(r.h)(s.a,{key:n.sid,text:n.name,defaultText:"",hint:"Add caption",closeOnFocusOut:!0,maxLength:e.maxCharacterName,onStartEditing:this.onStartEditing,onCancelEditing:this.onCancelEditing,onEdited:this.onEdited}):n.name?Object(r.h)("span",{class:"static-text"},n.name):""},e.prototype.getMarker=function(t,e){return t!==a.b.OUTSIDE&&t!==a.b.INSIDE?null:e?"icon-360":"icon-panorama"},e.prototype.onStartEditing=function(){this.props.onToggleEditing&&this.props.onToggleEditing(!0)},e.prototype.onCancelEditing=function(){this.props.onToggleEditing&&this.props.onToggleEditing(!1)},e.prototype.onEdited=function(t){this.props.onRenameHighlight&&this.props.onRenameHighlight(this.props.snapshot.sid,t),this.props.onToggleEditing&&this.props.onToggleEditing(!1)},e.maxCharacterName=24,e}(r.Component);e.a=p},518:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o,r,i=n(9),a=n(70),s=n(46),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};!function(t){t[t.OPEN=0]="OPEN",t[t.UNLOADING=1]="UNLOADING",t[t.CLOSED=2]="CLOSED"}(r||(r={}));var u=function(t){function e(e){var n=t.call(this,e)||this;return n.onTransitionEnd=function(){n.state.phase===r.UNLOADING&&n.setState({phase:r.CLOSED})},n.state={phase:e.open?r.OPEN:r.CLOSED},n}return c(e,t),e.prototype.componentWillReceiveProps=function(t){!t.open&&this.props.open?this.setState({phase:r.UNLOADING}):t.open&&!this.props.open&&this.setState({phase:r.OPEN})},e.prototype.renderChildren=function(){return this.state.phase!==r.CLOSED?this.props.children:null},e.prototype.render=function(){var t=this.props,e=t.id,n=t.appendClass;return Object(i.h)("div",{id:e,class:s(n),onTransitionEnd:this.onTransitionEnd},this.renderChildren())},e=l([a.b],e)}(i.Component)},519:function(t,e,n){"use strict";var o,r=n(9),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.render=function(){return Object(r.h)("div",{class:"no-highlights-message"},Object(r.h)("p",null,"Your space does not have any highlights yet."),Object(r.h)("p",null,"A Highlight Reel lets your visitors get a taste of what the Space is like.",Object(r.h)("a",{target:"_blank",href:"https://support.matterport.com/hc/en-us/articles/360019401733"},"Learn More")))},e}(r.Component);e.a=a},520:function(t,e,n){},521:function(t,e,n){},543:function(t,e,n){"use strict";var o,r=n(9),i=n(70),a=n(41),s=n(46),c=n(92),l=n(150),u=n(278),p=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateEnabled=function(){e.setState({enabled:e.enabled})},e}return p(e,t),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.context.locale.t(this.tooltipPhraseKey)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.render=function(){return this.enabled?Object(r.h)(u.a,{content:this.tooltip,position:u.b.UP,className:s(this.modeName,"ui-icon"),onClick:this.props.handleClick.bind(this,this.viewmode,this.analyticsName,this.setPanoMode)},Object(r.h)("span",{class:"icon icon-"+this.modeName})):null},e}(r.Component),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewmode="mode.dollhouse",e.analyticsName="click_dollhouse_mode_button",e.tooltipPhraseKey=c.a.VIEW_DOLLHOUSE,e.modeName="dollhouse",e}return p(e,t),e.prototype.componentDidMount=function(){this.context.settings.onPropertyChanged("dh",this.updateEnabled),this.context.settings.onPropertyChanged(l.a.Dollhouse,this.updateEnabled)},e.prototype.componentWillUnmount=function(){this.context.settings.removeOnPropertyChanged("dh",this.updateEnabled),this.context.settings.removeOnPropertyChanged(l.a.Dollhouse,this.updateEnabled)},Object.defineProperty(e.prototype,"enabled",{get:function(){var t=this.context.settings,e=t.checkUrlParam("dh",0,1),n=!t.tryGetProperty(l.a.Dollhouse,!1),o=e||n;return(this.props.forceEnable||!o)&&this.viewmode!==this.props.viewmode},enumerable:!0,configurable:!0}),e}(h),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewmode="mode.floorplan",e.analyticsName="click_floorplan_mode_button",e.tooltipPhraseKey=c.a.VIEW_FLOORPLAN,e.modeName="floorplan",e}return p(e,t),e.prototype.componentDidMount=function(){this.context.settings.onPropertyChanged("fp",this.updateEnabled),this.context.settings.onPropertyChanged(l.a.FloorPlan,this.updateEnabled)},e.prototype.componentWillUnmount=function(){this.context.settings.removeOnPropertyChanged("fp",this.updateEnabled),this.context.settings.removeOnPropertyChanged(l.a.FloorPlan,this.updateEnabled)},Object.defineProperty(e.prototype,"enabled",{get:function(){var t=this.context.settings,e=t.checkUrlParam("fp",0,1),n=!t.tryGetProperty(l.a.FloorPlan,!1),o=e||n;return(this.props.forceEnable||!o)&&this.viewmode!==this.props.viewmode},enumerable:!0,configurable:!0}),e}(h),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewmode="mode.inside",e.setPanoMode=!0,e.analyticsName="click_inside_mode_button",e.tooltipPhraseKey=c.a.VIEW_INSIDE,e.modeName="panorama",e}return p(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){if(!this.props.allowMeshMode)return this.props.viewmode!==this.viewmode;var t=this.props.viewmode===this.viewmode&&this.props.panoMode!==this.setPanoMode,e=this.props.viewmode!==this.viewmode&&this.props.panoMode===this.setPanoMode;return t||e},enumerable:!0,configurable:!0}),e}(h),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewmode="mode.inside",e.setPanoMode=!1,e.analyticsName="click_mesh_mode_button",e.tooltipPhraseKey=c.a.VIEW_INSIDE_MESH,e.modeName="mesh",e}return p(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){if(!this.props.allowMeshMode)return!1;var t=this.props.viewmode===this.viewmode&&this.props.panoMode!==this.setPanoMode,e=this.props.viewmode!==this.viewmode&&this.props.panoMode===this.setPanoMode;return t||e},enumerable:!0,configurable:!0}),e}(h),y=n(409),v=n(369),m=n(3),O=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},_=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},E=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},S=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},C=new m.a("mode-controls"),P=function(t){function e(e){var n=t.call(this,e)||this;return n.bindings=[],n.onMeshDataUpdate=function(t){n.setState({panoMode:0===t.opacity.value})},n.changeMode=function(t,e,o){return _(n,void 0,void 0,function(){var n,r;return E(this,function(i){switch(i.label){case 0:if(n=this.props.sdk,void 0!==o&&this.context.commandBinder.issueCommand(new y.a(o?0:1)),t===this.props.viewmode)return[2];i.label=1;case 1:return i.trys.push([1,5,,6]),[4,this.context.commandBinder.issueCommand(new a.d)];case 2:return i.sent(),this.props.viewmode===n.Mode.Mode.TRANSITIONING||t===n.Mode.Mode.TRANSITIONING?[3,4]:(this.context.analytics.track("showcase_gui",{gui_action:e}),[4,n.Mode.moveTo(t)]);case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:return r=i.sent(),C.debug(r),[3,6];case 6:return[2]}})})},n.state={panoMode:!0},n}return O(e,t),e.prototype.componentDidMount=function(){return _(this,void 0,void 0,function(){var t=this;return E(this,function(e){return this.context.market.waitForData(v.a).then(function(e){t.bindings.push(t.context.market.onDataUpdate(v.a,t.onMeshDataUpdate,!0))}),[2]})})},e.prototype.componentWillUnmount=function(){var t,e;try{for(var n=S(this.bindings),o=n.next();!o.done;o=n.next()){o.value.cancel()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.bindings=[]},e.prototype.render=function(){var t=this.props.viewmode;return Object(r.h)("div",{id:"mode-change",class:"left-row"},Object(r.h)(g,{viewmode:t,panoMode:this.state.panoMode,handleClick:this.changeMode,allowMeshMode:this.props.allModes}),Object(r.h)(b,{viewmode:t,panoMode:this.state.panoMode,handleClick:this.changeMode,allowMeshMode:this.props.allModes}),Object(r.h)(d,{viewmode:t,handleClick:this.changeMode,forceEnable:this.props.allModes}),Object(r.h)(f,{viewmode:t,handleClick:this.changeMode,forceEnable:this.props.allModes}))},e=w([i.b],e)}(r.Component);e.a=P},544:function(t,e,n){"use strict";var o,r=n(9),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.render=function(){var t=0,e=this.props,n=e.dataWithScreenPosition,o=e.currentFloor,i=e.topMostFloor,a=e.component,s=e.customClass,c=[];return Object.keys(n).forEach(function(e){var l=n[e],u=l.floor,p=l.screenPosition,h=l.text,d=l.visible,f=l.sid,b=l.rotation,g={key:t++,position:p,rotation:b,text:h,visible:(-1===o&&i===u||o===u)&&d,sid:f,customClass:s};c.push(Object(r.h)(a,g))}),Object(r.h)("div",{class:"labels-wrapper"},c)},e}(r.Component),s=n(70),c=n(3),l=n(312),u=n(430),p=n(324);n.d(e,"a",function(){return v});var h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},b=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},y=new c.a("label-ui"),v=function(t){function e(e){var n=t.call(this,e)||this;return n.shouldLabelsDrawForMode=function(t){return n.props.modes.indexOf(t)>=0},n.onCameraUpdate=function(){n.shouldLabelsDrawForMode(n.props.viewmode)&&n.updateDataPosition()},n.onViewTransitionStart=function(){n.setState({inModeTransition:!0})},n.onViewTransitionEnd=function(t,e){return f(n,void 0,void 0,function(){return b(this,function(t){return this.shouldLabelsDrawForMode(e)&&(this.setState({inModeTransition:!1}),this.updateDataPosition()),[2]})})},n.updateFloorState=function(){n.setState({currentFloor:n.viewData.currentFloor,topMostFloor:n.viewData.totalFloors-1})},n.updateDataPosition=function(){return f(n,void 0,void 0,function(){var t,e,n,o,r,i,a,s,c,l;return b(this,function(p){switch(p.label){case 0:return n={},this.props.calculatePosition?[4,this.props.calculatePosition(this.context.commandBinder,this.context.market)]:[3,2];case 1:return n=p.sent(),this.setState({dataWithScreenPosition:n}),[3,12];case 2:return[4,this.context.market.tryGetData(this.props.dataType)];case 3:if(!(o=p.sent()))return[3,12];r=o.getCollection(),p.label=4;case 4:p.trys.push([4,9,10,11]),i=g(r),a=i.next(),p.label=5;case 5:return a.done?[3,8]:(s=a.value,n[s.sid]=Object.assign({},s),[4,this.context.commandBinder.issueCommand(new u.a({worldPosition:s.position}))]);case 6:c=p.sent(),n[s.sid].screenPosition=c,p.label=7;case 7:return a=i.next(),[3,5];case 8:return[3,11];case 9:return l=p.sent(),t={error:l},[3,11];case 10:try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}return[7];case 11:this.setState({dataWithScreenPosition:n}),p.label=12;case 12:return[2]}})})},n.clearVisibleFloor=function(){n.setState({currentFloor:void 0})},n.updateVisibleFloor=function(t){n.setState({currentFloor:t})},n.setState({dataWithScreenPosition:{},currentFloor:-1,topMostFloor:0,inModeTransition:!1}),n}return h(e,t),e.prototype.componentWillReceiveProps=function(t){!this.props.onUpdate&&t.onUpdate&&t.onUpdate(this.updateDataPosition)},e.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){var t,e,n;return b(this,function(o){switch(o.label){case 0:t=this.props.sdk,this.props.onUpdate&&this.props.onUpdate(this.updateDataPosition),o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,this.context.market.waitForData(p.a)];case 2:return e.viewData=o.sent(),this.changeSubscription||(this.changeSubscription=this.viewData.onViewDataChanged(this.updateFloorState)),this.changeSubscription.renew(),this.updateFloorState(),this.updateDataPosition(),[3,4];case 3:return n=o.sent(),y.debug(n),[3,4];case 4:return this.context.market.onDataUpdate(l.a,this.onCameraUpdate),t.on(t.Floor.Event.CHANGE_START,this.clearVisibleFloor),t.on(t.Floor.Event.CHANGE_END,this.updateVisibleFloor),t.on(t.Mode.Event.CHANGE_START,this.onViewTransitionStart),t.on(t.Mode.Event.CHANGE_END,this.onViewTransitionEnd),[2]}})})},e.prototype.componentWillUnmount=function(){var t=this.props.sdk;this.context.market.removeOnDataUpdate(l.a,this.onCameraUpdate),t.off(t.Floor.Event.CHANGE_START,this.clearVisibleFloor),t.off(t.Floor.Event.CHANGE_END,this.updateVisibleFloor),t.off(t.Mode.Event.CHANGE_START,this.onViewTransitionStart),t.off(t.Mode.Event.CHANGE_END,this.onViewTransitionEnd),this.changeSubscription&&this.changeSubscription.cancel()},e.prototype.render=function(){var t=this.state,e=t.currentFloor,n=t.topMostFloor,o=t.dataWithScreenPosition,i=t.inModeTransition,s=this.props.viewmode;return!this.shouldLabelsDrawForMode(s)||i?null:Object(r.h)(a,{component:this.props.component,dataWithScreenPosition:o,currentFloor:e,topMostFloor:n,customClass:this.props.customClass})},e=d([s.a],e)}(r.Component)},545:function(t,e,n){"use strict";var o,r,i=n(9),a=(n(520),n(70)),s=n(493),c=n(519),l=n(518),u=n(8),p=n(25),h=n(5),d=n(41),f=n(14),b=n(517),g=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(t){function e(e){var n=t.call(this,e)||this;return n.highlights=[],n.highlightList=function(t){var e=n.props,o=e.currentStep,r=e.onHighlightActivated;return Object(i.h)("div",{id:"frame-container"},Object(i.h)("div",null,t.items.map(function(t,e){return Object(i.h)(b.a,{editable:!1,snapshot:t,index:e,active:e===o,onActivated:r.bind(n,e),getRef:n.addHighlightRef})})))},n.addHighlightRef=function(t,e){n.highlights[t]=e,t===n.props.currentStep&&n.props.setActiveElement&&n.props.setActiveElement(e)},n}return g(e,t),e.prototype.render=function(){var t=this.props.snapshots;return t&&t.length?Object(i.h)(this.highlightList,{items:t}):null},e}(i.Component),v=n(3),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},w=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},_=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},E=new v.a("highlight-reel"),S=1e3;!function(t){t[t.flash=0]="flash",t[t.expanded=1]="expanded",t[t.collapsed=2]="collapsed"}(r||(r={}));var C=function(t){function e(e){var n=t.call(this,e)||this;return n.quickstart=!1,n.onPhaseChange=function(t){t.phase===h.a.STARTING&&n.showReel(),t.phase===h.a.PLAYING&&n.dismissReel()},n.showReel=function(){return w(n,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return this.props.onToggleHLR&&this.props.snapshots&&this.props.snapshots.length>0?[4,Object(f.d)(S)]:[3,2];case 1:switch(t.sent(),this.hlStartupStyle){case r.expanded:case r.flash:this.props.onToggleHLR(!0)}t.label=2;case 2:return[2]}})})},n.setActiveElement=function(t){n.setState({activeElement:t})},n.setHighlightClickable=function(t){return n.highlightClickable=t}.bind(n),n.onHighlightActivated=function(t){return w(n,void 0,Promise,function(){var e;return _(this,function(n){switch(n.label){case 0:if(!this.highlightClickable)return[2];n.label=1;case 1:return n.trys.push([1,6,,7]),this.props.tourPlaying?[4,this.context.commandBinder.issueCommand(new d.d)]:[3,3];case 2:n.sent(),n.label=3;case 3:return this.props.transition.active?[3,5]:(this.context.analytics.track("showcase_gui",{gui_action:"click_highlight"}),[4,this.context.commandBinder.issueCommand(new d.c(t))]);case 4:n.sent(),this.setHighlightClickable(!1),n.label=5;case 5:return[3,7];case 6:return e=n.sent(),E.debug(e),[3,7];case 7:return[2]}})})},n.state={activeElement:null},n}return m(e,t),e.prototype.componentDidMount=function(){var t=this;if(!this.props.editMode){var e=!!this.props.snapshots&&this.props.snapshots.some(function(t){return t.is360});this.hlStartupStyle=Object(u.q)("hl",e?1:0),this.hlStartupStyle===r.collapsed&&e&&(this.hlStartupStyle=r.expanded),this.quickstart=this.context.settings.tryGetProperty("quickstart",!1),this.quickstart?Object(f.d)(3e3).then(function(){t.showReel(),Object(f.d)(3e3).then(function(){t.dismissReel()})}):this.context.messageBus.subscribe(p.a,this.onPhaseChange)}},e.prototype.componentWillUnmount=function(){return w(this,void 0,void 0,function(){return _(this,function(t){return this.props.editMode||this.quickstart||this.context.messageBus.unsubscribe(p.a,this.onPhaseChange),[2]})})},e.prototype.render=function(){var t=this.props,e=t.reelOpen,n=t.activeStep,o=t.snapshots,r=t.totalSteps,a=t.tourPlaying,u=r>0?Object(i.h)(y,{snapshots:o,currentStep:n,onHighlightActivated:this.onHighlightActivated,setActiveElement:this.setActiveElement}):Object(i.h)(c.a,null);return Object(i.h)(l.a,{id:"reel-container",open:e},Object(i.h)(s.a,{totalSteps:r,tourPlaying:a,hasSnapshots:r>0,activeElement:this.state.activeElement,highlightClickable:this.setHighlightClickable,scrollbarScrollingOnly:!1},u))},e.prototype.dismissReel=function(){this.props.onToggleHLR&&this.hlStartupStyle===r.flash&&this.props.onToggleHLR(!1)},e=O([a.b],e)}(i.Component);e.a=C},546:function(t,e,n){"use strict";var o,r=n(9),i=n(70),a=n(92),s=n(278),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.render=function(){var t="ontouchstart"in window;return Object(r.h)("div",{id:"highlight-button",style:"margin-right: -5px",class:"ui-icon left-row"},Object(r.h)(s.a,{content:this.props.reelOpen?this.context.locale.t(a.a.CLOSE_HIGHLIGHTS):this.context.locale.t(a.a.OPEN_HIGHLIGHTS),position:s.b.UP_RIGHT,onClick:this.props.onClick,tooltipTimeout:t?1e3:void 0},Object(r.h)("span",{class:"icon "+(this.props.reelOpen?"icon-dpad-down":"icon-dpad-up")})))},e}(r.Component),u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},h=function(t){function e(e){var n=t.call(this,e)||this;return n.handleButtonClick=function(){var t=n.props.reelOpen?"hide_":"show_";n.context.analytics.track("showcase_gui",{gui_action:t+"highlight_reel"}),n.props.onToggleHLR(!n.props.reelOpen)},n}return u(e,t),e.prototype.render=function(){var t=this.props,e=t.reelEnabled,n=t.reelOpen;return e?Object(r.h)(l,{reelOpen:n,onClick:this.handleButtonClick}):null},e=p([i.b],e)}(r.Component);e.a=h},547:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=(n(584),n(363)),s=n(8),c=n(338),l=n(92),u=n(278),p=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e){var n=t.call(this,e)||this;return n.floors=[],n.scrollbars=null,n.canClick=!1,n.newFloorIndex=null,n.state={showMenu:!1},n.toggleShowMenu=n.toggleShowMenu.bind(n),n.updateScrollCenter=n.updateScrollCenter.bind(n),n.onFloorClick=n.onFloorClick.bind(n),n.onScrollbarClick=n.onScrollbarClick.bind(n),n}return p(e,t),e.prototype.componentWillReceiveProps=function(t){this.props.currentFloor!==t.currentFloor&&(this.newFloorIndex=t.currentFloor)},e.prototype.componentDidUpdate=function(){null!==this.newFloorIndex&&this.updateScrollCenter(this.newFloorIndex)},e.prototype.updateScrollCenter=function(t){this.floors.length<=5||this.scrollbars&&(this.newFloorIndex=null,this.scrollbars.setScrollCenter(this.floors[t]))},e.prototype.onScrollbarClick=function(){this.canClick=!0},e.prototype.toggleShowMenu=function(){this.setState(function(t){return{showMenu:!t.showMenu}})},e.prototype.onFloorClick=function(t){this.scrollbars&&!this.canClick||(this.toggleShowMenu(),this.props.handleClickFloor(t))},e.prototype.getFloorMenu=function(){var t=this,e=this.props.floorNames.map(function(e,n){return Object(r.h)("div",{class:i("floor-button",{current:t.props.currentFloor===n}),key:String(n),ref:function(e){t.floors[n]=e},onClick:t.onFloorClick,"data-value":n},void 0!==e?e:t.context.locale.t(l.a.FLOOR_NAME)+(n+1))}).reverse(),n=e.length>5,o=i({fadeIn:this.state.showMenu,scrollable:n});return n?Object(r.h)("div",{id:"floor-menu-wrapper",class:o},Object(r.h)(a.a,{name:"floor-menu-wrapper",forceHidden:Object(s.k)(),ref:function(e){t.scrollbars=e},singleScrollDirection:c.b.vertical,onScrollbarVisibilityChange:this.updateScrollCenter.bind(this,this.props.currentFloor),handleClick:this.onScrollbarClick},e)):(this.scrollbars=null,Object(r.h)("div",{id:"floor-menu-wrapper",class:o},e))},e.prototype.render=function(){if(this.props.isDisplaying){var t=String(this.props.currentFloor+1).length>1,e=this.props.isAllFloors(this.props.currentFloor),n=e?"icon-floor-controls-all":"icon-floor-controls";return Object(r.h)("div",{id:"floor-controls"},this.getFloorMenu(),Object(r.h)("div",{onClick:this.toggleShowMenu},Object(r.h)(u.a,{content:this.context.locale.t(l.a.HELP_MORE_FLOORS_A),position:u.b.UP,className:i("select-floor","ui-icon",{hideTooltip:this.state.showMenu,isAllFloors:e})},Object(r.h)("div",{class:i("floor-number",{twoDigit:t})},Object(r.h)("span",null,!e&&this.props.currentFloor+1)),Object(r.h)("span",{class:i("icon",n)}))))}return Object(r.h)("div",{id:"floor-controls"})},e}(r.Component),d=n(324),f=n(3),b=n(41),g=n(4),y=n(145),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},O=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},w=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},_=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(w(arguments[e]));return t},E=new f.a("floor-controls"),S=function(t){function e(e){var n=t.call(this,e)||this;return n.originalFloors=[],n.setFloorNamesForMode=function(){var t=n.viewmodeData.currentMode!==g.a.Panorama?_(n.originalFloors,[n.context.locale.t(l.a.FLOOR_ALL)]):n.originalFloors.slice(0,n.originalFloors.length);if(n.viewmodeData.currentMode!==n.state.currentMode)n.setState({floorNames:t,currentMode:n.viewmodeData.currentMode});else{var e=n.getFloorIndex(t.length);n.setState({floorNames:t,currentFloor:e})}},n.updateData=function(){n.state.floorNames===n.viewData.getFloorNames()&&n.state.currentFloor===n.viewData.currentFloor||(n.originalFloors=n.viewData.getFloorNames(),n.setFloorNamesForMode())},n.getFloorIndex=function(t){return n.viewData.currentFloor<0&&n.props.viewmode!==n.props.sdk.Mode.Mode.INSIDE?t-1:n.viewData.currentFloor},n.modeChanged=function(){n.setFloorNamesForMode()},n.handleClickFloor=n.handleClickFloor.bind(n),n.isAllFloors=n.isAllFloors.bind(n),n.state={isDisplaying:e.viewmode!==e.sdk.Mode.Mode.OUTSIDE,currentFloor:-2,floorNames:[],currentMode:null},n}return v(e,t),e.prototype.componentWillReceiveProps=function(t){t.viewmode!==this.props.viewmode&&this.setState({isDisplaying:t.viewmode!==this.props.sdk.Mode.Mode.OUTSIDE})},e.prototype.handleClickFloor=function(t){return m(this,void 0,void 0,function(){var e,n,o,r;return O(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),e=t.target,n=e.getAttribute("data-value"),o="string"==typeof n?parseFloat(n):-1,[4,this.context.commandBinder.issueCommand(new b.d)];case 1:return i.sent(),this.isAllFloors(o)?(this.context.analytics.track("showcase_gui",{gui_action:"click_toggle_all_floors_button"}),[4,this.props.sdk.Floor.showAll()]):[3,3];case 2:return i.sent(),[3,5];case 3:return o===this.state.currentFloor?[3,5]:(this.context.analytics.track("showcase_gui",{gui_action:"click_floor_select_button"}),[4,this.props.sdk.Floor.moveTo(o)]);case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return r=i.sent(),E.debug(r),[3,7];case 7:return[2]}})})},e.prototype.isAllFloors=function(t){return!this.originalFloors[t]},e.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var t,e,n;return O(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t=this,[4,this.props.market.waitForData(y.a)];case 1:return t.viewmodeData=o.sent(),e=this,[4,this.props.market.waitForData(d.a)];case 2:return e.viewData=o.sent(),this.changeSubscription=this.viewData.onViewDataChanged(this.updateData,!0),this.modeChangeSub=this.viewmodeData.makeModeChangeSubscription(this.modeChanged),this.updateData(),this.modeChanged(),[3,4];case 3:return n=o.sent(),E.debug(n),[3,4];case 4:return[2]}})})},e.prototype.componentWillUnmount=function(){this.changeSubscription&&this.changeSubscription.cancel(),this.modeChangeSub&&this.modeChangeSub.cancel()},e.prototype.render=function(){return Object(r.h)(h,{isDisplaying:this.originalFloors.length>1&&this.state.isDisplaying,floorNames:this.state.floorNames,currentFloor:this.state.currentFloor,handleClickFloor:this.handleClickFloor,isAllFloors:this.isAllFloors})},e}(r.Component);e.a=S},548:function(t,e,n){"use strict";var o,r=n(9),i=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.render=function(){var t={position:this.props.screenPosition,rotation:this.props.rotation,text:this.props.text,visible:this.props.visible,sid:this.props.sid,readOnlyText:this.props.readOnlyText};return Object(r.h)(this.props.component,t)},e}(r.Component),s=n(364),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},u=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},p=function(t){function e(e){var n=t.call(this)||this;return n.updateData=function(){n.setState({viewData:n.viewData})},n.onViewTransitionStart=function(){n.setState({inModeTransition:!0})},n.onViewTransitionEnd=function(t,e){return l(n,void 0,void 0,function(){return u(this,function(t){return this.props.modes.indexOf(e)>=0&&this.setState({inModeTransition:!1}),[2]})})},n.setState({inModeTransition:!1}),n}return c(e,t),e.prototype.componentDidMount=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(n){switch(n.label){case 0:return t=this,[4,this.context.market.waitForData(s.a)];case 1:return t.viewData=n.sent(),this.changeSubscription||(this.changeSubscription=this.viewData.onViewDataChanged(this.updateData)),this.selectedSubscription||(this.selectedSubscription=this.viewData.selected.onChanged(this.updateData)),this.changeSubscription.renew(),this.selectedSubscription.renew(),this.updateData(),(e=this.props.sdk).on(e.Mode.Event.CHANGE_START,this.onViewTransitionStart),e.on(e.Mode.Event.CHANGE_END,this.onViewTransitionEnd),[2]}})})},e.prototype.componentWillUnmount=function(){var t=this.props.sdk;t.off(t.Mode.Event.CHANGE_START,this.onViewTransitionStart),t.off(t.Mode.Event.CHANGE_END,this.onViewTransitionEnd),this.changeSubscription&&this.changeSubscription.cancel(),this.selectedSubscription&&this.selectedSubscription.cancel()},e.prototype.render=function(){var t=this.state,e=t.viewData,n=t.inModeTransition,o=this.props,i=o.viewmode,a=o.modes;return!e||a.indexOf(i)<0||n?null:Object(r.h)("div",{class:"measurements-labels-wrapper"},this.buildLabels(e))},e.prototype.buildLabels=function(t){var e=this,n=[];return t.iterate(function(o){var i=t.getViewData(o.sid);i&&n.push(Object(r.h)("div",{class:"measurement-presentation-wrapper"},Object(r.h)(a,{text:o.text,readOnlyText:i.displayLength,sid:o.sid,screenPosition:i.screenPosition,rotation:i.rotation,visible:o.visible&&i.labelVisible,component:e.props.component})))}),n},e}(r.Component);n.d(e,"a",function(){return f});var h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},f=function(t){function e(e){return t.call(this)||this}return h(e,t),e.prototype.getChildContext=function(){return d({manager:this.props.manager},this.context)},e.prototype.render=function(){return Object(r.h)(p,d({},this.props))},e}(r.Component)},549:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(10),s=n(117),c=n(7),l=n(3),u=n(399),p=n(353),h=n(373),d=n(487),f=n(381),b=n(516),g=n(1),y=n(515),v=n(312),m=n(514),O=n(454),w=n(147),_=n(356),E=n(70),S=n(96),C=n(40),P=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},k=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},j=new l.a("embedly"),T=function(){return function(t){this.msg=t}}(),L=function(){return function(t){this.msg=t}}(),A=function(){return function(t){this.msg=t}}(),x=function(){function t(){this.embedEndpoint="https://api.embed.ly/1/oembed",this.imageEndpoint="https://i.embed.ly/1/display/resize",this.configEndpoint="/api/v1/config/showcase",t.queue||(t.queue=new S.RequestQueue({retries:0}))}return t.clearCache=function(){t.embedCache={},t.imageCache={}},t.prototype.getType=function(t){return P(this,void 0,Promise,function(){var e,n,o;return k(this,function(r){switch(r.label){case 0:return[4,this.fetchFromCache(t)];case 1:if(e=r.sent())return[2,e.type];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.getEmbedDetails(t)];case 3:return(n=r.sent()).type===C.a.rich||n.type===C.a.video?[2,n.type]:[3,5];case 4:return 401===(o=r.sent()).status_code||404===o.status_code||501===o.status_code||o instanceof T?[3,5]:[2,C.a.error];case 5:return r.trys.push([5,7,,8]),[4,this.getImageDetails(t)];case 6:return r.sent(),[2,C.a.photo];case 7:return r.sent(),[3,8];case 8:return[2,C.a.error]}})})},t.prototype.fetchFromCache=function(e){return P(this,void 0,Promise,function(){var n,o,r,i;return k(this,function(a){switch(a.label){case 0:return[4,this.getDisplayUrl(e)];case 1:return n=a.sent(),(o=t.imageCache[n])?[2,o]:[4,this.getOEmbedUrl(e)];case 2:return r=a.sent(),(i=t.embedCache[r])?[2,i]:[2,null]}})})},t.prototype.getMediaDetails=function(t,e){return P(this,void 0,void 0,function(){return k(this,function(n){switch(t){case C.a.photo:return[2,this.getImageDetails(e)];case C.a.rich:case C.a.video:return[2,this.getEmbedDetails(e)]}throw Error("unsupported media type")})})},t.prototype.getOEmbedUrl=function(e){return P(this,void 0,Promise,function(){var n,o;return k(this,function(r){switch(r.label){case 0:return[4,this.getKey()];case 1:return r.sent(),n=Math.max(window.screen.height,window.screen.width),o="&maxwidth="+n+"&maxheight="+n,[2,this.embedEndpoint+"?key="+t.key+"&url="+encodeURIComponent(e)+o]}})})},t.prototype.getEmbedDetails=function(e){return P(this,void 0,void 0,function(){var n;return k(this,function(o){switch(o.label){case 0:return[4,this.getOEmbedUrl(e)];case 1:return n=o.sent(),t.embedCache[n]?[2,Promise.resolve(t.embedCache[n])]:[2,this.loadEmbed(n)]}})})},t.prototype.getDisplayUrl=function(e){return P(this,void 0,Promise,function(){var n,o;return k(this,function(r){switch(r.label){case 0:return[4,this.getKey()];case 1:return r.sent(),n=Math.max(window.screen.height,window.screen.width),o="&url="+encodeURIComponent(e)+"&width="+n+"&height="+n,[2,this.imageEndpoint+"?key="+t.key+o]}})})},t.prototype.getImageDetails=function(e){return P(this,void 0,Promise,function(){var n;return k(this,function(o){switch(o.label){case 0:return[4,this.getDisplayUrl(e)];case 1:return n=o.sent(),t.imageCache[n]?[2,Promise.resolve(t.imageCache[n])]:[2,this.loadImage(n)]}})})},t.prototype.getKey=function(){return P(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return t.key?[3,2]:[4,t.queue.get(window.location.origin+this.configEndpoint).then(function(e){var n=JSON.parse(e);t.key=n.embedly_key})];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.loadEmbed=function(e){var n=this;return t.queue.get(e,{responseType:"json"}).then(function(t){return n.validateAndCacheEmbed(e,t)})},t.prototype.loadImage=function(e){var n=this;return new Promise(function(o,r){return t.queue.get(e,{responseType:"arraybuffer"}).then(function(t){return n.validateAndCacheImage(e,t)}).then(o).catch(r)})},t.prototype.validateAndCacheEmbed=function(e,n){var o=n.html&&n.html.match(/<script/i);if(n.type===C.a.photo&&(!n.html||o))throw new T('image can\'t be used as a "rich" type');if(!n||n.type===C.a.rich&&(!n.html||o))throw new L("missing html or html contains Javascript");switch(n.type){case C.a.photo:n.html&&(n.type=C.a.rich);break;case C.a.rich:case C.a.video:break;case C.a.link:var r="not supporting link types because of existing link functionality";throw j.debug(r),new A(r);default:r="Did the OEmbed format extend?! Unknown type: "+n.type;throw j.debug(r),new A(r)}var i={width:n.width,height:n.height,embedlyResponse:{html:n.html,src:n.url},type:n.type};return t.embedCache[e]=i,i},t.prototype.validateAndCacheImage=function(e,n){return new Promise(function(o,r){n||r("Embedly: got an empty response when requesting image");var i=new Uint8Array(n),a=new Blob([i]),s=new Image;s.addEventListener("load",function(n){return r=n.target,i={width:r.naturalWidth,height:r.naturalHeight,embedlyResponse:{url:c,src:e},type:C.a.photo},t.imageCache[e]=i,void o(i);var r,i});var c=URL.createObjectURL(a);s.src=c})},t.embedCache={},t.imageCache={},t}(),D=10,M=22,I=30,R=n(333),N=n(667),H=n(8);n(431);!function(t){t[t.NOT_READY=1]="NOT_READY",t[t.CUED=2]="CUED",t[t.PLAYING=3]="PLAYING",t[t.PAUSED=4]="PAUSED"}(o||(o={}));var V,F,B=n(386),U=(V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),G=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},W=new l.a("mattertag-media"),z=function(t){function e(e){var n=t.call(this,e)||this;return n.playerControls=null,n.handleClick=function(){n.props.mediaType===C.a.photo&&n.props.onClickImage&&n.props.onClickImage()},n.onPlayerLoaded=function(t){n.playerControls=t,t.play()},n.setupPlayerControls=function(t){var e=o.NOT_READY;try{t.on("ready",function(){e=o.CUED,n.onPlayerLoaded(i)}),t.on("play",function(){e=o.PLAYING}),t.on("pause",function(){e=o.PAUSED}),t.on("ended",function(){})}catch(t){W.debug(t)}var r=Object(H.k)(),i={play:function(){if(t&&e!==o.NOT_READY&&!r)try{t.play()}catch(t){W.debug(t)}},pause:function(){if(t&&e!==o.NOT_READY)try{t.pause()}catch(t){W.debug(t)}}}},n.mediaStyles=function(){var t=n.props,e=t.width,o=t.height,r={backgroundImage:'url("'+n.props.mediaPayload.url+'")',width:e+"px",height:o+"px"};if(n.props.mediaPayload)switch(n.props.mediaType){case C.a.photo:return r;case C.a.rich:return{width:e+"px",height:o+"px"};case C.a.video:return{width:e+"px",height:Math.min(Math.max(o/e,B.b),1)*e+"px"}}return{}},n}return U(e,t),e.prototype.componentWillReceiveProps=function(t){t.mediaPayload!==this.props.mediaPayload&&this.iframe&&this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null),this.playerControls&&this.props.closing!==t.closing&&(t.closing?this.playerControls.pause():this.playerControls.play())},e.prototype.createEmbed=function(t){var e=this,n=document.createElement("div");if(n.innerHTML=this.props.mediaPayload.html,this.iframe=n.firstChild,this.props.mediaType===C.a.video){var o=new N.Player(this.iframe);this.iframe.addEventListener("load",function(){return e.setupPlayerControls(o)})}t.appendChild(this.iframe)},e.prototype.render=function(){var t=this,e=this.props,n=e.mediaPayload,o=e.mediaType,a=e.landscape;if(!n)return null;var s=i({tagImage:o===C.a.photo,tagEmbed:o===C.a.rich,tagVideo:o===C.a.video,landscape:a}),c=n&&n.html?Object(r.h)("div",{class:"tagEmbedContent",ref:function(e){e&&!t.iframe&&t.createEmbed(e)}}):null;return Object(r.h)("div",{className:i("tagMediaContent"),onClick:this.handleClick},Object(r.h)("div",{className:s,style:this.mediaStyles()},c))},e=G([E.b],e)}(r.Component),K=n(379),Y=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t.htmlToString=function(i){var a,s,c="",l=[].slice.call(i.childNodes);try{for(var u=Y(l),p=u.next();!p.done;p=u.next()){var h=p.value;switch(h.nodeName){case"#text":c+=e(h);break;case"A":c+=n(h);break;case"DIV":c+=o(h);break;case"BR":c+=r(h);break;default:c+=t.htmlToString(h)}}}catch(t){a={error:t}}finally{try{p&&!p.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}return c},t.renderChunks=function(t,e){var n,o;try{for(var r=Y(e),i=r.next();!i.done;i=r.next()){var a=i.value;switch(a.type){case C.a.text:var s=document.createTextNode(""+a.text);t.appendChild(s);break;case C.a.link:if(a.link){var c=document.createElement("a");c.className="tagLink",c.contentEditable="true",c.href=""+a.link.url,c.textContent=""+a.link.label,t.appendChild(c)}}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}};var e=function(t){var e=(t.textContent||"").replace(/\]\(/g,"]&zwnj;("),n=new RegExp(/https?:\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?/gi);return(e=e.replace(n,function(t){return"["+t+"]("+t+")"})).replace(/\<\s*br\s*\/?>/gi,"\n")},n=function(t){return"["+t.innerText+"]("+t.href+")"},o=function(e){var n="\n";return e.childNodes.length>0&&(n+=t.htmlToString(e)),n},r=function(t){return"\n"}}(F||(F={}));var q,X=n(278),Z=n(359),Q=new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),J=function(t){return function(t){return Q.test(t)}(t)&&/^https?:\/\//.test(t)},$=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tt=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},et=function(t){function e(e){var n=t.call(this,e)||this;n.getInputDiv=function(){return n.inputDiv},n.hasTextSelected=function(){return n.range&&n.range.startOffset!==n.range.endOffset},n.onSelectionChange=function(){var t=n.getCurrentSelection();t&&(n.range=t.cloneRange())},n.addFauxHighlight=function(){n.execCommand("backColor","#00dceb7f")},n.removeFauxHighlight=function(){n.execCommand("backColor","transparent")},n.prepareLinkSelection=function(){var t=n.getAnchorFromSelection();if(n.inputDiv.focus(),t||n.range)n.addFauxHighlight();else{var e=window.getSelection();e.selectAllChildren(n.inputDiv),e.collapseToEnd(),n.range=e.getRangeAt(0)}return t},n.onMouseDown=function(t){t.stopPropagation(),n.removeFauxHighlight(),n.range=null},n.onKeyPress=function(t){var e=t.which||t.keyCode;if(t.stopPropagation(),e===R.a.ESCAPE)return n.props.onNavigationKey(t);if(e===R.a.RETURN||e===R.a.TAB)return t.shiftKey||(t.preventDefault(),n.finalizeInput()),n.props.onNavigationKey(t);if("keydown"!==t.type){var o=n.inputDiv.innerText;n.props.maxLength&&o&&o.length>n.props.maxLength&&t.preventDefault()}},n.onInput=function(){n.props.onInput(n.inputDiv.innerText)},n.onPaste=function(t){var e=(t.clipboardData||window.clipboardData).getData("text/plain"),o=e.length,r=n.inputDiv.innerText;if(n.props.maxLength&&r&&r.length+o>n.props.maxLength){var i=n.props.maxLength-n.inputDiv.innerText.length+window.getSelection().toString().length;o=Math.min(i,o)}document.execCommand("insertText",!1,e.slice(0,o)),t.preventDefault()},n.onFocus=function(t){n.props.onFocus&&n.props.onFocus()},n.onBlur=function(){n.props.onBlur&&n.props.onBlur(),n.finalizeInput()};var o=new Z.a(function(){return null},function(t){return document.addEventListener("selectionchange",t)},function(t){return document.removeEventListener("selectionchange",t)});return n.selectionSubscription=o.createSubscription(n.onSelectionChange),n}return $(e,t),e.prototype.componentDidMount=function(){F.renderChunks(this.getInputDiv(),this.props.initialContent),this.attachLinks(),this.selectionSubscription.renew()},e.prototype.attachLinks=function(){var t,n;if(this.props.onLinkClick){var o=[].slice.call(this.inputDiv.querySelectorAll("a"));try{for(var r=tt(o),i=r.next();!i.done;i=r.next()){var a=i.value;e.addLinkProperties(a,this.props.linkClass,this.props.onLinkClick)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.componentWillUnmount=function(){this.selectionSubscription.cancel()},e.prototype.shouldComponentUpdate=function(){return!1},e.prototype.getCurrentSelection=function(){var t=window.getSelection();if(t.rangeCount>0){var e=t.getRangeAt(0);if(this.inputDiv===e.commonAncestorContainer||this.inputDiv.compareDocumentPosition(e.commonAncestorContainer)&Node.DOCUMENT_POSITION_CONTAINED_BY)return e}return null},e.prototype.linkify=function(t){this.execCommand("backColor","transparent"),this.execCommand("createLink",t);var n=this.getAnchorFromSelection();n&&e.addLinkProperties(n,this.props.linkClass,this.props.onLinkClick)},e.prototype.unlink=function(t){var e=t.parentNode,n=t.textContent;e&&(e.removeChild(t),n&&!J(n)&&this.execCommand("insertText",n))},e.prototype.applyRange=function(){if(this.range){var t=window.getSelection();t.removeAllRanges(),t.addRange(this.range)}},e.prototype.execCommand=function(t,e){this.range&&(this.applyRange(),document.execCommand(t,!1,e),this.onSelectionChange())},e.addLinkProperties=function(t,e,n){e&&t.classList.add(e),n&&(t.onclick=n)},e.prototype.getAnchorFromSelection=function(){var t=this.getCurrentSelection();if(!t)return null;for(var e=t.commonAncestorContainer;e&&"A"!==e.nodeName;){if(e===this.inputDiv)return null;e=e.parentNode}return e||null},e.prototype.finalizeInput=function(){this.props.onFinalizeInput(),this.inputDiv.blur()},e.prototype.render=function(){var t=this;return Object(r.h)("div",{ref:function(e){return t.inputDiv=e},class:"inputDiv",placeholder:this.props.placeholder,onMouseDown:this.onMouseDown,onKeyDown:this.onKeyPress,onKeyPress:this.onKeyPress,onPaste:this.onPaste,contentEditable:!0,onInput:this.onInput,onFocus:this.onFocus,onBlur:this.onBlur})},e}(r.Component),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ot=function(t){function e(e){var n=t.call(this,e)||this;return n.onEdited=function(t){n.state.validUrl&&n.props.onSaveLink(t)},n.onInput=function(t){n.setState({validUrl:J(t),currentUrl:t})},n.onApply=function(t){n.state.currentUrl&&n.onEdited(n.state.currentUrl)},n.onClickUrl=function(){window.open(n.props.linkUrl,"_blank")},n.stopPropagation=function(t){t.stopPropagation()},n.state={currentUrl:e.linkUrl,validUrl:!0},n}return nt(e,t),e.prototype.componentWillReceiveProps=function(t){this.state.currentUrl!==t.linkUrl&&this.setState({currentUrl:t.linkUrl})},e.prototype.render=function(){var t=this.props,e=t.linkOffsetTop,n=t.viewer,o=n?{top:e+"px"}:{};return Object(r.h)("div",{class:i("editable-popover","link-popover",{viewer:n}),onClick:this.stopPropagation,style:o},n?this.renderLinkViewing():this.renderLinkEditing())},e.prototype.renderLinkViewing=function(){var t=this.props,e=t.linkUrl,n=t.onRemoveLink,o=t.onEditLink;return Object(r.h)("div",{class:"link-viewer"},Object(r.h)("a",{onClick:this.onClickUrl},e),Object(r.h)("div",{class:"link-view-icons"},Object(r.h)("div",{class:"divider"}),Object(r.h)("span",{"data-balloon":"Edit Link","data-balloon-pos":X.b.DOWN,onClick:o},Object(r.h)("span",{class:"icon-toggle-pencil"})),Object(r.h)("div",{class:"divider"}),Object(r.h)("span",{"data-balloon":"Remove Link","data-balloon-pos":X.b.DOWN,onClick:n},Object(r.h)("span",{class:"icon-delete"}))))},e.prototype.renderLinkEditing=function(){var t=this.props,e=t.linkUrl,n=t.onCancel;return Object(r.h)("div",{class:"url-editor"},Object(r.h)("div",{class:"close-button",onClick:n},Object(r.h)("span",{class:"icon icon-close"})),Object(r.h)("label",{class:"popover-label"},"Link to"),Object(r.h)(K.a,{text:e,placeholder:"https://",defaultText:"",onEdited:this.onEdited,onInput:this.onInput,editing:!0}),this.renderButtons())},e.prototype.renderButtons=function(){var t=this.state,e=t.validUrl,n=!t.currentUrl||!e;return Object(r.h)("div",{class:"popover-footer"},this.renderValidationMessage(),Object(r.h)("div",{class:i("popover-btn popover-btn-apply",{disabled:n}),onClick:this.onApply},"Apply"))},e.prototype.renderValidationMessage=function(){var t=this.props,e=t.textSelected,n=t.linkUrl,o=this.state,i=o.validUrl,a=o.currentUrl,s=!e&&""===n&&""===a;return!i&&a?Object(r.h)("div",{class:"popover-message popover-message-error"},"Invalid URL"):Object(r.h)("div",{class:"popover-message"},s&&"Tip: Turn text into a link by selecting the text in the description field before clicking 'Add Link'")},e}(r.Component),rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},at=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},st=5,ct=function(t){function e(e){var n=t.call(this,e)||this;return n.initialDesc=[],n.linkElement=null,n.onLabelEdit=function(t){n.handleTextChange("label",t)},n.onLabelKeyPress=function(t){if(t.keyCode===R.a.ESCAPE)return n.props.onNavigationKey(t);if(t.stopPropagation(),t.keyCode===R.a.TAB){var e=n.editableDescription.getInputDiv();e&&e.focus()}return!1},n.onDescriptionInput=function(t){var e=t.length;n.closeLinkEditor(),n.props.onDescriptionInput(0===e),n.setState({descriptionLength:e})},n.onDescriptionEdited=function(){var t=n.editableDescription.getInputDiv();if(t){var e=F.htmlToString(t);n.handleTextChange("description",e)}},n.onLabelFocus=function(){n.closeLinkEditor(),n.props.onFocus()},n.onDescriptionFocus=function(){n.setState({editingDescription:!0}),n.props.onFocus()},n.onDescriptionBlur=function(){n.setState({editingDescription:!1})},n.linkClicked=function(t){if(n.state.previewingLink)n.closeLinkEditor();else{t.stopPropagation(),n.linkElement=t.target;var e=n.editableText.getBoundingClientRect(),o=n.linkElement.getBoundingClientRect(),r=n.editableText.offsetHeight/e.height,i=(o.top+o.height-e.top)*r;n.setState({linkOffsetTop:i,linkUrl:n.linkElement.href,previewingLink:!0}),n.props.onOpenLinkEditor()}},n.onAddLinkClicked=function(t){t.stopPropagation(),n.props.linkPopoverOpen?n.state.previewingLink?n.onEditLink():n.onCancelLink():n.state.linkCount<st&&(n.linkElement=n.editableDescription.prepareLinkSelection(),n.setState({linkUrl:n.linkElement?n.linkElement.href:"",previewingLink:!1}),n.props.onOpenLinkEditor())},n.onEditLink=function(){n.setState({previewingLink:!1})},n.onRemoveLink=function(){n.onSaveLink("")},n.onCancelLink=function(){n.closeLinkEditor()},n.onSaveLink=function(t){n.props.linkPopoverOpen&&(n.linkElement?""!==t?n.linkElement.href=t:n.editableDescription.unlink(n.linkElement):n.editableDescription.linkify(t),n.closeLinkEditor(),n.onDescriptionEdited())},n.clickOnBackground=function(t){t.stopPropagation(),n.props.onFocus()},n.state={previewingLink:!1,editingDescription:!1,descriptionLength:0,linkUrl:"",linkOffsetTop:0,linkCount:0},n}return rt(e,t),e.prototype.componentWillMount=function(){this.initialDesc=this.props.parsedDescription,this.updateDescriptionState(this.props.parsedDescription)},e.prototype.componentWillReceiveProps=function(t){t.description!==this.props.description&&this.updateDescriptionState(t.parsedDescription),!t.linkPopoverOpen&&this.props.linkPopoverOpen&&this.setState({previewingLink:!1})},e.prototype.updateDescriptionState=function(t){var e,n,o=0,r=0;try{for(var i=at(t),a=i.next();!a.done;a=i.next()){var s=a.value;s.link?(o+=s.link.label.length,r++):s.text&&(o+=s.text.length)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}this.setState({descriptionLength:o,linkCount:r})},e.prototype.handleTextChange=function(t,e){var n;this.props.manager.editItem(_.a.Action.CHANGE_TEXT,(n={sid:this.props.id},n[t]=e,n)).then(this.props.onEdited)},e.prototype.closeLinkEditor=function(){this.setState({linkUrl:"",previewingLink:!1}),this.props.onCloseLinkEditor(),this.linkElement=null},e.prototype.render=function(){var t=this,e=this.state,n=e.linkOffsetTop,o=e.linkCount,a=e.linkUrl,s=e.editingDescription,c=e.descriptionLength,l=e.previewingLink,u=this.props,p=u.label,h=u.linkPopoverOpen,d=u.onNavigationKey,f=!(!this.editableDescription||!this.editableDescription.hasTextSelected()),b=o<st,g=b?"Add link":"You can only add up to five links",y=c+"/1000";return Object(r.h)("div",{class:"editable-text-content",ref:function(e){return t.editableText=e},onClick:this.clickOnBackground},h&&Object(r.h)(ot,{viewer:l,textSelected:f,linkUrl:a,linkOffsetTop:n,onCancel:this.onCancelLink,onEditLink:this.onEditLink,onSaveLink:this.onSaveLink,onRemoveLink:this.onRemoveLink}),Object(r.h)("div",{class:"editable-text editable-tag-label"},Object(r.h)(K.a,{autofocus:!0,text:p,defaultText:"",placeholder:"Title",onEdited:this.onLabelEdit,onInput:this.onLabelEdit,onKeyPress:this.onLabelKeyPress,maxLength:60,closeOnFocusOut:!0,textarea:!0,fractionalCounter:!0,onStartEditing:this.onLabelFocus})),Object(r.h)("div",{class:"editable-text editable-tag-description"},Object(r.h)("div",{class:i("modifiable-text fractional-counter",{editing:s||h,empty:0===c}),"data-fractional-counter":y},Object(r.h)(et,{ref:function(e){return t.editableDescription=e},maxLength:1e3,placeholder:"Description",initialContent:this.initialDesc,onInput:this.onDescriptionInput,onFinalizeInput:this.onDescriptionEdited,onNavigationKey:d,linkClass:"tagLink",onLinkClick:this.linkClicked,onFocus:this.onDescriptionFocus,onBlur:this.onDescriptionBlur})),Object(r.h)("div",{class:i("add-link","billboard-menu-item",{enabled:b,active:h}),onClick:this.onAddLinkClicked,"data-balloon":g,"data-balloon-pos":X.b.DOWN},Object(r.h)("span",{class:"icon-link"}))))},e=it([E.a],e)}(r.Component),lt=n(513),ut=n(119),pt=function(t){var e="";e+=Math.floor(t)+"'";var n=Math.floor(t%1*12);return n<10&&(e+="0"),e+=n+"''"},ht=n(150),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ft=function(t){function e(e){var n=t.call(this,e)||this;return n.setStemValue=function(t,e){void 0===e&&(e=!0);var o=e?Object(ut.a)(t):t;o!==n.props.stemHeight&&n.props.manager.editItem(_.a.Action.CHANGE_STEM_HEIGHT,{sid:n.props.sid,stemHeight:o}).then(function(){n.props.onEdited()})},n.onClickReset=function(){n.slider&&(n.setStemValue(n.state.originalStemHeight,!1),n.slider.setValue(Object(ut.b)(n.state.originalStemHeight)))},n.onToggleStemVisibility=function(){n.props.manager.editItem(_.a.Action.CHANGE_STEM_VISIBILITY,{sid:n.props.sid,stemVisible:!n.props.stemVisible}).then(n.props.onEdited)},n.stopPropagation=function(t){t.stopPropagation()},n.updateUnits=function(){n.setState({units:n.props.settings.tryGetProperty(ht.a.Units,ht.c.USFractional)})},n.formatStemHeight=function(t){return n.state.units===ht.c.USFractional?pt(t):Math.round(100*Object(ut.a)(t))/100+"m"},n.state={originalStemHeight:e.stemHeight,units:e.settings.tryGetProperty(ht.a.Units,ht.c.USFractional)},n}return dt(e,t),e.prototype.componentDidMount=function(){this.slider.setValue(Object(ut.b)(this.props.stemHeight)),this.context.settings.onPropertyChanged(ht.a.Units,this.updateUnits)},e.prototype.componentWillUnmount=function(){this.context.settings.removeOnPropertyChanged(ht.a.Units,this.updateUnits)},e.prototype.render=function(){var t=this,e=this.props,n=e.stemVisible,o=e.stemHeight,a=this.state.originalStemHeight!==o;return Object(r.h)("div",{class:"editable-popover stem-popover",onClick:this.stopPropagation},Object(r.h)("div",{class:"stem-editor"},Object(r.h)(lt.b,{ref:function(e){return t.slider=e},discrete:!1,min:0,max:9,initialValue:Object(ut.b)(o),onInput:this.setStemValue,displayBounds:!0,width:130,formatNumbers:this.formatStemHeight,toolTipPosition:lt.a.DOWN}),Object(r.h)("div",{class:i("stem-slider-reset",{hasChanged:a}),onClick:this.onClickReset},"Reset"),Object(r.h)("hr",null),Object(r.h)("div",{class:"stem-checkbox",onClick:this.onToggleStemVisibility},Object(r.h)("div",{class:i("checkbox icon-check",{checked:n})}),Object(r.h)("div",{class:"checkbox-text"},"Show Stem"))))},e}(r.Component),bt=n(6),gt=(n(567),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),yt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},vt=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},mt=function(t){function e(e){var n=t.call(this,e)||this;return n.colorClickHandlerMap={},n.setupColorClickHandlers=function(){var t,e;try{for(var o=vt(n.props.colors),r=o.next();!r.done;r=o.next()){var i=r.value;n.colorClickHandlerMap[i]||(n.colorClickHandlerMap[i]=n.onColorChosen(i))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},n.onColorChosen=function(t){return function(){n.props.onColorPicked(t),n.setState({colorChosen:t})}},n.getColorSwatch=function(t){var e={backgroundColor:t},o=i({"color-swatch":!0,"icon-check":!0,chosen:n.state.colorChosen===t});return Object(r.h)("div",{class:o,style:e,onClick:n.colorClickHandlerMap[t]})},n.getColorGrid=function(){for(var t=[],e=0;e<n.props.colors.length;){for(var o=[],i=0;i<n.props.columns;i++)o.push(n.getColorSwatch(n.props.colors[e])),e++;t.push(Object(r.h)("div",{class:"color-swatch-row"},o))}return t},n.state={colorChosen:n.props.defaultColor||""},n.setupColorClickHandlers(),n}return gt(e,t),e.prototype.componentWillReceiveProps=function(t){Object(bt.b)(t.colors,this.props.colors)&&this.setupColorClickHandlers(),t.defaultColor&&!this.state.colorChosen&&this.setState({colorChosen:t.defaultColor})},e.prototype.render=function(){return Object(r.h)("div",{class:"color-picker"},this.getColorGrid())},e=yt([E.b],e)}(r.Component),Ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wt=["#d44441","#f44336","#e91e63","#f78da7","#9c4b92","#673ab7","#03687d","#03a9f4","#00bcd4","#417505","#51a868","#37d67a","#cddc39","#fbcd00","#ffac17","#ff6900","#abb8c3","#607d8b"],_t=function(t){function e(e){var n=t.call(this,e)||this;return n.handleColorPicked=function(t){n.props.manager.editItem(_.a.Action.CHANGE_COLOR,{sid:n.props.sid,color:t}).then(n.props.onEdited)},n.stopPropagation=function(t){t.stopPropagation()},n}return Ot(e,t),e.prototype.render=function(){var t=this.props.color;return Object(r.h)("div",{class:"editable-popover color-editor",onClick:this.stopPropagation},Object(r.h)(mt,{colors:wt,columns:6,defaultColor:t,onColorPicked:this.handleColorPicked}))},e}(r.Component),Et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),St=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Ct=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(t){t[t.NONE=0]="NONE",t[t.INVALID_URL_SYNTAX=1]="INVALID_URL_SYNTAX",t[t.LOADING=2]="LOADING",t[t.LOADED=3]="LOADED",t[t.ERROR=4]="ERROR"}(q||(q={}));var Pt,kt=function(t){function e(e){var n=t.call(this,e)||this;return n.embedlyValidator=new x,n.onInput=function(t){var e=J(t)?q.NONE:q.INVALID_URL_SYNTAX;n.setState({validationPhase:e,currentUrl:t})},n.onApply=function(t){t.target.classList.contains("disabled")||n.onChangeMedia(n.state.currentUrl)},n.stopPropagation=function(t){t.stopPropagation()},n.onChangeMedia=function(t){return St(n,void 0,void 0,function(){var e,n,o,r,i,a;return Ct(this,function(s){switch(s.label){case 0:return e=this.props,n=e.manager,o=e.sid,r=e.mediaSrc,i=e.onEdited,t===r?[3,4]:[4,this.loadMedia(t)];case 1:return(a=s.sent())===C.a.error?[3,3]:[4,n.editItem(_.a.Action.CHANGE_MEDIA,{sid:o,mediaSrc:t,mediaType:a})];case 2:return s.sent(),this.setState({validationPhase:q.LOADED}),i(),[3,4];case 3:this.setState({validationPhase:q.ERROR}),s.label=4;case 4:return[2]}})})},n.loadMedia=function(t){return St(n,void 0,void 0,function(){var e;return Ct(this,function(n){switch(n.label){case 0:return e=C.a.none,this.setState({validationPhase:q.NONE}),t?(this.setState({validationPhase:q.LOADING}),[4,this.embedlyValidator.getType(t)]):[3,2];case 1:e=n.sent(),n.label=2;case 2:return[2,e]}})})},n.state={currentUrl:e.mediaSrc,validationPhase:n.getInitialValidationPhase()},n}return Et(e,t),e.prototype.getInitialValidationPhase=function(){return this.props.mediaType===C.a.error?q.ERROR:this.props.mediaSrc?q.LOADED:q.NONE},e.prototype.componentWillReceiveProps=function(t){this.state.currentUrl!==t.mediaSrc&&this.setState({currentUrl:t.mediaSrc})},e.prototype.render=function(){var t=this.props,n=t.mediaSrc,o=t.onCancel;return Object(r.h)("div",{class:"editable-popover media-popover",onClick:this.stopPropagation},Object(r.h)("div",{class:"url-editor"},Object(r.h)("div",{class:"close-button",onClick:o},Object(r.h)("span",{class:"icon icon-close"})),Object(r.h)("label",{class:"popover-label"},"Media link",Object(r.h)("a",{target:"_blank",href:e.supportPage},"See supported formats")),Object(r.h)(K.a,{text:n,placeholder:"https://",defaultText:"",onEdited:this.onChangeMedia,onInput:this.onInput,editing:!0}),this.renderPopoverFooter()))},e.prototype.renderPopoverFooter=function(){var t=this.props.mediaSrc,e=this.state,n=e.validationPhase,o=e.currentUrl,a=n===q.ERROR||n===q.LOADING||n===q.INVALID_URL_SYNTAX&&""!==o||o===t&&""===o;return Object(r.h)("div",{class:"popover-footer"},this.renderValidationMessage(),Object(r.h)("div",{class:i("popover-btn popover-btn-apply",{disabled:a}),onClick:this.onApply},"Apply"))},e.prototype.renderValidationMessage=function(){switch(this.state.validationPhase){case q.ERROR:return Object(r.h)("div",{class:"popover-message popover-message-error"},"Can't find media. Please check URL.",Object(r.h)("a",{target:"_blank",href:e.supportPageIssues},"Help"));case q.LOADING:return Object(r.h)("div",{class:"popover-message"},"Looking up media...");case q.INVALID_URL_SYNTAX:if(""!==this.state.currentUrl)return Object(r.h)("div",{class:"popover-message popover-message-error"},"Invalid URL")}return Object(r.h)("div",{class:"popover-message"})},e.supportPage="https://support.matterport.com/hc/en-us/articles/115006363868",e.supportPageIssues="https://support.matterport.com/hc/en-us/articles/115006363868#issues",e}(r.Component),jt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tt=function(){return(Tt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Lt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},At=new l.a("EditableBillboardContent");!function(t){t.COLOR="color",t.STEM="stem",t.MEDIA="media",t.LINK="text-link"}(Pt||(Pt={}));var xt,Dt,Mt=function(t){function e(e){var n=t.call(this,e)||this;return n.getColorStyle=function(){var t=n.props,e=t.manager,o=t.id,r=e&&e.getState(o)&&e.getState(o).color;if(r)return"background-color: "+r},n.toggleVisibility=function(){n.closePopover();var t=n.state.currentValues.visible,e={sid:n.props.id,visible:!t};n.props.manager.editItem(_.a.Action.CHANGE_VISIBILITY,e).then(n.onEdited)},n.deleteTag=function(){n.closePopover(),n.props.manager.editItem(_.a.Action.DELETE,{sid:n.props.id,suppressConfirmation:!1})},n.onEdited=function(){var t=n.getCurrentValues(),e=n.props.manager.isTagEmpty(n.props.id);t&&n.setState({empty:e,currentValues:t})},n.onMediaEdited=function(){n.onEdited(),n.closePopover()},n.onMediaCancel=function(){n.closePopover()},n.cancelEdits=function(){n.props.manager.editItem(_.a.Action.REVERT)},n.doneEditing=function(){n.props.manager.editItem(_.a.Action.SAVE,{sid:n.props.id})},n.onOpenLinkEditor=function(){n.setState({popover:Pt.LINK})},n.onCloseLinkEditor=function(){n.state.popover===Pt.LINK&&n.setState({popover:null})},n.onDescriptionInput=function(t){n.setState({empty:n.props.manager.isTagEmpty(n.props.id)&&t})},n.onFocusTextEditor=function(){n.closePopover()},n.onNavigationKey=function(t){t.keyCode===R.a.ESCAPE&&n.cancelEdits()},n.billboardClick=function(t){t.stopPropagation(),n.closePopover()},n.closePopover=function(){null!==n.state.popover&&n.setState({popover:null})},n.state={popover:null,currentValues:Tt({},e.originalValues),empty:e.manager.isTagEmpty(e.id)},n.clickColor=n.clickMenuIcon.bind(n,Pt.COLOR),n.clickStem=n.clickMenuIcon.bind(n,Pt.STEM),n.clickMedia=n.clickMenuIcon.bind(n,Pt.MEDIA),n}return jt(e,t),e.prototype.componentWillMount=function(){this.props.analytics.track("workshop_gui",{gui_action:"mattertag_editor_opened"})},e.prototype.getCurrentValues=function(){var t=this.props.manager.getState(this.props.id);return t?{visible:t.visible,color:t.color,stemHeight:t.stemHeight,label:t.label,description:t.description,mediaSrc:t.mediaSrc,mediaType:t.mediaType,stemVisible:t.stemVisible}:(At.debug("EditableBillboardContent -> Tag "+this.props.id+" doesn't exist; was it deleted by a session change?"),null)},e.prototype.clickMenuIcon=function(t,e){e.stopPropagation(),this.state.popover===t?this.setState({popover:null}):this.setState({popover:t})},e.prototype.render=function(){var t=this.props,e=t.style,n=t.adding,o=this.state.empty,a=n&&o;return Object(r.h)("div",{class:"billboard-body editing",style:e.bodyStyle},Object(r.h)("div",{class:"billboard-content",onClick:this.billboardClick},this.renderTextContent(),this.renderMattertagMedia(),this.renderActivePopover()),Object(r.h)("div",{class:"billboard-footer",onClick:this.billboardClick},this.renderMenuItems(),Object(r.h)("div",{class:"billboard-cta"},Object(r.h)("span",{class:"mattertag-btn cancel-btn",onClick:this.cancelEdits},"Cancel"),Object(r.h)("span",{class:i("mattertag-btn","done-btn",{disabled:a}),onClick:this.doneEditing},"Done"))))},e.prototype.renderActivePopover=function(){var t=this.props,e=t.id,n=t.manager,o=t.settings,i=this.state,a=i.popover,s=i.currentValues,c=s.stemVisible,l=s.stemHeight,u=s.color,p=s.mediaSrc,h=s.mediaType;switch(a){case Pt.STEM:return Object(r.h)(ft,{sid:e,stemVisible:c,stemHeight:l,onEdited:this.onEdited,manager:n,settings:o});case Pt.COLOR:return Object(r.h)(_t,{sid:e,color:u,onEdited:this.onEdited,manager:n});case Pt.MEDIA:return Object(r.h)(kt,{sid:e,mediaSrc:p,mediaType:h,onEdited:this.onMediaEdited,onCancel:this.onMediaCancel,manager:n});default:return null}},e.prototype.renderMenuItems=function(){var t=this.state,e=t.popover,n=t.currentValues,o=this.props.adding,a=n.visible,s=e===Pt.COLOR,c=e===Pt.STEM,l=e===Pt.MEDIA;return Object(r.h)("div",{class:"billboard-menu"},Object(r.h)("div",{class:i("billboard-menu-item","color",{active:s}),"data-balloon":s?null:"Color","data-balloon-pos":"down",onClick:this.clickColor},Object(r.h)("span",{class:"icon editable-color-disc",style:this.getColorStyle()})),Object(r.h)("div",{class:i("billboard-menu-item","stem",{active:c}),"data-balloon":c?null:"Stem","data-balloon-pos":"down",onClick:this.clickStem},Object(r.h)("span",{class:"icon icon-stem-height"})),Object(r.h)("div",{class:i("billboard-menu-item","media",{active:l}),"data-balloon":l?null:"Media","data-balloon-pos":"down",onClick:this.clickMedia},Object(r.h)("span",{class:"icon icon-media-mix"})),!o&&Object(r.h)("div",{class:"billboard-menu-item","data-balloon":a?"Hide":"Show","data-balloon-pos":"down",onClick:this.toggleVisibility},Object(r.h)("span",{class:i("icon",a?"icon-eye-hide":"icon-eye-show")})),!o&&Object(r.h)("div",{class:i("billboard-menu-item","delete-tag"),"data-balloon":"Delete","data-balloon-pos":"down",onClick:this.deleteTag},Object(r.h)("span",{class:"icon icon-delete"})))},e.prototype.renderTextContent=function(){var t=this.state.popover,e=this.props,n=e.id,o=e.data,i=e.manager,a=o.label,s=o.parsedDescription,c=o.description,l=t===Pt.LINK;return Object(r.h)(ct,{id:n,label:a,parsedDescription:s,description:c,linkPopoverOpen:l,onOpenLinkEditor:this.onOpenLinkEditor,onCloseLinkEditor:this.onCloseLinkEditor,onDescriptionInput:this.onDescriptionInput,onNavigationKey:this.onNavigationKey,onFocus:this.onFocusTextEditor,onEdited:this.onEdited,manager:i})},e.prototype.renderMattertagMedia=function(){var t=this.props,e=t.id,n=t.data.mediaType,o=t.style,i=o.width,a=o.height,s=o.closing,c=t.media,l=c.hasMedia,u=c.mediaPayload,p=c.landscape;return l?u?Object(r.h)(z,{key:e,mediaPayload:u,mediaType:n,width:i,height:a,landscape:p,closing:s}):Object(r.h)("div",{class:"loadingSpinner"},Object(r.h)("div",{class:"gui-spinner-icon"})):null},e=Lt([E.b],e)}(r.Component),It=n(279),Rt=n(416),Nt=n(103),Ht=n(59),Vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Bt=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Ut=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Gt=new l.a("mattertag-description"),Wt=function(t){function e(e){var n=t.call(this,e)||this;return n.formatLink=function(t,e){return zt(t,e,!1)},n.linkClicked=function(t){return function(e){if(e.preventDefault(),n.props.onLinkClick(t),void 0!==t.link)switch(t.link.type){case Nt.a.NAVIGATION:n.props.navigationTagClicked(t);break;case Nt.a.MODEL:window.location.replace(t.link.url);break;case Nt.a.EXT_LINK:1===n.embeddedlinks?(n.context.messageBus.broadcast(new f.b(t.link.url)),window.requestAnimationFrame(function(){try{var e=window.open(t.link.url,"mattertagEmb");e&&e.focus()}catch(e){Gt.debug("Could not load the link within an iFrame! Error: "+e),window.open(t.link.url)}})):window.open(t.link.url)}}},n}return Vt(e,t),e.prototype.componentDidMount=function(){return Bt(this,void 0,void 0,function(){var t;return Ut(this,function(e){switch(e.label){case 0:return t=this,[4,this.context.market.waitForData(Ht.a)];case 1:return t.settings=e.sent(),this.embeddedlinks=this.settings.tryGetProperty("emb",0),[2]}})})},e.prototype.render=function(){var t=this.props,e=t.description,n=t.parsedDescription,o=e;return n&&n.length>0&&(o=Kt(n,this.formatLink,this.linkClicked)),o?Object(r.h)("div",{className:"tag-description"},o):null},e=Ft([E.b],e)}(r.Component),zt=function(t,e,n){if(!t.link)return null;var o=t.link,i=o.type===Nt.a.NAVIGATION?"Link to position within this model":"Link to external web site";return Object(r.h)("a",{className:"tagLink",contentEditable:n,href:o.url,onClick:e(t)},o.label,Object(r.h)("i",{class:"icon-ext-link",title:i}))},Kt=function(t,e,n){return t.map(function(t){switch(t.type){case C.a.link:if(t.link)return e(t,n);case C.a.text:return(t.text||"").replace("&zwnj;","")}return null})},Yt=n(363),qt=n(338),Xt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zt=function(){return(Zt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Qt=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Jt=120+(M+15),$t=function(t){function e(e){var n=t.call(this,e)||this;return n.state={height:null,descriptionHeight:0,scrollable:!1,determiningScrollability:!1,scrollClass:qt.c.None},n.onScrollPositionChange=function(){if(n.scrollbars&&!n.state.determiningScrollability){var t=n.scrollbars.scrollPosition.vertical;n.setState({scrollClass:t})}},n}return Xt(e,t),e.prototype.componentWillReceiveProps=function(t){t.tagWidth!==this.props.tagWidth&&this.setState({height:null,scrollable:!0,determiningScrollability:!0})},e.prototype.componentDidMount=function(){this.determineScrollability()},e.prototype.componentDidUpdate=function(){this.state.determiningScrollability&&this.determineScrollability()},e.prototype.determineScrollability=function(){var t=this.textContainer&&this.textContainer.querySelector(".tag-description"),e={determiningScrollability:!1};if(this.props.description&&t){var n=this.props.mediaTag?65:Jt;if(t.scrollHeight>n+D){var o=this.textContainer&&this.textContainer.querySelector(".tagLabel"),r=this.props.label?n+o.scrollHeight-5:n;e=Zt({},e,{height:r,scrollable:!0,scrollClass:qt.c.Beginning})}else e=Zt({},e,{height:null,scrollable:!1,scrollClass:qt.c.None})}this.setState(e)},e.prototype.render=function(){var t,e=this,n=this.props,o=n.label,a=n.description,s=n.parsedDescription,c=n.onLinkClick,l=n.navigationTagClicked;if(o||a||s){var u=i(((t={"tag-text-content":!0,noScroll:!this.state.height||!this.state.scrollable})[this.state.scrollClass]=!0,t));return Object(r.h)("div",{class:u,style:{height:this.state.scrollable&&this.state.height||"auto"},ref:function(t){e.textContainer=t}},Object(r.h)(Yt.a,{name:"mattertag-text-content",forceHidden:!1,waitToUpdate:this.state.determiningScrollability,singleScrollDirection:qt.b.vertical,ref:function(t){return e.scrollbars=t},onScrollPositionChange:this.onScrollPositionChange},o&&Object(r.h)("div",{class:"tagLabel",onClick:this.onBoundClick},Object(r.h)("span",null,o)),Object(r.h)(Wt,{description:a,parsedDescription:s,onLinkClick:c,navigationTagClicked:l})))}return null},e=Qt([E.b],e)}(r.Component),te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ee=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ne=function(t){function e(e){var n=t.call(this,e)||this;return n.clickBillboard=function(t){t.stopPropagation(),n.props.editable&&n.props.callbacks.onStartEditing()},n}return te(e,t),e.prototype.render=function(){var t=this.props,e=t.data,n=t.media,o=t.editable,a=t.style,s=t.selected,c=t.callbacks;return Object(r.h)("div",{class:"billboard-body",onClick:this.clickBillboard},Object(r.h)("div",{className:i("billboard-content"),style:a.bodyStyle},Object(r.h)($t,{label:e.label,description:e.description,parsedDescription:e.parsedDescription,tagWidth:a.width,imgHeight:a.height,mediaTag:n.hasMedia,onLinkClick:c.onLinkClick,navigationTagClicked:c.navigationTagClicked}),this.renderMattertagMedia(),o&&Object(r.h)(It.a,{buttonId:"",appendClass:{"edit-mattertag-button":!0},enabled:!0,message:Object(r.h)("span",{class:"icon-toggle-pencil"}),clickCallback:c.onStartEditing})),!s&&Object(r.h)(Rt.a,{sendEvents:[Rt.a.SendEvent.CLICK],className:"hover-arrow"}))},e.prototype.renderMattertagMedia=function(){var t=this.props,e=t.id,n=t.editable,o=t.data.mediaType,i=t.style,a=i.width,s=i.height,c=i.closing,l=t.media,u=l.hasMedia,p=l.mediaPayload,h=l.landscape,d=t.callbacks,f=n?void 0:d.onOpenOverlay;return u?p?Object(r.h)(z,{key:e,mediaPayload:p,mediaType:o,width:a,height:s,landscape:h,onClickImage:f,closing:c}):Object(r.h)("div",{class:"loadingSpinner"},Object(r.h)("div",{class:"gui-spinner-icon"})):null},e=ee([E.a],e)}(r.Component),oe=n(360),re=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ie=function(){return(ie=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ae=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},se=2*D+(M+15),ce=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleCollapseText=function(){n.setState(function(t){return{collapsed:!t.collapsed}})},n.onScrollPositionChange=function(){if(n.scrollbars&&!n.state.determiningScrollability){var t=n.scrollbars.scrollPosition.vertical;n.setState({scrollClass:t})}},n.updateScrollAndCollapse=function(){var t=n.textContainer?n.textContainer.scrollHeight:0,e=n.textContainer&&n.textContainer.querySelector(".tag-description"),o={determiningScrollability:!1};if(t){var r=Math.max(t-se-n.state.overlayHeight,0),i=r>0,a=t-r,s=e&&e.scrollHeight-r,c=i?qt.c.Beginning:qt.c.None;o=ie({},o,{height:a,scrollable:i,descriptionHeight:s,scrollClass:c,collapsible:e&&t>se})}n.setState(o)},n.updateOverlayDimensions=function(){var t=n.context.mainDiv,e=t.offsetWidth-(2*I+2*D),o=t.offsetHeight-(3*D+M),r=n.props.aspectRatio,i=r<e/o;n.setState({landscape:i,overlayHeight:i?o:e/r,overlayWidth:i?o*r:e})},n.stopPropagation=function(t){t.stopPropagation()},n.state={landscape:!1,overlayWidth:0,overlayHeight:0,collapsible:!!(e.description&&e.description.length>0),collapsed:!1,height:null,descriptionHeight:0,scrollable:!1,determiningScrollability:!1,scrollClass:qt.c.None},n.resizeSubscription=Object(oe.c)(oe.b.RESIZE,n.updateOverlayDimensions),n}return re(e,t),e.prototype.componentWillMount=function(){this.updateOverlayDimensions()},e.prototype.componentDidMount=function(){this.resizeSubscription.renew(),this.updateScrollAndCollapse()},e.prototype.componentWillUnmount=function(){this.resizeSubscription.cancel()},e.prototype.componentWillReceiveProps=function(t){t.aspectRatio!==this.props.aspectRatio&&(this.updateOverlayDimensions(),this.updateScrollAndCollapse())},e.prototype.componentWillUpdate=function(t,e){e.overlayWidth===this.state.overlayWidth&&e.overlayHeight===this.state.overlayHeight||this.setState({determiningScrollability:!0,scrollable:!1,scrollClass:qt.c.None,height:0})},e.prototype.componentDidUpdate=function(){var t=this;this.state.determiningScrollability&&setTimeout(function(){return window.requestAnimationFrame(t.updateScrollAndCollapse)},0)},e.prototype.render=function(){var t=this.props,e=t.mediaPayload,n=t.mediaType,o=t.closing,a=this.state,s=a.overlayWidth,c=a.overlayHeight,l=a.collapsible,u=a.landscape;return Object(r.h)("div",{class:"billboard-body",onClick:this.stopPropagation},Object(r.h)("div",{className:i("billboard-content",{collapsible:l})},this.renderOverlayText(),Object(r.h)(z,{mediaPayload:e,mediaType:n,width:s,height:c,landscape:u,closing:o})))},e.prototype.renderOverlayText=function(){var t=this,e=this.props,n=e.label,o=e.description,a=e.parsedDescription,s=e.onLinkClick,c=e.navigationTagClicked,l=e.closeImageOverlay,u=this.state,p=u.collapsible,h=u.collapsed,d=u.descriptionHeight,f=u.scrollable,b=u.height,g=u.determiningScrollability,y=u.scrollClass,v=g||h?void 0:{maxHeight:b+"px"},m={};return o&&b&&f&&(m.height=d+"px",m.overflow="hidden"),Object(r.h)("div",{class:i("tag-text-content",{collapsed:h,noScroll:!b||!f}),style:v,ref:function(e){t.textContainer=e}},n&&Object(r.h)("div",{class:"tagLabel",onClick:this.toggleCollapseText},Object(r.h)("div",{class:"labelText"},n)),o&&Object(r.h)("div",{style:m,class:i(y,"wrappedDesc")},Object(r.h)(Yt.a,{name:"mattertag-overlay-text",forceHidden:!1,waitToUpdate:g,singleScrollDirection:qt.b.vertical,ref:function(e){return t.scrollbars=e},onScrollPositionChange:this.onScrollPositionChange},Object(r.h)("div",null,Object(r.h)(Wt,{description:o,parsedDescription:a,onLinkClick:s,navigationTagClicked:c})))),Object(r.h)("div",{class:"buttons"},p&&Object(r.h)("span",{class:"tag-button icon-dpad-down",onClick:this.toggleCollapseText}),Object(r.h)("span",{class:"tag-button icon-close",onClick:l})))},e=ae([E.b],e)}(r.Component),le=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ue=function(){return(ue=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},pe=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},he=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},de=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},fe=new l.a("mattertag-container");!function(t){t.NONE="None",t.TOP="Top",t.BOTTOM="Bottom",t.RIGHT="Right",t.LEFT="Left",t.UP="Up",t.DOWN="Down",t.PREFIX="tag"}(xt||(xt={})),function(t){t[t.NOT_LOADED=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.FAILED=3]="FAILED"}(Dt||(Dt={}));var be=function(t){function e(e){var n=t.call(this,e)||this;n.linkCount=0,n.linksClicked=[],n.panToTag=function(){return he(n,void 0,void 0,function(){var t,e,n,o,r,i,a,s,c,l;return de(this,function(u){switch(u.label){case 0:return this.state.positioned||this.props.navigating?[3,2]:0===(t=this.billboardRef.getBoundingClientRect()).width?[3,2]:(e=this.props,n=e.editing,o=e.posX,r=e.posY,i=void 0,a=void 0,n?(s=this.props.getTagContainer().offsetWidth,c=document.getElementById("canvas-container").offsetWidth,20,l=(c-s)/2+20,40,i=o+t.width/2+l,a=r+t.height/2+40):(i=t.left+t.width/2,a=t.top+t.height/2),this.setState({positioned:!0}),[4,this.props.sdk.Camera.lookAtScreenCoords(i,a)]);case 1:u.sent(),u.label=2;case 2:return[2]}})})},n.updateBillboardSize=function(){var t=n.state,e=t.mediaWidth,o=t.mediaHeight,r=n.props.data.mediaType;if(r===C.a.photo||r===C.a.rich||r===C.a.video){var i=n.getStandardDimensions(r,e,o);n.setState(ue({},i))}},n.closeImageOverlay=function(){n.props.overlay&&n.props.toggleImageOverlay&&n.props.toggleImageOverlay(n.props.id,!1)},n.onOpenOverlay=function(){n.props.toggleImageOverlay&&n.props.toggleImageOverlay(n.props.id,!0)},n.onStartEditing=function(){n.props.manager&&n.props.manager.toggleEditing(n.props.id)},n.onLinkClick=function(t){if(void 0!==t.link){-1===n.linksClicked.indexOf(t.link)&&n.linksClicked.push(t.link);var e=t.link.type;n.linkCount++,n.props.analytics.track("click_mattertag_link",{link_type:e,link_count:n.linkCount,links_clicked:n.linksClicked.length})}};var o=e.data;if(!o)return n;var r=n.getStandardDimensions(o.mediaType,1024,1024);return n.embedly=new x,n.state={width:r.width,height:190,mediaWidth:0,mediaHeight:0,mediaPayload:null,landscape:!1,active:!1,positioned:!1,mediaLoadingState:Dt.NOT_LOADED,savedData:n.getSavedData()},n.arrowDirectionClass=ye(e.posX,e.posY),n}var n;return le(e,t),n=e,e.prototype.componentDidMount=function(){var t=this;this.loadMedia(this.props),this.props.located&&window.requestAnimationFrame(function(){return t.setState({active:!0})}),this.props.editMode&&window.addEventListener("resize",this.updateBillboardSize)},e.prototype.componentWillUnmount=function(){this.props.editMode&&window.removeEventListener("resize",this.updateBillboardSize)},e.prototype.componentWillReceiveProps=function(t){var e=this;if(t.closing)this.setState({active:!1});else{if(!this.props.data||this.state.mediaPayload&&this.props.data.mediaSrc===t.data.mediaSrc||this.loadMedia(t),(this.props.closing||!this.props.located&&t.located)&&window.requestAnimationFrame(function(){return e.setState({active:!0})}),t.editing&&(!this.props.editing||null===this.state.savedData)){var n=this.getSavedData();n&&this.setState({savedData:n}),this.state.positioned&&this.setState({positioned:!1})}t.editing||t.navigationPitch&&t.navigationPitch!==this.props.navigationPitch&&!this.props.located&&this.updateNavigationPitch(t.navigationPitch)}},e.prototype.componentDidUpdate=function(t){var e=this.props,n=e.selected;!e.editing&&!n||this.state.positioned||window.requestAnimationFrame(this.panToTag),this.props.editing!==t.editing&&this.updateBillboardSize()},e.prototype.getSavedData=function(){if(this.props.manager){var t=this.props.manager.getState(this.props.id);if(!t)return fe.debug("getOriginalTagState -> Tag "+this.props.id+" doesn't exist; was it deleted by a session change?"),null;var e=t.visible,n=t.color,o=t.stemHeight;return{visible:e,color:n,label:t.label,description:t.description,stemHeight:o,mediaSrc:t.mediaSrc,mediaType:t.mediaType,stemVisible:t.stemVisible}}return null},e.prototype.loadMedia=function(t){var e=this,o=t.data;o&&n.isMediaTag(o.mediaType)&&this.state.mediaLoadingState!==Dt.LOADING&&(this.setState({mediaLoadingState:Dt.LOADING}),this.embedly.getMediaDetails(o.mediaType,o.mediaSrc).then(function(t){if(t&&e.billboardRef){var n=e.getStandardDimensions(o.mediaType,t.width,t.height);e.setState(ue({},n,{mediaWidth:t.width,mediaHeight:t.height,mediaPayload:t.embedlyResponse,mediaLoadingState:Dt.LOADED}),function(){(e.props.selected||e.props.editing)&&e.panToTag()})}}).catch(function(t){if(fe.debug(t),e.billboardRef){var n=e.getStandardDimensions(C.a.text,1024,1024);e.setState(ue({},n,{mediaLoadingState:Dt.FAILED}))}}))},e.prototype.getStandardDimensions=function(t,e,n){var o={width:310-D,height:0,landscape:!1};if(t===C.a.text||t===C.a.none||t===C.a.error)return o;var r=e,i=n,a=Math.max(e,1)/Math.max(n,1),s=this.props.getTagContainer();if(s){var c=t===C.a.photo,l=void 0;l=this.props.editing?c?150:340:80;var u=s.offsetWidth-100,p=s.offsetHeight-l;(i=(r=c?a>1?Math.max(Math.min(e,400,u),310):Math.max(Math.min(e,300),225):Math.max(Math.min(e,350,u),310))/a)>p&&(r=(i=p)*a)}return{width:r,height:i,landscape:a>1}},e.prototype.render=function(){var t=this;if(!this.props.data)return null;var e=this.props,o=e.data,a=e.selected,s=e.closing,c=e.posX,l=e.posY,u=e.overlay,p=e.editing,h=e.id,d=this.state,f=d.landscape,b=d.mediaLoadingState,g=d.active,y=o.mediaType,v=o.label,m=o.description,O=this.isImageTag();p?this.arrowDirectionClass="tagRightDown":a||s||(this.arrowDirectionClass=u?"":ye(c,l));var w=n.isMediaTag(y)&&b!==Dt.FAILED,_=b===Dt.LOADING&&y===C.a.photo,E=p||u?void 0:this.getTagPositionStyle(),S=u?void 0:this.arrowDirectionClass;return Object(r.h)("div",{className:i("tag-position",{"billboard-overlay":u,"has-text":v||m,"has-video":w&&y===C.a.video,"has-embed":w&&(y===C.a.rich||_),"has-image":O}),key:h,style:E},Object(r.h)("div",{className:i({active:!s&&g,"tag-scale-wrapper":!p})},Object(r.h)("div",{ref:function(e){t.billboardRef=e},className:i("tag-container","hasHotzone",[S],{"image-landscape":O&&f,"image-portrait":O&&!f}),onClick:this.closeImageOverlay},this.renderBillboard(w))))},e.prototype.renderBillboard=function(t){var e=this.state,n=e.mediaPayload,o=e.width,i=e.height,a=this.props,s=a.data,c=a.onNavigationLinkClicked,l=a.closing;if(a.overlay){var u=s.label,p=s.description,h=s.parsedDescription,d=s.mediaType;return Object(r.h)(ce,{label:u,description:p,parsedDescription:h,mediaPayload:n,mediaType:d,aspectRatio:o/i,closing:l,closeImageOverlay:this.closeImageOverlay,onLinkClick:this.onLinkClick,navigationTagClicked:c})}var f=this.state,b=f.landscape,g=f.savedData,y=this.props,v=y.editMode,m=y.editing,O=y.id,w=y.manager,_=y.analytics,E=y.settings,S=y.selected,C={mediaPayload:n,imageTag:this.isImageTag(),data:s,landscape:b,hasMedia:t},P={width:o,height:i,bodyStyle:t&&!n?{width:o+"px"}:{},closing:l};if(m){var k=!(!w||!w.isNewTag(O)),j={onLinkClick:this.onLinkClick,navigationTagClicked:c};return Object(r.h)(Mt,{id:O,adding:k,style:P,callbacks:j,media:C,data:s,manager:w,analytics:_,settings:E,originalValues:g})}j={onOpenOverlay:this.onOpenOverlay,onLinkClick:this.onLinkClick,navigationTagClicked:c,onStartEditing:this.onStartEditing};return v&&delete j.onOpenOverlay,Object(r.h)(ne,{id:O,editable:v,selected:S,style:P,callbacks:j,media:C,data:s})},e.prototype.isImageTag=function(){return this.state.mediaLoadingState!==Dt.FAILED&&this.props.data&&this.props.data.mediaType===C.a.photo},e.prototype.updateNavigationPitch=function(t){var e=this.arrowDirectionClass.match(/TagDirections.RIGHT|TagDirections.LEFT/),n=e?e[0]:xt.RIGHT;this.arrowDirectionClass=xt.PREFIX,Math.abs(t)>.75?this.arrowDirectionClass+=t>.75?xt.BOTTOM:xt.TOP:(this.arrowDirectionClass+=n,Math.abs(t)<.15||(this.arrowDirectionClass+=t>0?xt.DOWN:xt.UP))},e.prototype.getTagPositionScale=function(){return this.props.editing?1:Math.min(Math.max(.5,1/Math.pow(this.props.distance,.2)),1)},e.prototype.getTagPositionStyle=function(){if(this.props.located){var t=this.props;return{transform:"translate("+t.posX+"px, "+t.posY+"px) scale("+this.getTagPositionScale()+")"}}return{pointerEvents:"none",visibility:"hidden"}},e.isMediaTag=function(t){return t===C.a.photo||t===C.a.video||t===C.a.rich},e=n=pe([E.b],e)}(r.Component),ge=xt.RIGHT,ye=function(t,e){var n=1-(t+1)/window.innerWidth*2,o=1-(e+1)/window.innerHeight*2,r=o<-.2?0:o<.2?1:2,i=n<-.2?2:n<.2?1:0,a="";return a+=0===i?xt.RIGHT:2===i?xt.LEFT:"",a+=2===r?xt.DOWN:0===r?xt.UP:"",1===i&&(a=2===r?xt.BOTTOM:0===r?xt.TOP:"",1===r&&(a=window.innerWidth>window.innerHeight?n<0?xt.RIGHT:xt.LEFT:o<0?xt.BOTTOM:xt.TOP)),1===i&&1===r||a===ge||(ge=a),xt.PREFIX+ge};n.d(e,"a",function(){return Ce});var ve=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},Oe=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},we=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},_e=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Ee=new l.a("mattertag-ui"),Se=1e3,Ce=function(t){function e(e){var n=t.call(this,e)||this;return n.cameraPosition=new g.a,n.distance=new g.a,n.bindings=[],n.statesToWatch=[_.a.State.EDITING,_.a.State.MATTERTAG_VISIBLE,_.a.State.MATTERTAG_AMOUNT,_.a.State.MATTERTAG_LABEL,_.a.State.MATTERTAG_DESCRIPTION,_.a.State.MATTERTAG_COLOR,_.a.State.MATTERTAG_MEDIA_SOURCE,_.a.State.MATTERTAG_STEM_HEIGHT,_.a.State.MATTERTAG_STEM_VISIBLE],n.handleMattertagStateChange=function(){n.context.commandBinder.issueCommand(new y.a).then(function(t){var e={};for(var o in t){e[t[o].sid]=t[o]}n.setState({tags:e,editing:!(!n.props.editMode||!n.props.manager||null===n.props.manager.editing)})})},n.handleMattertagViewDataChanges=function(){var t=n.mattertagViewData.getBillboards();t.forEach(function(t){n.state.activeBillboards[t]?(window.clearTimeout(n.state.activeBillboards[t].timeoutId),n.updateBillboardData(t,{timeoutId:0,closing:!1})):n.addActiveBillboard(t)}),n.updateActiveBillboards(t);var e=function(e){if(-1!==t.indexOf(e))return{value:void 0};n.updateBillboardData(e,{closing:!0,timeoutId:window.setTimeout(function(){n.removeFromActiveBillboards(e)},Se)})};for(var o in n.state.activeBillboards){var r=e(o);if("object"==typeof r)return r.value}},n.addActiveBillboard=function(t){n.setState(function(e){var n=Object.assign({},e.activeBillboards);return n[t]={sid:t,distance:0,position:null,closing:!1,timeoutId:0},{activeBillboards:n}})},n.updateBillboardData=function(t,e){n.setState(function(n){var o=Object.assign({},n.activeBillboards);return o[t]&&(o[t]=Object.assign(o[t],e)),{activeBillboards:o}})},n.removeFromActiveBillboards=function(t){if(n.state.activeBillboards[t]){var e=n.mattertagData.getTag(t);e&&e.isActive||n.setState(function(e){var n=Object.assign({},e.activeBillboards);return delete n[t],{activeBillboards:n}})}},n.onCameraUpdate=function(t){n.cameraPosition.copy(t.pose.position),n.updateActiveBillboards(Object.keys(n.state.activeBillboards))},n.onSelectedChanged=function(){var t=n.mattertagViewData.selected||"";t!==n.state.selectedTagId&&n.setState({selectedTagId:t})},n.onNavigatingChanged=function(){var t=n.mattertagViewData.navigating||"";t!==n.state.navigatingTagId&&n.setState({navigatingTagId:t})},n.onNavigationPitchChanged=function(){n.setState({navigationPitch:n.mattertagViewData.navigationPitch})},n.toggleImageOverlay=function(t,e){n.setState({overlay:e}),n.props.toggleOpen&&n.props.toggleOpen(u.a.mattertag,e),e&&n.context.messageBus.broadcast(new f.e(t,d.b.OVERLAY)),e&&t!==n.state.selectedTagId?n.context.commandBinder.issueCommand(new O.a(t,w.c.FLY)):e||n.closeBillboard(t)},n.getTagContainer=function(){return n.tagsRoot},n.onNavigationLinkClicked=function(t){if(t.link&&t.link.navigationData){var e=n.props.sdk,o={2:e.Mode.Mode.DOLLHOUSE,3:e.Mode.Mode.FLOORPLAN},r=t.link.navigationData,i=r.panoId,l=r.quaternion,u=r.mode,p=r.position,h=void 0;if(l){var d=new a.a(l.x,l.y,l.z,l.w);h={x:(h=(new s.a).setFromQuaternion(d,"YXZ")).x*c.c,y:h.y*c.c,z:h.z*c.c}}var f=void 0;if(p&&(f={x:p.x,y:p.y,z:p.z}),i)e.Sweep.moveTo(i,{rotation:h});else{if(!(u in o))throw new Error("Unknown navigation link pose: "+JSON.stringify(t.link.navigationData));e.Mode.moveTo(o[u],{rotation:h,position:f})}}},n.setState({tags:{},activeBillboards:{},selectedTagId:"",navigatingTagId:"",navigationPitch:0,overlay:!1,editing:!1}),n}return ve(e,t),e.prototype.componentDidMount=function(){return me(this,void 0,void 0,function(){var t,e,n,o,r=this;return Oe(this,function(i){switch(i.label){case 0:this.props.manager&&(this.subscriptions=this.props.manager.onStateUpdated(this.statesToWatch,function(){return r.handleMattertagStateChange()}),this.subscriptions.forEach(function(t){return t.renew()})),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Promise.all([this.context.market.waitForData(p.a),this.context.market.waitForData(h.b)])];case 2:return t=we.apply(void 0,[i.sent(),2]),e=t[0],n=t[1],this.mattertagData=e,this.mattertagViewData=n,this.bindings.push(this.mattertagViewData.onSelectedChanged(this.onSelectedChanged,!0)),this.bindings.push(this.mattertagViewData.onNavigatingChanged(this.onNavigatingChanged,!0)),this.mattertagViewData.onChanged(this.handleMattertagViewDataChanges),this.mattertagViewData.onPropertyChanged("navigationPitch",this.onNavigationPitchChanged),this.handleMattertagStateChange(),this.context.market.waitForData(v.a).then(this.onCameraUpdate),this.bindings.push(this.context.market.onDataUpdate(v.a,this.onCameraUpdate)),[3,4];case 3:return o=i.sent(),Ee.debug(o),[3,4];case 4:return[2]}})})},e.prototype.componentWillUnmount=function(){var t,e;this.subscriptions&&this.subscriptions.forEach(function(t){return t.cancel()});try{for(var n=_e(this.bindings),o=n.next();!o.done;o=n.next()){o.value.cancel()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.bindings=[],this.mattertagViewData&&(this.mattertagViewData.removeOnChanged(this.handleMattertagViewDataChanges),this.mattertagViewData.removeOnPropertyChanged("navigationPitch",this.onNavigationPitchChanged))},e.prototype.renderActiveBillboards=function(){var t=this.state,e=t.tags,n=t.activeBillboards,o=t.selectedTagId,i=t.navigationPitch,a=t.editing,s=t.overlay,c=t.navigatingTagId,l=this.props,u=l.manager,p=l.sdk,h=l.editMode,d=[];for(var f in n){var b=e[f];if(b){var g=n[f],y=o===f,v=!(!g.position||!g.distance),m=g.closing||!(y||!o),O=!(!c||c!==f);m&&a&&Object.keys(n).length>1||d.push(Object(r.h)(be,{key:f,id:f,editMode:h,editing:a,overlay:s,closing:m,selected:y,located:v,navigating:O,distance:g.distance,data:b,posX:g.position?g.position.x:0,posY:g.position?g.position.y:0,toggleImageOverlay:this.toggleImageOverlay,onNavigationLinkClicked:this.onNavigationLinkClicked,navigationPitch:y?i:void 0,getTagContainer:this.getTagContainer,analytics:this.context.analytics,settings:this.context.settings,manager:u,sdk:p}))}}return d},e.prototype.render=function(){var t=this;if(this.mattertagData){var e=this.state.editing;return Object(r.h)("div",{id:"tags-root",className:i({"tag-editing":e}),ref:function(e){t.tagsRoot=e}},this.renderActiveBillboards())}return null},e.prototype.updateActiveBillboards=function(t){var e=this;this.props.tourPlaying?this.setState({activeBillboards:{}}):t.length>0&&this.context.commandBinder.issueCommand(new b.a(t)).then(function(t){var n,o;try{for(var r=_e(t),i=r.next();!i.done;i=r.next()){var a=i.value;e.updateBillboardData(a.sid,{distance:e.distance.copy(e.cameraPosition).distanceToSquared(a.world),position:a.screen})}}catch(t){n={error:t}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}})},e.prototype.closeBillboard=function(t){this.context.commandBinder.issueCommand(new m.a([t]))},e}(r.Component)},562:function(t,e,n){},564:function(t,e,n){},567:function(t,e,n){},569:function(t,e,n){},575:function(t,e,n){},577:function(t,e,n){},578:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=(n(577),n(70)),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=function(t){function e(e){var n=t.call(this,e)||this;return n.state={usedTour:!1},n.handleClick=n.handleClick.bind(n),n}return s(e,t),e.prototype.handleClick=function(){this.props.reelOpen||this.props.onToggleHLR(!0)},e.prototype.getTourSteps=function(){for(var t=this.props,e=t.totalSteps,n=t.activeStep,o=[],a=0;a<e;a++)o.push(Object(r.h)("div",{class:i({active:a===n}),key:a.toString()}));return o},e.prototype.componentWillReceiveProps=function(t){t.tourPlaying&&!this.props.tourPlaying&&this.setState({usedTour:!0})},e.prototype.render=function(){var t=this.props,e=t.reelOpen,n=t.tourPlaying,o=t.activeStep,a=t.totalSteps,s=i({"reel-open":e,fadeIn:n&&!e,"tour-playing":n}),c=o+1+"/"+a,l=-1!==o&&!e&&c;return a>0&&(n||this.state.usedTour)?Object(r.h)("div",{id:"tour-progress",class:s,onClick:this.handleClick,"data-balloon":l,"data-balloon-pos":"right","data-balloon-size":"xs"},-1!==o&&Object(r.h)("div",{class:"progress-number"},c),-1!==o&&Object(r.h)("div",{class:"progress-bar"},this.getTourSteps())):null},e=c([a.b],e)}(r.Component);e.a=l},581:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(8),s=n(92),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=t.call(this,e)||this;return n.state={fullscreen:!1},n.handleButtonClick=n.handleButtonClick.bind(n),n.onFullScreenChange=n.onFullScreenChange.bind(n),document.addEventListener("fullscreenchange",n.onFullScreenChange),document.addEventListener("webkitfullscreenchange",n.onFullScreenChange),document.addEventListener("MSFullscreenChange",n.onFullScreenChange),document.addEventListener("mozfullscreenchange",n.onFullScreenChange),n}return c(e,t),e.prototype.handleButtonClick=function(){a.g()?(this.context.analytics.track("showcase_gui",{gui_action:"click_exit_fullscreen",interaction_source:"gui"}),a.c()):(this.context.analytics.track("showcase_gui",{gui_action:"click_enter_fullscreen",interaction_source:"gui"}),a.o(document.body))},e.prototype.onFullScreenChange=function(){this.setState({fullscreen:a.g()})},e.prototype.render=function(){return Object(r.h)("div",{id:"fullscreen-mode",class:"right-row"},Object(r.h)("div",{type:"button","data-balloon":this.state.fullscreen?this.context.locale.t(s.a.EXIT_FULLSCREEN):this.context.locale.t(s.a.VIEW_FULLSCREEN),"data-balloon-pos":"up-left",class:i("fullscreen","ui-icon"),onClick:this.handleButtonClick},Object(r.h)("span",{class:i("icon",this.state.fullscreen?"icon-fullscreen-exit":"icon-fullscreen")})))},e}(r.Component);e.a=l},584:function(t,e,n){},586:function(t,e,n){},587:function(t,e,n){"use strict";var o,r=n(9),i=n(46),a=n(70),s=n(92),c=n(41),l=n(278),u=n(3),p=(n(586),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},d=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},f=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},b=new u.a("tour-controls"),g=function(t){function e(e){var n=t.call(this,e)||this;return n.handlePlayPause=n.handlePlayPause.bind(n),n.handleNext=n.handleNext.bind(n),n.handlePrevious=n.handlePrevious.bind(n),n}return p(e,t),e.prototype.startTour=function(){return d(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.context.commandBinder.issueCommand(new c.b)];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),b.debug(t),[3,3];case 3:return[2]}})})},e.prototype.stopTour=function(){return d(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.context.analytics.track("showcase_gui",{gui_action:"pause_highlights"}),[4,this.context.commandBinder.issueCommand(new c.d)];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),b.debug(t),[3,3];case 3:return[2]}})})},e.prototype.handlePlayPause=function(){return d(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.props.tourPlaying?[4,this.stopTour()]:[3,2];case 1:return e.sent(),[3,4];case 2:return this.context.analytics.track("showcase_gui",{gui_action:"play_highlights"}),[4,this.startTour()];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:return t=e.sent(),b.debug(t),[3,6];case 6:return[2]}})})},e.prototype.handleNext=function(){return d(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.props.tourPlaying?[4,this.stopTour()]:[3,2];case 1:return e.sent(),[3,4];case 2:return this.context.analytics.track("showcase_gui",{gui_action:"next_highlight"}),[4,this.context.commandBinder.issueCommand(new c.a(!0))];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:return t=e.sent(),b.debug(t),[3,6];case 6:return[2]}})})},e.prototype.handlePrevious=function(){return d(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.props.tourPlaying?[4,this.stopTour()]:[3,2];case 1:return e.sent(),[3,4];case 2:return this.context.analytics.track("showcase_gui",{gui_action:"prev_highlight"}),[4,this.context.commandBinder.issueCommand(new c.a(!1))];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:return t=e.sent(),b.debug(t),[3,6];case 6:return[2]}})})},e.prototype.render=function(){var t=this.props,e=t.tourEmpty,n=t.tourPlaying,o="ontouchstart"in window;return Object(r.h)("div",{id:"tour-controls",class:i("ui-icon left-row",{"tour-playing":n})},e?Object(r.h)("div",null,Object(r.h)("span",{class:"icon icon-play disabled"})):Object(r.h)(l.a,{content:n?this.context.locale.t(s.a.PAUSE):this.context.locale.t(s.a.PLAY),position:l.b.UP,onClick:this.handlePlayPause,tooltipTimeout:o?1e3:void 0},Object(r.h)("span",{class:i({icon:!0,"icon-pause":n,"icon-play":!n})})))},e=h([a.b],e)}(r.Component);e.a=g},654:function(t,e,n){t.exports=n.p+"images/badge-oculus.png"},655:function(t,e,n){t.exports=n.p+"images/apple-store.png"},656:function(t,e,n){t.exports=n.p+"images/badge-cardboard.png"},657:function(t,e,n){t.exports=n.p+"images/ico-vr.png"},658:function(t,e,n){},70:function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d});var o=n(9),r=n(6);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(!t.prototype||!t.prototype.render)return t.__scuWrap||(t.__scuWrap=f(t,v));t.prototype.shouldComponentUpdate=g}function d(t){if(!t.prototype||!t.prototype.render)return t.__scuWrap||(t.__scuWrap=f(t,r.b));t.prototype.shouldComponentUpdate=y}function f(t,e){var n=function(t){function e(){return s(this,e),c(this,l(e).apply(this,arguments))}return u(e,b),e}();return n.prototype.renderChild=t,n.prototype.diffFunc=e,n}var b=function(t){function e(){return s(this,e),c(this,l(e).apply(this,arguments))}var n,r,i;return u(e,o["Component"]),n=e,(r=[{key:"shouldComponentUpdate",value:function(t){return this.diffFunc(t,this.props)}},{key:"render",value:function(t,e,n){return this.renderChild(t,n)}}])&&a(n.prototype,r),i&&a(n,i),e}();function g(t,e){return v(t,this.props)||v(e,this.state)}function y(t,e){return v(t,this.props)||Object(r.b)(e,this.state)}function v(t,e){for(var n in t)if(t[n]!==e[n])return!0;for(var o in e)if(!(o in t))return!0;return!1}},784:function(t,e,n){},786:function(t,e,n){},788:function(t,e,n){},790:function(t,e,n){},792:function(t,e,n){},793:function(t,e,n){t.exports=n.p+"images/mattertag-disc-128-free.v1.png"},794:function(t,e,n){t.exports=n.p+"images/nav_help_360.png"},795:function(t,e,n){t.exports=n.p+"images/nav_help_zoom_keys.png"},796:function(t,e,n){t.exports=n.p+"images/nav_help_keyboard_up_down.png"},797:function(t,e,n){t.exports=n.p+"images/Desktop-help-spacebar.png"},798:function(t,e,n){t.exports=n.p+"images/nav_help_keyboard_left_right.png"},799:function(t,e,n){t.exports=n.p+"images/nav_help_inside_key.png"},800:function(t,e,n){t.exports=n.p+"images/nav_help_keyboard_all.png"},801:function(t,e,n){t.exports=n.p+"images/mobile-help-play-button.svg"},802:function(t,e,n){t.exports=n.p+"images/nav_help_tap_inside.png"},803:function(t,e,n){t.exports=n.p+"images/nav_help_gesture_tap.png"},804:function(t,e,n){t.exports=n.p+"images/nav_help_gesture_position_two_finger.png"},805:function(t,e,n){t.exports=n.p+"images/nav_help_gesture_position.png"},806:function(t,e,n){t.exports=n.p+"images/nav_help_gesture_pinch.png"},807:function(t,e,n){t.exports=n.p+"images/nav_help_gesture_drag_two_finger.png"},808:function(t,e,n){t.exports=n.p+"images/nav_help_gesture_drag.png"},809:function(t,e,n){t.exports=n.p+"images/nav_help_mouse_zoom.png"},810:function(t,e,n){t.exports=n.p+"images/nav_help_mouse_position_right.png"},811:function(t,e,n){t.exports=n.p+"images/nav_help_mouse_position_left.png"},812:function(t,e,n){t.exports=n.p+"images/Desktop-help-play-button.svg"},813:function(t,e,n){t.exports=n.p+"images/nav_help_mouse_drag_right.png"},814:function(t,e,n){t.exports=n.p+"images/nav_help_mouse_drag_left.png"},815:function(t,e,n){t.exports=n.p+"images/nav_help_click_inside.png"},816:function(t,e,n){t.exports=n.p+"images/nav_help_mouse_click.png"},820:function(t,e,n){},821:function(t,e,n){t.exports=n.p+"images/ico-gearvr.png"},822:function(t,e,n){t.exports=n.p+"images/logo-samsung.png"},823:function(t,e,n){t.exports=n.p+"images/ico-android-robot.png"},824:function(t,e,n){t.exports=n.p+"images/apple-logo-white.svg"},827:function(t,e,n){},830:function(t,e,n){},832:function(t,e,n){},840:function(t,e,n){},842:function(t,e,n){},844:function(t,e,n){},845:function(t,e,n){t.exports=n.p+"images/pauseButton.svg"},847:function(t,e,n){},849:function(t,e,n){}}]);