(window.webpackJsonp=window.webpackJsonp||[]).push([[34,36],{1121:function(t,n,e){"use strict";e.r(n);var r,o=e(0),a=e(424),i=function(t,n,e){t.waitForModule(o.D).then(function(t){e.addCommandToInterface({version:"3.x",namespace:"Label",name:"createLabel",args:["floor","position","text","roomId"]},function(t){return new a.a(t)})})},u=function(){return(u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},c=function(t,n,e){t.waitForModule(o.D).then(function(t){e.addCommandToInterface({version:"3.x",namespace:"Label",name:"updateLabel",args:["sid","properties"]},function(t){var n=u({},t.properties,{sid:t.sid});return new a.c(n)})})},s=function(t,n,e){t.waitForModule(o.D).then(function(t){e.addCommandToInterface({version:"3.x",namespace:"Label",name:"deleteLabel",args:["sid"]},function(t){return new a.b(t.sid)})})},l=e(16),f=e(13),p=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),d=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},h=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},y=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="PUBLISH",n}return p(n,t),n}(l.a),v=function(t,n,e){n.addBinding(y,function(){return d(void 0,void 0,void 0,function(){return h(this,function(t){return[2,f.b.publishAll()]})})}),e.addCommandToInterface({version:"3.x",namespace:"Edit",name:"publish",args:[]},function(t){return new y})};e.d(n,"bindSdkInterface",function(){return b});var b=function(t,n,e){[i,c,s,v].forEach(function(r){r(t,n,e)})}},1134:function(t,n,e){"use strict";e.r(n);var r,o,a=e(25),i=e(436),u=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"App",name:"Phase",values:i.b});var e=[void 0],r=function(t){return e[0]=Object(i.e)(t.phase),e};t.subscribe(a.a,function(t){n.broadcast(i.a.PHASE_CHANGE,t,r)})},c=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"App",name:"Application",values:i.c}),n.addEnumToInterface({version:"3.x",namespace:"App",name:"Event",values:i.a});var e=[void 0],r=function(t){return e[0]=Object(i.f)(t.application),e};t.subscribe(a.b,function(t){n.broadcast(i.a.APP_CHANGE,t,r)})},s=e(594),l=e(16),f=e(27),p=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),d=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},h=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},y=function(t){function n(){var n=t.call(this)||this;return n.id="GET_APP_STATE",n}return p(n,t),n}(l.a),v=function(t,n,e){t.waitForModule(f.default).then(function(t){n.addBinding(y,function(n){return d(void 0,void 0,void 0,function(){var n;return h(this,function(e){try{return n=t.getData(),[2,{phase:Object(i.e)(n.phase),application:Object(i.f)(n.application)}]}catch(t){throw Error("Error: Can't get application data at this time")}return[2]})})})}),e.addCommandToInterface({version:"3.x",namespace:"App",name:"getState",args:[]},function(){return new y})},b=e(5),m=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),w=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},g=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},x=function(t){function n(){var n=t.call(this)||this;return n.id="GET_APP_PHASE_TIMES",n}return m(n,t),n}(l.a),_=function(t,n,e){n.addBinding(x,function(){return w(void 0,void 0,void 0,function(){var n,e,r,o,a,u;return g(this,function(c){switch(c.label){case 0:return(n={})[i.b.WAITING]=null,n[i.b.LOADING]=null,n[i.b.STARTING]=null,n[i.b.PLAYING]=null,n[i.b.ERROR]=null,e=n,[4,t.market.waitForData(b.c)];case 1:for(o in(r=c.sent()).phaseTimes)a=Number(o),(u=Object(i.e)(a))&&(e[u]=r.phaseTimes[a]);return[2,e]}})})}),e.addCommandToInterface({version:"3.x",namespace:"App",name:"getLoadTimes",args:[]},function(){return new x})},O=e(168),T=e(48),P={FORWARD:T.a.FORWARD.clone(),LEFT:T.a.LEFT.clone(),RIGHT:T.a.RIGHT.clone(),BACK:T.a.BACK.clone(),UP:T.a.UP.clone(),DOWN:T.a.DOWN.clone()},S=e(0),j=e(135),E=e(62),A=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),k=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},D=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},I=function(t,n,e){t.waitForModule(S.Y).then(function(t){return n.addBinding(C,function(n){return k(void 0,void 0,void 0,function(){var e,r,o;return D(this,function(a){switch(a.label){case 0:if(e=Object.keys(O.a),-1===(r=e.indexOf(n.direction)))throw new Error(n.direction+" is not a valid direction");return o=e[r],[4,t.navigateInLocalDirection(P[o])];case 1:return a.sent(),[2]}})})})});var r=function(t){return new C(t||{})};e.addEnumToInterface({version:"3.x",namespace:"Camera",name:"Direction",values:O.a}),e.addCommandToInterface({version:"3.x",namespace:"Camera",name:"moveInDirection",args:["direction"]},r),e.addEnumToInterface(j.directionsInterface),e.addCommandToInterface(E.moveInDirectionInterface,r)},C=function(t){function n(n){var e=t.call(this)||this;return e.id="MOVE_DIRECTION",e.payload=n,e}return A(n,t),n}(l.a),M=e(509),F=e(91),N=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),G=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},R=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},z=function(t,n,e){Promise.all([t.waitForModule(S.f),t.waitForModule(S.c)]).then(function(t){var e=t[0],r=t[1];n.addBinding(L,function(t){return G(void 0,void 0,void 0,function(){var n,o,a,i,u,c;return R(this,function(s){switch(s.label){case 0:return n=r.getData(!1),o=n.pose.position,a=t.x-o.x,i=t.z-o.z,u=new F.a(a,i),c=u.length(),u.setLength(.005),[4,e.startTranslateTransition(c/.005,u,!1)];case 1:return s.sent(),[2]}})})})});var r=function(t){if((t=t||{}).position=t.position||{},t.position.x=t.position.x-0,t.position.z=t.position.z-0,isNaN(t.position.x)||isNaN(t.position.z))throw new Error(JSON.stringify(t)+" does not contain a valid position to pan");return new L({x:t.position.x,z:t.position.z})};e.addCommandToInterface({version:"3.x",namespace:"Camera",name:"pan",args:["position"]},r),e.addCommandToInterface(E.panInterface,r)},L=function(t){function n(n){var e=t.call(this)||this;return e.id="PAN",e.payload={x:n.x,z:n.z},e}return N(n,t),n}(l.a),H=e(17),U=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},B=function(t,n){var e,r,o=Object.keys(t);try{for(var a=U(o),i=a.next();!i.done;i=a.next()){if(t[i.value]===n)return!0}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return!1},W=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),V=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},q=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Y=H.a.degToRad(80)/1e3,J=function(t,n,e){t.waitForModule(S.f).then(function(t){return n.addBinding(K,function(n){return V(void 0,void 0,void 0,function(){var e,r,o,a,i,u,c,s,l,f,p,d,h,y;return q(this,function(v){return e=n.rotationSpeed||Y,r=0,o=Math.abs(n.xAngle),a=Math.abs(n.yAngle),(i=Math.max(o,a))>=Math.PI?(u=i/Math.PI,c=Math.floor(u),f=o-(s=o/u)*c,p=a-(l=a/u)*c,d=Math.acos(Math.cos(s)*Math.cos(l))*c,h=Math.acos(Math.cos(f)*Math.cos(p)),r=d+h):r=Math.acos(Math.cos(Math.abs(n.xAngle))*Math.cos(Math.abs(n.yAngle))),r?((y=new F.a(-n.xAngle,n.yAngle)).multiplyScalar(e/r),[2,t.startRotateTransition(r/e,y,!1)]):[2]})})})});var r=function(t){t=t||{};var n=H.a.degToRad(t.xAngle||0),e=H.a.degToRad(t.yAngle||0);if(isNaN(n)||isNaN(e))throw new Error(JSON.stringify(t)+" does not contain valid rotation angles");return new K({xAngle:n,yAngle:e})};e.addCommandToInterface({version:"3.x",namespace:"Camera",name:"rotate",args:["xAngle","yAngle"]},r),e.addCommandToInterface(E.rotateInterface,r),e.addCommandToInterface(E.rotateInDirectionInterface,function(t){t=t||{};var n=H.a.degToRad(t.angle||0),e=t.direction;if(isNaN(n)||!B(O.a,e))throw new Error(JSON.stringify(t)+" does not contain a valid angle and direction");return new K({xAngle:e===O.a.RIGHT?n:e===O.a.LEFT?-n:0,yAngle:e===O.a.UP?n:e===O.a.DOWN?-n:0})})},K=function(t){function n(n){var e=t.call(this)||this;return e.id="ROTATE",e.payload={xAngle:n.xAngle,yAngle:n.yAngle,rotationSpeed:n.rotationSpeed},e}return W(n,t),n}(l.a),Q=e(312);!function(t){t.MOVE="camera.move"}(o||(o={}));var X=e(20),Z=e(145),$=e(101),tt=e(3),nt=e(113),et=new tt.a("broadcast.move"),rt=function(t,n){Promise.all([t.market.waitForData(Q.a),t.market.waitForData(nt.a),t.market.waitForData(Z.a)]).then(function(e){var r,a,i,u=e[0],c=e[1],s=e[2],l=[{position:{x:0,y:0,z:0},rotation:{x:0,y:0},projection:new Float32Array(16),sweep:"",mode:X.b.TRANSITIONING}],f={state:l[0]},p=(r=0,a=!1,i=function(t){return Object(M.c)(l[0],u,c,s,t),t?f:l},function(){var t=Date.now(),e=r+100;if(t>e){a=!1,r=t;try{n.broadcast($.a.MOVE,!0,i,!0),n.broadcast(o.MOVE,!1,i)}catch(t){et.debug("failed to broadcast pose, one of the module dependencies are probably not loaded yet")}}else a||(setTimeout(function(){return p()},e-t),a=!0)});t.market.onDataUpdate(Q.a,p),t.market.onDataUpdate(Z.a,p)}),n.addEnumToInterface({version:"3.x",namespace:"Camera",name:"Event",values:o})},ot=e(336),at=e(1),it=e(7),ut=H.a.degToRad(40)/1e3;function ct(t,n,e){Promise.all([t.getModule(S.qb)]).then(function(n){e.addCommandToInterface({version:"3.x",namespace:"Camera",name:"lookAtScreenCoords",args:["x","y"]},function(e){if(void 0===e&&(e={}),"number"!=typeof e.x||"number"!=typeof e.y)throw Error(JSON.stringify(e)+" does not contain a valid screen coordinate");var r=t.market.tryGetData(Z.a);if(!r||!r.isPano())throw Error("Camera.lookAtScreenCoords must be called from Inside mode");var o=t.market.tryGetData(Q.a),a=t.market.tryGetData(ot.a);if(!o||!a)throw Error("Error resolving current pose or canvas values");var i=n[0].getScene().camera,u=Object(it.g)(e.x,e.y,a),c=T.a.FORWARD.clone().applyQuaternion(o.pose.rotation),s=new at.a(u.x,u.y,1).unproject(i).normalize(),l=c.clone().setY(0).angleTo(s.clone().setY(0)),f=Math.asin(s.y-c.y),p=l*Math.sign(u.x);return new K({xAngle:p,yAngle:f,rotationSpeed:ut})})})}var st,lt=e(359),ft=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},pt=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},dt=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,a=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},ht=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(dt(arguments[n]));return t},yt=function(){function t(t,n,e){var r;this.dependencies=t,this.subscribeToChanges=n,this.freshDataCache=new e,this.currData=new e,(r=this.currData).update.apply(r,ht(this.dependencies))}return t.create=function(n,e,r){return ft(this,void 0,void 0,function(){return pt(this,function(o){switch(o.label){case 0:return[4,n()];case 1:return[2,new t(o.sent(),e,r)]}})})},t.prototype.getData=function(){return this.currData.data},t.prototype.subscribe=function(t){var n=this;return this.subscribeToChanges(function(){var e;(e=n.freshDataCache).update.apply(e,ht(n.dependencies)),n.freshDataCache.equals(n.currData)||(n.currData.copy(n.freshDataCache),t())})},t}(),vt=e(117),bt=e(98),mt=function(t,n){var e=new lt.a(function(){},function(n){t.market.onDataUpdate(Q.a,n),t.market.onDataUpdate(nt.a,n),t.market.onDataUpdate(Z.a,n)},function(n){t.market.removeOnDataUpdate(Q.a,n),t.market.removeOnDataUpdate(nt.a,n),t.market.removeOnDataUpdate(Z.a,n)}),r=yt.create(function(){return Promise.all([t.market.waitForData(Q.a),t.market.waitForData(nt.a),t.market.waitForData(Z.a)])},function(t){return e.createSubscription(t,!0)},wt);n.addObservableToInterface({version:"3.1",namespace:"Camera",name:"pose"},r)},wt=function(){function t(){this._data={position:{x:0,y:0,z:0},rotation:{x:0,y:0},projection:new Float32Array(16),sweep:"",mode:X.b.TRANSITIONING}}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return Object(it.e)(t.data.position.x,this.data.position.x,1e-5)&&Object(it.e)(t.data.position.y,this.data.position.y,1e-5)&&Object(it.e)(t.data.position.z,this.data.position.z,1e-5)&&Object(it.e)(t.data.rotation.x,this.data.rotation.x,1e-5)&&Object(it.e)(t.data.rotation.y,this.data.rotation.y,1e-5)&&function(t,n){for(var e=0;e<t.length;++e)if(!Object(it.e)(t[e],n[e],1e-5))return!1;return!0}(t.data.projection,this.data.projection)&&t.data.sweep===this.data.sweep&&t.data.mode===this.data.mode},t.prototype.copy=function(t){this.data.position.x=t.data.position.x,this.data.position.y=t.data.position.y,this.data.position.z=t.data.position.z,this.data.rotation.x=t.data.rotation.x,this.data.rotation.y=t.data.rotation.y;for(var n=0;n<t.data.projection.length;++n)this.data.projection[n]=t.data.projection[n];this.data.sweep=t.data.sweep,this.data.mode=t.data.mode},t.prototype.update=function(t,n,e){var r=(new vt.a).setFromQuaternion(t.pose.rotation,"YXZ"),o=n.currentSweep&&n.isSweepUnaligned(n.currentSweep);this.data.position.x=t.pose.position.x,this.data.position.y=t.pose.position.y,this.data.position.z=t.pose.position.z,this.data.rotation.x=H.a.radToDeg(r.x),this.data.rotation.y=H.a.radToDeg(r.y),this.data.projection=t.pose.projection.asThreeMatrix4().transpose().elements,this.data.sweep=n.currentSweep,this.data.mode=Object(bt.d)(e.currentMode,!o)},t}(),gt=e(589),xt=e(472),_t=e(50),Ot=e(320),Tt=e(4),Pt=e(18),St=e(324),jt=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Et=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},At=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,a=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},kt=new at.a,Dt=new at.a,It=new _t.a(T.a.DOWN,0),Ct=function(t,n,e){var r=t.waitForModule(S.qb),o=t.market.waitForData(ot.a),a=t.market.waitForData(Z.a),i=t.waitForModule(S.v),u=t.market.waitForData(St.a),c=t.waitForModule(S.Ha);Promise.all([r,o,a,c,i,u]).then(function(e){var r=At(e,6),o=r[0],a=r[1],i=r[2],u=r[3],c=r[4],s=r[5],l=function(t){var n=t.getFloorMins();return function(t){var e=0;return n.every(function(n,r){return e=r,t>n}),t>n[n.length-1]&&e++,e-1}}(c);n.addBinding(xt.a,function(n){return jt(void 0,void 0,void 0,function(){var e,r,c,f,p,d,h,y,v,b,m,w;return Et(this,function(g){switch(g.label){case 0:return[4,t.after(Pt.a.End)];case 1:return g.sent(),e=o.getScene().camera,r=n.screenPosition,c=Object(it.g)(r.x,r.y,a),f=null,p=-1,kt.set(c.x,c.y,-1).unproject(e),Dt.set(c.x,c.y,1).unproject(e),d=void 0!==n.includeHiddenFloors&&n.includeHiddenFloors,h=u.cast(kt,Dt.clone().sub(kt).normalize(),s.raycastGroups(d)),(y=h[0])&&(f=y&&y.point||null,p="floorIndex"in y.object?y.object.floorIndex:l(f.y)),void 0===n.height?[3,3]:(b=(v=kt).copy,[4,t.market.waitForData(Q.a)]);case 2:b.apply(v,[g.sent().pose.position]),m=o.ndcToWorld(c),i.currentMode!==Tt.a.Floorplan?(w=Object(Ot.j)(kt,m),It.set(T.a.DOWN,n.height),f=Object(Ot.h)(kt,w,It)||null):(m.y=n.height,f=m),g.label=3;case 3:return[2,{position:f,floor:p}]}})})})}),e.addCommandToInterface({version:"3.x",namespace:"Renderer",name:"getWorldPositionData",args:["screenPosition","height","includeHiddenFloors"]},function(t){return new xt.a(t)})},Mt=e(430),Ft=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Nt=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Gt=function(t,n,e){t.waitForModule(S.qb).then(function(t){n.addBinding(Mt.a,function(n){return Ft(void 0,void 0,void 0,function(){return Nt(this,function(e){return[2,t.ndcToScreenPoint(t.worldToNDC(n.worldPosition))]})})})}),e.addCommandToInterface({version:"3.x",namespace:"Renderer",name:"getScreenPosition",args:["worldPosition"]},function(t){return new Mt.a(t)})},Rt=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},zt=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Lt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ht=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Ut=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Bt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="GET_FLOORS_DATA",n}return Lt(n,t),n}(l.a),Wt=function(t,n,e){return Ht(void 0,void 0,void 0,function(){var r=this;return Ut(this,function(o){return n.addBinding(Bt,function(){return Ht(r,void 0,void 0,function(){return Ut(this,function(n){return[2,t.market.waitForData(St.a).then(function(t){return Vt(t)})]})})}),e.addCommandToInterface({version:"3.x",namespace:"Floor",name:"getData",args:[]},function(){return new Bt}),[2]})})},Vt=function(t){return Ht(void 0,void 0,void 0,function(){return Ut(this,function(n){try{return[2,(e=t,Rt(void 0,void 0,void 0,function(){var t,n,r;return zt(this,function(o){return t=e.currentFloor,n=e.totalFloors,r=e.getFloorNames(),[2,{currentFloor:t,floorNames:r,totalFloors:n}]})}))]}catch(t){throw Error("no floors currently loaded")}var e;return[2]})})},qt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yt=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Jt=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Kt=function(t){function n(n){var e=t.call(this)||this;return e.id="MOVE_TO_FLOOR",e.payload=n,e}return qt(n,t),n}(l.a),Qt=function(t,n,e){t.market.waitForData(St.a).then(function(t){return n.addBinding(Kt,function(n){return Yt(void 0,void 0,void 0,function(){var e;return Jt(this,function(r){switch(r.label){case 0:if("number"!=typeof n.floorIndex||n.floorIndex<0)throw Error("floor index must be a non-negative number");r.label=1;case 1:return r.trys.push([1,3,,4]),e="boolean"==typeof n.moveCamera&&!n.moveCamera,[4,t.moveToFloor(n.floorIndex,e,e?250:void 0)];case 2:return r.sent(),[2,t.currentFloor];case 3:throw r.sent(),Error("Could not move to floor at index "+n.floorIndex);case 4:return[2]}})})})}),e.addCommandToInterface({version:"3.x",namespace:"Floor",name:"moveTo",args:["floorIndex","moveCamera"]},function(t){return new Kt(t)})};!function(t){t.CHANGE_START="floors.changestart",t.CHANGE_END="floors.changeend"}(st||(st={}));var Xt,Zt=e(437),$t=e(396),tn=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"Floor",name:"Event",values:st});var e=[-1,-1],r=function(t){return e[0]=t.to,e[1]=t.from,e};t.subscribe(Zt.a,function(t){return n.broadcast(st.CHANGE_START,t,r)});var o=[-1,""],a=function(t){return o[0]=t.floorIndex,o[1]=t.floorName,o};t.subscribe($t.a,function(t){return n.broadcast(st.CHANGE_END,t,a)})},nn=e(471),en=e(393),rn=e(6),on=function(){return(on=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},an=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},un=function(t,n){var e,r,o=n.getCollection(),a=[],i=new at.a;try{for(var u=an(o),c=u.next();!c.done;c=u.next()){var s=c.value;t.worldToNDC(s.position,i);var l=t.ndcToScreenPoint(i),f=Object(rn.a)(s);a.push(on({},f,{position:(new at.a).copy(s.position),screenPosition:l}))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return a},cn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sn=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},ln=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},fn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="LABEL_GET",n}return cn(n,t),n}(l.a),pn=function(t,n,e){n.addBinding(fn,function(){return sn(void 0,void 0,void 0,function(){return ln(this,function(n){return[2,Promise.all([t.waitForModule(S.qb),t.market.waitForData(en.a)]).then(function(t){return un(t[0],t[1])})]})})}),e.addCommandToInterface({version:"3.x",namespace:"Label",name:"getData",args:[]},function(){return new fn})};!function(t){t.VISIBILITY_CHANGED="label.visibilitychange",t.POSITION_UPDATED="label.positionupdated"}(Xt||(Xt={}));var dn,hn=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,a=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},yn=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"Label",name:"Event",values:Xt}),Promise.all([t.waitForModule(S.qb),t.market.waitForData(en.a),t.market.waitForData(Z.a)]).then(function(e){var r=hn(e,3),o=r[0],a=r[1],i=r[2],u=function(t){if(i.currentMode===Tt.a.Floorplan)return[un(o,a)]};t.market.onDataUpdate(Q.a,function(t){return n.broadcast(Xt.POSITION_UPDATED,t,u)})})},vn=e(380),bn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mn=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},wn=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},gn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="MEASUREMENTS_GET",n}return bn(n,t),n}(l.a),xn=function(t,n,e){n.addBinding(gn,function(){return mn(void 0,void 0,void 0,function(){return wn(this,function(n){return[2,t.market.waitForData(vn.a).then(function(t){return _n(t)})]})})}),e.addCommandToInterface({version:"3.x",namespace:"Measurements",name:"getData",args:[]},function(){return new gn})},_n=function(t){return mn(void 0,void 0,void 0,function(){var n;return wn(this,function(e){return n=[],t.iterate(function(t){n.push({sid:t.sid,label:t.text,floor:t.floor,start:{x:t.start_position.x,y:t.start_position.y,z:t.start_position.z},end:{x:t.end_position.x,y:t.end_position.y,z:t.end_position.z}})}),[2,n]})})};!function(t){t.HOVER="tag.hover",t.CLICK="tag.click"}(dn||(dn={}));var On,Tn=e(381),Pn=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Sn=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},jn=function(t,n){return Pn(void 0,void 0,void 0,function(){return Sn(this,function(e){return n.addEnumToInterface({version:"3.x",namespace:"Mattertag",name:"Event",values:dn}),t.waitForModule(S.qb).then(function(e){var r=["",!1],o=function(t){return r[0]=t.sid,r[1]=t.hovering,r};t.subscribe(Tn.c,function(t){n.broadcast(dn.HOVER,t,o)});var a=[""],i=function(t){return a[0]=t.sid,a};t.subscribe(Tn.a,function(t){n.broadcast(dn.CLICK,t,i)})}),[2]})})},En=e(515),An=e(454),kn=e(516),Dn=e(514),In=e(353);!function(t){t.LABEL="label",t.DESCRIPTION="description",t.MEDIA_SRC="mediaSrc"}(On||(On={}));var Cn,Mn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fn=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Nn=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Gn=function(t){function n(n,e,r){var o=t.call(this)||this;return o.id="FILTER_MATTERTAGS",o.payload={search:n,category:e,matchCase:r},o}return Mn(n,t),n}(l.a),Rn=function(t,n,e){return Fn(void 0,void 0,void 0,function(){var e=this;return Nn(this,function(r){return t.market.waitForData(In.a).then(function(t){n.addBinding(Gn,function(n){return Fn(e,void 0,Promise,function(){var e;return Nn(this,function(r){return function(t){if("string"!=typeof t.search)throw new Error("Cannot filter without a valid search string");if(t.category&&!B(On,t.category))throw new Error("Cannot filter an incorrect category")}(n),e=[],t.iterate(function(t){n.matchCase||(n.search=n.search.toLowerCase());var r=!1;[On.LABEL,On.DESCRIPTION,On.MEDIA_SRC].forEach(function(o){if(!(n.category&&n.category!==o||r)){var a=t[o];n.matchCase||(a=a.toLowerCase()),a.includes(n.search)&&(r=!0,e.push(t.sid))}})}),[2,e]})})})}),[2]})})},zn=e(347),Ln=e(383);!function(t){t.CHANGE_START="viewmode.changestart",t.CHANGE_END="viewmode.changeend"}(Cn||(Cn={}));var Hn,Un=e(412),Bn=e(405),Wn=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,a=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},Vn=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"Mode",name:"Event",values:Cn}),Promise.all([t.market.waitForData(nt.a),t.waitForModule(S.pb)]).then(function(e){var r=Wn(e,2),o=r[0],a=r[1],i=[void 0,void 0],u=function(t){var n=a.currentMode,e=Object(Bn.b)(o,t.fromSweep),r=Object(Bn.b)(o,t.toSweep);if(e!==r)return i[0]=Object(bt.d)(n,e),i[1]=Object(bt.d)(n,r),i};t.subscribe(Un.a,function(t){return n.broadcast(Cn.CHANGE_END,t,u)});var c=[void 0,void 0],s=function(t){var n=Object(Bn.a)(o);return c[0]=Object(bt.d)(t.fromMode,n),c[1]=Object(bt.d)(t.toMode,n),c};t.subscribe(zn.a,function(t){return n.broadcast(Cn.CHANGE_START,t,s)});var l=[void 0,void 0],f=function(t){var n=Object(Bn.a)(o);return l[0]=Object(bt.d)(t.fromMode,n),l[1]=Object(bt.d)(t.toMode,n),l};t.subscribe(Ln.a,function(t){return n.broadcast(Cn.CHANGE_END,t,f)})})},qn=e(147),Yn=e(39),Jn=e(603),Kn=e(80),Qn=function(t){return!!t&&(t instanceof at.a||!!("object"==typeof t&&"x"in t&&"y"in t&&"z"in t&&Xn(t.x)&&Xn(t.y)&&Xn(t.z)))},Xn=function(t){if(null==t||isNaN(t))return!1;if("number"==typeof t)return!0;var n=parseFloat(t);return!isNaN(n)&&"number"==typeof n},Zn=e(82),$n=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),te=function(){return(te=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},ne=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},ee=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},re=function(t){function n(n){var e=t.call(this)||this;return e.id="MOVE_TO_MODE",e.validateMoveToModeInput=function(t){if(!t)throw Error("Mode.moveTo -> no arguments provided -- mode is required");t.options||(t.options={});var n=t.mode;if(!B(X.b,t.mode)&&void 0===(n=Object(bt.b)(t.mode)))throw Error("Mode.moveTo -> "+t.mode+" is not a valid viewmode");if(n===X.b.TRANSITIONING)throw Error("Mode.moveTo -> "+t.mode+" is not a valid viewmode");t.options&&t.options.rotation&&(t.options.rotation.z=t.options.rotation.z||0);var r=e.validateOptions(t.options);return{mode:n,options:{transition:r.transition,position:r.position,rotation:r.rotation,zoom:r.zoom}}},e.validateOptions=function(t){var n,e,r,o;if(t){if(t.transition&&void 0===(r=Object(qn.a)(t.transition)))throw Error("Mode.moveTo -> "+t.transition+" is not a valid transition style");t.rotation&&Qn(t.rotation)&&(n=Object(Kn.a)(t.rotation)),t.position&&Qn(t.position)&&(e=new at.a(t.position.x,t.position.y,t.position.z)),t.zoom&&!isNaN(t.zoom)&&(o=Object(it.f)(t.zoom,1,30))}return{rotation:n,position:e,transition:r,zoom:o}},e.payload=te({},e.validateMoveToModeInput(n)),e}return $n(n,t),n}(l.a),oe=function(t,n,e){n.addBinding(re,function(t){return ne(void 0,void 0,void 0,function(){var e,r,o;return ee(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=Yn.a.Interpolate,void 0===(r=t.options.transition)||isNaN(r)||(e=r),[4,n.issueCommand(new X.a(t.mode,e,{position:t.options.position,rotation:t.options.rotation,zoom:t.options.zoom}))];case 1:return a.sent(),[2,t.mode];case 2:if(o=a.sent(),Object(Zn.c)(o,o instanceof Jn.a?"Mode.moveTo -> Cannot move to "+t.mode+" during a mode transition":"Mode.moveTo -> Could not move to "+t.mode),o instanceof Jn.a)throw Error("Mode.moveTo -> Cannot move to "+t.mode+" during a mode transition");throw Error("Mode.moveTo -> Could not move to "+t.mode);case 3:return[2]}})})}),e.addCommandToInterface({version:"3.x",namespace:"Mode",name:"moveTo",args:["mode","options"]},function(t){return new re(t)}),e.addEnumToInterface({version:"3.x",namespace:"Mode",name:"Mode",values:X.b}),e.addEnumToInterface({version:"3.x",namespace:"Mode",name:"TransitionType",values:qn.c}),e.addCommandToInterface(E.moveToModeInterface,function(t){return new re(t)}),e.addEnumToInterface(j.modesInterface)},ae=e(167),ie=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ue=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},ce=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},se=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="GET_MODEL_DATA",n}return ie(n,t),n}(l.a),le=function(t,n,e){var r={sid:"",sweeps:[],modelSupportsVr:!1};n.addBinding(se,function(){return ue(void 0,void 0,void 0,function(){var n,e;return ce(this,function(o){switch(o.label){case 0:return[4,t.waitForModule(S.U)];case 1:return n=o.sent(),[4,t.market.waitForData(nt.a)];case 2:return e=o.sent(),[2,fe(n,r,e)]}})})}),e.addCommandToInterface({version:"3.x",namespace:"Model",name:"getData",args:[]},function(){return new se})},fe=function(t,n,e){return ue(void 0,void 0,void 0,function(){var r,o;return ce(this,function(a){try{return r=e.getSweepList(),o=t.getModel(),[2,Object(ae.b)(o.sid,o.vrSupported,r,n)]}catch(t){throw Error("no model currently loaded")}return[2]})})},pe=e(150),de=e(59),he=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ye=function(){return(ye=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},ve=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},be=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},me=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="GET_MODEL_DETAILS",n}return he(n,t),n}(l.a),we=function(t,n,e){Promise.all([t.waitForModule(S.U),t.market.waitForData(de.a)]).then(function(t){return n.addBinding(me,function(){return ve(void 0,void 0,void 0,function(){return be(this,function(n){return[2,ge(t[0],t[1])]})})})}),e.addCommandToInterface({version:"3.x",namespace:"Model",name:"getDetails",args:[]},function(){return new me})},ge=function(t,n){return ve(void 0,void 0,void 0,function(){var e,r;return be(this,function(o){return e=t.getModel(),r={},n.tryGetProperty(pe.a.DetailsModelName,!0)&&(r=ye({},r,{name:e.data.name})),n.tryGetProperty(pe.a.PresentedBy,!0)&&(r=ye({},r,{presentedBy:e.data.presented_by})),n.tryGetProperty(pe.a.DetailsSummary,!0)&&(r=ye({},r,{summary:e.data.summary})),n.tryGetProperty(pe.a.DetailsAddress,!0)&&(r=ye({},r,{address:e.data.address,formattedAddress:xe(e.data.address)})),n.tryGetProperty(pe.a.DetailsEmail,!0)&&(r=ye({},r,{contactEmail:e.data.contact_email})),n.tryGetProperty(pe.a.DetailsName,!0)&&(r=ye({},r,{contactName:e.data.contact_name})),n.tryGetProperty(pe.a.DetailsPhone,!0)&&(r=ye({},r,{phone:e.data.contact_phone,formattedContactPhone:e.data.formatted_contact_phone})),n.tryGetProperty(pe.a.DetailsShareUrl,!0)&&(r=ye({},r,{shareUrl:e.data.external_url})),[2,ye({},r,{sid:e.data.sid})]})})},xe=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return""}if(!(t&&(t.address_1||t.address_2||t.city||t.state||t.zip)))return"";var n=[];return t.address_1&&n.push(t.address_1),t.address_2&&n.push(t.address_2),t.city&&(n.length>0&&n.push(", "),n.push(t.city)),t.state&&(n.length>0&&n.push(", "),n.push(t.state)),t.zip&&(n.length>0&&n.push(", "),n.push(t.zip)),n.join("")},_e=e(624);!function(t){t.MODEL_LOADED="model.loaded"}(Hn||(Hn={}));var Oe,Te=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"Model",name:"Event",values:Hn});var e={sid:"",sweeps:[],modelSupportsVr:!1},r=[e],o=function(t){return Object(ae.b)(t.sid,t.vrSupported,t.sweepList,e),r};t.subscribe(_e.a,function(t){n.broadcast(Hn.MODEL_LOADED,t,o),Object(ae.a)(t.urls,t.sid,t.vrSupported,t.sweepList).then(function(t){n.broadcast($.a.MODEL_LOADED,[t],function(t){return{metadata:t[0]}},!0)})})},Pe=e(61),Se=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),je=function(t){function n(n,e){var r=t.call(this)||this;return r.payload={key:n,value:e},r}return Se(n,t),n.id="SETTING_UPDATE",n}(l.a),Ee=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Ae=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ke=function(t,n,e){t.commandBinder.addBinding(je,function(n){return Ee(void 0,void 0,void 0,function(){var e;return Ae(this,function(r){switch(r.label){case 0:if(!n.key||"string"!=typeof n.key)throw Error("Settings: invalid key");return[4,t.waitForModule(Pe.default)];case 1:return(e=r.sent()).updateSetting(n.key,n.value),[2,e.tryGetProperty(n.key,void 0)]}})})}),e.addCommandToInterface({version:"3.x",namespace:"Settings",name:"update",args:["key","value"]},function(t){return new je(t.key,t.value)})},De=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ie=function(t){function n(n){var e=t.call(this)||this;return e.payload={key:n},e}return De(n,t),n.id="SETTING_GET",n}(l.a),Ce=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Me=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Fe=function(t,n,e){t.commandBinder.addBinding(Ie,function(n){return Ce(void 0,void 0,void 0,function(){return Me(this,function(e){switch(e.label){case 0:return[4,t.waitForModule(Pe.default)];case 1:return[2,e.sent().tryGetProperty(n.key,void 0)]}})})}),e.addCommandToInterface({version:"3.x",namespace:"Settings",name:"get",args:["key"]},function(t){return new Ie(t.key)})};!function(t){t.ENTER="sweep.enter",t.EXIT="sweep.exit"}(Oe||(Oe={}));var Ne,Ge=e(384),Re=function(t,n){var e;n.addEnumToInterface({version:"3.x",namespace:"Sweep",name:"Event",values:Oe});var r=[""],o=function(){return r[0]=e,r};t.subscribe(Ge.a,function(t){t.fromSweep&&t.fromSweep!==t.toSweep&&n.broadcast(Oe.EXIT,t,o)}),t.subscribe(zn.a,function(t){t.fromMode===Tt.a.Panorama&&t.toMode!==Tt.a.Panorama&&n.broadcast(Oe.EXIT,t,o)});var a=["",""],i=function(t){return a[0]=t.fromSweep,a[1]=t.toSweep,a},u={},c=function(t){return u.oldPano=t.fromSweep,u.newPano=t.toSweep,u};t.subscribe(Un.a,function(t){e=t.toSweep,n.broadcast(Oe.ENTER,t,i),n.broadcast($.a.ENTER_PANO,t,c,!0)})},ze=e(115),Le=e(458),He=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Ue=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Be=function(t,n,e){We(t);e.addEnumToInterface({version:"3.x",namespace:"Sweep",name:"Transition",values:qn.c}),e.addCommandToInterface({version:"3.x",namespace:"Sweep",name:"moveTo",args:["sweep","options"]},function(t){return(t=t||{}).options=t.options||{},new ze.a({sweep:t.sweep||"",rotation:Ve(t.options.rotation)||void 0,transition:t.options.transition})}),e.addCommandToInterface(E.moveToPanoInterface,function(t){return t=t||{},new ze.a({sweep:t.pano||"",rotation:Ve(t.rotation)||void 0,transition:t.transition})}),e.addEnumToInterface(j.transitionTypesInterface)},We=function(t){t.commandBinder.addBinding(ze.a,function(n){return He(void 0,void 0,void 0,function(){var e,r,o,a,i,u;return Ue(this,function(c){switch(c.label){case 0:return[4,t.waitForModule(S.Wa)];case 1:return e=c.sent(),[4,t.market.waitForData(nt.a)];case 2:return r=c.sent(),[4,t.market.waitForData(de.a)];case 3:return o=c.sent(),[4,t.waitForModule(S.pb)];case 4:if(a=c.sent(),i=o.tryGetProperty(Le.a,Yn.a.Interpolate),!n.sweep)throw Error("Sweep.moveTo -> no sweep specified");if(void 0===n.transition)u=i;else if(void 0===(u=Object(qn.a)(n.transition)))throw Error("Sweep.moveTo -> "+n.transition+" is not a valid transition style");return[4,a.currentMode!==Tt.a.Panorama?a.switchToMode(Tt.a.Panorama,u,{sweepID:n.sweep,rotation:n.rotation}):e.moveToSweep({transitionType:u,sweepId:n.sweep,rotation:n.rotation})];case 5:return c.sent(),[2,r.currentSweep]}})})})},Ve=function(t){if(t){t.z=t.z||0;var n=Object(Kn.a)(t);if(isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||isNaN(n.w)){var e="{ "+t.x+", "+t.y+", "+t.z+" }";throw Error("Sweep.moveTo -> "+e+" is not a valid rotation")}return n}},qe=e(41);!function(t){t.STARTED="tour.started",t.STOPPED="tour.stopped",t.ENDED="tour.ended",t.STEPPED="tour.stepped"}(Ne||(Ne={}));var Ye,Je=e(365),Ke=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"Tour",name:"Event",values:Ne}),t.subscribe(Je.c,function(){return n.broadcast(Ne.STARTED)}),t.subscribe(Je.f,function(){return n.broadcast(Ne.STOPPED)}),t.subscribe(Je.a,function(){return n.broadcast(Ne.ENDED)});var e=[-1],r=function(t){return e[0]=t.index,e};t.subscribe(Je.d,function(t){return n.broadcast(Ne.STEPPED,t,r)})},Qe=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xe=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},Ze=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},$e=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="WEBVR_PRELOAD",n}return Qe(n,t),n}(l.a),tr=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="WEBVR_PRESENT",n}return Qe(n,t),n}(l.a),nr=function(t,n,e){t.waitForModule(S.sb).then(function(t){n.addBinding($e,function(){return Xe(void 0,void 0,void 0,function(){return Ze(this,function(n){return[2,function(t){return Xe(void 0,void 0,void 0,function(){return Ze(this,function(n){return t.hackLoadVrScript(),[2]})})}(t)]})})}),n.addBinding(tr,function(){return Xe(void 0,void 0,void 0,function(){return Ze(this,function(n){return[2,function(t){return Xe(void 0,void 0,void 0,function(){return Ze(this,function(n){switch(n.label){case 0:return[4,t.hackEnterVrMode()];case 1:return n.sent(),[2]}})})}(t)]})})})}),e.addCommandToInterface({version:"3.x",namespace:"VR",name:"preloadVr",args:[]},function(){return new $e}),e.addCommandToInterface({version:"3.x",namespace:"VR",name:"presentVr",args:[]},function(){return new tr})},er=e(617),rr=function(t,n){n.addEnumToInterface({version:"3.x",namespace:"Stat",name:"Event",values:er.a})},or=e(402),ar=e(368),ir=e(438);!function(t){t.NONE="intersectedobject.none",t.MODEL="intersectedobject.model",t.TAG="intersectedobject.tag",t.UNKNOWN="intersectedobject.unknown"}(Ye||(Ye={}));var ur=function(t,n){var e=yt.create(function(){return Promise.all([t.market.waitForData(or.b)])},function(n){return t.market.onDataUpdate(or.b,n)},cr);n.addEnumToInterface({version:"3.1",namespace:"Pointer",name:"",values:Ye}),n.addObservableToInterface({version:"3.1",namespace:"Pointer",name:"pointer"},e)},cr=function(){function t(){this._data={position:{x:0,y:0,z:0},normal:{x:0,y:0,z:0},object:Ye.NONE}}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){var n=t.data.position,e=this.data.position,r=t.data.normal,o=this.data.normal;return Object(it.e)(n.x,e.x,1e-5)&&Object(it.e)(n.y,e.y,1e-5)&&Object(it.e)(n.z,e.z,1e-5)&&Object(it.e)(r.x,o.x,1e-5)&&Object(it.e)(r.y,o.y,1e-5)&&Object(it.e)(r.z,o.z,1e-5)&&t.data.object===this.data.object},t.prototype.copy=function(t){this.data.position.x=t.data.position.x,this.data.position.y=t.data.position.y,this.data.position.z=t.data.position.z,this.data.normal.x=t.data.normal.x,this.data.normal.y=t.data.normal.y,this.data.normal.z=t.data.normal.z,this.data.object=t.data.object},t.prototype.update=function(t){var n=t.hit;n?(this.data.position.x=n.point.x,this.data.position.y=n.point.y,this.data.position.z=n.point.z,this.data.normal.x=n.face.normal.x,this.data.normal.y=n.face.normal.y,this.data.normal.z=n.face.normal.z,n.object instanceof ar.a?this.data.object=Ye.MODEL:n.object instanceof ir.a?this.data.object=Ye.TAG:this.data.object=Ye.UNKNOWN):(this.data.position.x=0,this.data.position.y=0,this.data.position.z=0,this.data.normal.x=0,this.data.normal.y=0,this.data.normal.z=0,this.data.object=Ye.NONE)},t}();e.d(n,"bindSdkInterface",function(){return lr});var sr=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},lr=function(t,n,e){var r,o,a,i,l,f,p=[s.b,v,_,oe,M.b,le,qe.e,we,xn,En.b,An.b,kn.b,Rn,Dn.b,Be,gt.c,Ct,Gt,J,z,ct,I,Wt,Qt,nn.b,pn,nr,ke,Fe];try{for(var d=sr(p),h=d.next();!h.done;h=d.next()){(0,h.value)(t,n,e)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var y=[u,c,Ke,Vn,Te,jn,Re,rt,tn,yn,rr];try{for(var b=sr(y),m=b.next();!m.done;m=b.next()){(0,m.value)(t,e)}}catch(t){a={error:t}}finally{try{m&&!m.done&&(i=b.return)&&i.call(b)}finally{if(a)throw a.error}}var w=[mt,ur];try{for(var g=sr(w),x=g.next();!x.done;x=g.next()){(0,x.value)(t,e)}}catch(t){l={error:t}}finally{try{x&&!x.done&&(f=g.return)&&f.call(g)}finally{if(l)throw l.error}}}},324:function(t,n,e){"use strict";e.d(n,"a",function(){return l});var r,o=e(42),a=e(146),i=e(93),u=e(21),c=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),s=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},l=function(t){function n(n){var e=t.call(this)||this;return e.floors=n,e.floorNames=new o.a,e.currentFloor=-1,e.getHighestVisibleFloor=function(){return e.currentFloor>-1?e.currentFloor:e.totalFloors-1},e.getViewData=function(t){var n=e.floors.getFloor(t),r=e.derivedData[t];return n&&!r&&e.makeViewData&&(e.derivedData[t]=e.makeViewData(n)),e.derivedData[t]},e.raycastGroups=function(t){var n,r,o=[],a=-1===e.currentFloor,i=e.floors.getCollection();try{for(var u=s(i),c=u.next();!c.done;c=u.next()){var l=c.value,f=l.floorIndex===e.currentFloor;(t||a||f)&&o.push(l.colliderGroupName)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return o},e.viewdataChangeHandlers=[],e.derivedData={},e.currentFloor=-1,e.transition={from:-1,to:-1,progress:new a.a(0),promise:Promise.resolve()},e}return c(n,t),Object.defineProperty(n.prototype,"totalFloors",{get:function(){return this.floors.getFloorCount()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"highestVisibleFloor",{get:function(){return this.getHighestVisibleFloor},enumerable:!0,configurable:!0}),n.prototype.update=function(t){this.floors=t.floors,this.viewdataChangeHandlers=t.viewdataChangeHandlers,this.derivedData=t.derivedData,this.currentFloor=t.currentFloor,this.transition=t.transition,this.floorNames=t.floorNames,this.makeViewData=t.makeViewData,this.getFloorMax=t.getFloorMax,this.getFloorMin=t.getFloorMin,this.moveToFloor=t.moveToFloor},n.prototype.setViewDataFactory=function(t){this.makeViewData=t},n.prototype.getFloorNames=function(){var t=[];for(var n in this.derivedData)t.push(this.derivedData[n].name);return t},n.prototype.initialize=function(){},n.prototype.dispose=function(){},n.prototype.notifyOnChanged=function(){var t,n;try{for(var e=s(this.viewdataChangeHandlers),r=e.next();!r.done;r=e.next()){(0,r.value)()}}catch(n){t={error:n}}finally{try{r&&!r.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}},n.prototype.onViewDataChanged=function(t,n){var e=this;void 0===n&&(n=!1);var r={renew:function(){e.viewdataChangeHandlers.push(t)},cancel:function(){Object(i.a)(e.viewdataChangeHandlers,t)}};return n&&r.renew(),r},n.prototype.getFloorsVisibility=function(){if(-1===this.currentFloor)return[];for(var t=[],n=0;n<this.totalFloors;n++)t[n]=n===this.currentFloor?1:0;return t},n}(u.a)},325:function(t,n,e){"use strict";e.d(n,"a",function(){return s});var r=e(337),o=e(309),a=e(17),i=e(91),u=e(148),c=0;function s(t,n,e,r,l,f,p,d,h,y){Object.defineProperty(this,"id",{value:c++}),this.uuid=a.a.generateUUID(),this.name="",this.image=void 0!==t?t:s.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==n?n:s.DEFAULT_MAPPING,this.wrapS=void 0!==e?e:o.j,this.wrapT=void 0!==r?r:o.j,this.magFilter=void 0!==l?l:o.L,this.minFilter=void 0!==f?f:o.M,this.anisotropy=void 0!==h?h:1,this.format=void 0!==p?p:o.Pa,this.type=void 0!==d?d:o.Hb,this.offset=new i.a(0,0),this.repeat=new i.a(1,1),this.center=new i.a(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new u.a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==y?y:o.K,this.version=0,this.onUpdate=null}s.DEFAULT_IMAGE=void 0,s.DEFAULT_MAPPING=o.Fb,s.prototype=Object.assign(Object.create(r.a.prototype),{constructor:s,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=a.a.generateUUID()),n||void 0!==t.images[r.uuid]||(t.images[r.uuid]={uuid:r.uuid,url:function(t){var n;if(t instanceof HTMLCanvasElement)n=t;else{(n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,n.height=t.height;var e=n.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height)}return n.width>2048||n.height>2048?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png")}(r)}),e.image=r.uuid}return n||(t.textures[this.uuid]=e),e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===o.Fb){if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case o.tb:t.x=t.x-Math.floor(t.x);break;case o.j:t.x=t.x<0?0:1;break;case o.T:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case o.tb:t.y=t.y-Math.floor(t.y);break;case o.j:t.y=t.y<0?0:1;break;case o.T:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(s.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}})},336:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var r,o=e(21),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e){var r=t.call(this)||this;r.x=0,r.y=0,r.width=n||0,r.height=e||0;var o=r.width/r.height;return r.aspectRatio=isFinite(o)?o:1,r}return a(n,t),n.prototype.update=function(t){this.width=t.width,this.height=t.height,this.aspectRatio=t.width/t.height,this.x=t.x,this.y=t.y},n}(o.a)},339:function(t,n,e){"use strict";e.d(n,"f",function(){return o}),e.d(n,"d",function(){return a}),e.d(n,"e",function(){return i}),e.d(n,"a",function(){return u}),e.d(n,"c",function(){return s}),e.d(n,"b",function(){return l});e(91);var r=e(1),o=function(t,n,e){void 0===e&&(e=0);var r=[0,0,0,e];return n.toArray(r),t.fromArray(r),t},a=function(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z},i=function(t,n){t.x=n.x,t.y=n.y,t.z=n.z},u=function(t,n){return n?n.set(t.x,t.y,t.z):c(t)},c=function(t){return new r.a(t.x,t.y,t.z)},s=function(t,n){var e=t.x-n.x,r=t.y-n.y,o=t.z-n.z;return Math.sqrt(e*e+r*r+o*o)},l=function(t,n){var e=t.x-n.x,r=t.y-n.y;return Math.sqrt(e*e+r*r)}},348:function(t,n,e){"use strict";var r,o=e(34),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e){var r=t.call(this)||this;return r.fromSweep=e,r.toSweep=n,r.timestamp=Date.now(),r}return a(n,t),n}(o.a);n.a=i},353:function(t,n,e){"use strict";e.d(n,"a",function(){return l});var r,o=e(21),a=e(156),i=e(114),u=e(47),c=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),s=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},l=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.tags=Object(i.a)(),n}return c(n,t),n.prototype.update=function(t){this.copy(t)},n.prototype.clear=function(){var t,n;try{for(var e=s(this.tags),r=e.next();!r.done;r=e.next()){var o=r.value;this.removeTag(o.sid)}}catch(n){t={error:n}}finally{try{r&&!r.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}},n.prototype.clone=function(){return(new n).copy(this)},n.prototype.copy=function(t){return n.copyTagCollection(this,t),this},n.copyTagCollection=function(t,n){var e,r,o,a,i=t.tags,u=n.tags;try{for(var c=s(i.keys),l=c.next();!l.done;l=c.next()){var f=l.value;u.has(f)||t.removeTag(f)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}try{for(var p=s(u),d=p.next();!d.done;d=p.next()){var h=d.value;t.addTag(h)}}catch(t){o={error:t}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}},n.copyTag=function(t,n){var e,r;t.anchorNormal.copy(n.anchorNormal),t.anchorPosition.copy(n.anchorPosition),t.color.copy(n.color),t.created.setTime(n.created.getTime()),t.description=n.description.slice(),t.enabled=n.enabled,t.floorIndex=n.floorIndex,t.isActive=n.isActive,t.label=n.label.slice(),t.mediaSrc=n.mediaSrc.slice(),t.mediaType=n.mediaType.slice(),t.modified.setTime(n.modified.getTime()),t.sid=n.sid.slice(),t.stemVector.copy(n.stemVector),t.stemVisible=n.stemVisible,t.parsedDescription=[];try{for(var o=s(n.parsedDescription),a=o.next();!a.done;a=o.next()){var i=a.value;t.parsedDescription.push({link:i.link&&{label:i.link.label.slice(),url:i.link.url.slice(),type:i.link.type,navigationData:i.link.navigationData&&{floorVisibility:i.link.navigationData.floorVisibility,mode:i.link.navigationData.mode,panoId:i.link.navigationData.panoId&&i.link.navigationData.panoId.slice(),position:i.link.navigationData.position.clone(),quaternion:i.link.navigationData.quaternion.clone(),zoom:i.link.navigationData.zoom}},text:i.text&&i.text.slice(),type:i.type})}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return t},n.cloneTag=function(t){var e=n.copyTag(new a.a,t);return e.anchorNormal=Object(u.a)(e.anchorNormal),e.anchorPosition=Object(u.a)(e.anchorPosition),e.color=Object(u.a)(e.color),e.stemVector=Object(u.a)(e.stemVector),Object(u.a)(e)},Object.defineProperty(n.prototype,"collection",{get:function(){return this.tags},enumerable:!0,configurable:!0}),n.prototype.addTag=function(t){this.tags.has(t.sid)?n.copyTag(this.tags.get(t.sid),t):this.tags.set(t.sid,n.cloneTag(t))},n.prototype.removeTag=function(t){return this.tags.delete(t)},n.prototype.getTag=function(t){return this.tags.get(t)},n.prototype.getTagList=function(){return this.tags.keys},n.prototype.getTagCount=function(){return this.tags.length},n.prototype.iterate=function(t){var n,e;try{for(var r=s(this.tags),o=r.next();!o.done;o=r.next()){t(o.value)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}},n}(o.a)},368:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var r,o=e(322),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n}(o.a)},380:function(t,n,e){"use strict";e.d(n,"c",function(){return d}),e.d(n,"b",function(){return h}),e.d(n,"a",function(){return y});var r,o=e(1),a=e(21),i=e(116),u=e(114),c=e(47),s=e(14),l=e(339),f=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),p=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},d=function(t){var n=Object(u.a)();for(var e in t){var r=h(t[e]);n.set(e,r)}return Object(c.a)(new y(n))},h=function(t){return t?Object(c.a)({type:t.type,sid:t.sid,text:t.text,visible:t.visible,created:t.created,created_by:t.created_by,modified:t.modified,floor:t.floor,start_position:Object(c.a)(new o.a(t.start_position.x,t.start_position.y,t.start_position.z)),end_position:Object(c.a)(new o.a(t.end_position.x,t.end_position.y,t.end_position.z)),start_normal:Object(c.a)(new o.a(t.start_normal.x,t.start_normal.y,t.start_normal.z)),end_normal:Object(c.a)(new o.a(t.end_normal.x,t.end_normal.y,t.end_normal.z)),version:"3.1"}):Object(c.a)({type:i.b.TwoD,start_position:Object(c.a)(new o.a),end_position:Object(c.a)(new o.a),sid:"",text:"",visible:!1,created:new Date,created_by:"",modified:new Date,version:"3.1",start_normal:Object(c.a)(new o.a),end_normal:Object(c.a)(new o.a),floor:-1})},y=function(t){function n(n){var e,r,o=t.call(this)||this;if(o.map=Object(u.a)(),n)try{for(var a=p(n),i=a.next();!i.done;i=a.next()){var c=i.value;o.map.set(c.sid,c)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return o}return f(n,t),n.prototype.get=function(t){return this.map.get(t)},n.prototype.add=function(t){for(var n=t.sid;!n||this.map.has(n);)n=Object(s.l)(11);t.sid=n,this.map.set(n,t)},n.prototype.remove=function(t){return!!this.map.has(t)&&(this.map.delete(t),!0)},n.prototype.clear=function(){var t,n;try{for(var e=p(this.map.keys),r=e.next();!r.done;r=e.next()){var o=r.value;this.map.delete(o)}}catch(n){t={error:n}}finally{try{r&&!r.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}},Object.defineProperty(n.prototype,"length",{get:function(){return this.map.length},enumerable:!0,configurable:!0}),n.prototype.getCollection=function(){return this.map},n.prototype.setVisibility=function(t){if(this.map.has(t)){var n=this.map.get(t);return n.visible=!n.visible,!0}return!1},n.prototype.rename=function(t,n){return!!this.map.has(t)&&(this.map.get(t).text=n,!0)},n.prototype.update=function(t){this.copy(t)},n.prototype.iterate=function(t){var n,e;try{for(var r=p(this.map),o=r.next();!o.done;o=r.next()){t(o.value)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}},n.prototype.isEqual=function(t){var n,e;if(this.map.length!==t.map.length)return!1;try{for(var r=p(this.map),o=r.next();!o.done;o=r.next()){var a=o.value,i=t.map.get(a.sid);if(!i||!this.measurementsAreEqual(a,i))return!1}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return!0},n.prototype.measurementsAreEqual=function(t,n,e){void 0===e&&(e=!1);var r=Object(l.d)(t.end_normal,n.end_normal),o=Object(l.d)(t.start_normal,n.start_normal),a=Object(l.d)(t.start_position,n.start_position),i=Object(l.d)(t.end_position,n.end_position);if(e){if(t.created.toUTCString()!==n.created.toUTCString())return!1;if(t.modified.toUTCString()!==n.modified.toUTCString())return!1}return t.type===n.type&&r&&o&&a&&i&&t.sid===n.sid&&t.text===n.text&&t.visible===n.visible&&t.floor===n.floor},n.prototype.copy=function(t){var n,e;this.map=Object(u.a)();try{for(var r=p(t.map),o=r.next();!o.done;o=r.next()){var a=o.value,i=h(a);this.map.set(i.sid,i)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return this},n.prototype.clone=function(){return(new n).copy(this)},n}(a.a)},381:function(t,n,e){"use strict";e.d(n,"c",function(){return i}),e.d(n,"d",function(){return u}),e.d(n,"a",function(){return c}),e.d(n,"b",function(){return s}),e.d(n,"e",function(){return l});var r,o=e(34),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e){var r=t.call(this)||this;return r.sid=n,r.hovering=e,r}return a(n,t),n}(o.a),u=function(t){function n(n){var e=t.call(this)||this;return e.sid=n,e}return a(n,t),n}(o.a),c=function(t){function n(n){var e=t.call(this)||this;return e.sid=n,e}return a(n,t),n}(o.a),s=function(t){function n(n){var e=t.call(this)||this;return e.extUrl=n,e}return a(n,t),n}(o.a),l=function(t){function n(n,e){var r=t.call(this)||this;return r.sid=n,r.view=e,r}return a(n,t),n}(o.a)},384:function(t,n,e){"use strict";var r,o=e(348),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n}(o.a);n.a=i},389:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var r=e(325),o=e(309);function a(t,n,e,a,i,u,c,s,l,f){t=void 0!==t?t:[],n=void 0!==n?n:o.k,r.a.call(this,t,n,e,a,i,u,c,s,l,f),this.flipY=!1}a.prototype=Object.create(r.a.prototype),a.prototype.constructor=a,a.prototype.isCubeTexture=!0,Object.defineProperty(a.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}})},396:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var r,o=e(34),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e){var r=t.call(this)||this;return r.floorIndex=n,r.floorName=e,r}return a(n,t),n}(o.a)},402:function(t,n,e){"use strict";e.d(n,"b",function(){return i}),e.d(n,"a",function(){return u});var r,o=e(21),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.hit=null,n}return a(n,t),n.prototype.update=function(t){this.hit=t.hit},n}(o.a),u=function(){return function(t,n,e){this.point=t,this.object=e,this.face={normal:n}}}()},403:function(t,n,e){"use strict";var r,o,a=e(389),i=e(325),u=e(3),c=e(26),s=e(14),l=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},f=new u.a("api"),p=((r={})[c.d.BASE]="low",r[c.d.STANDARD]="high",r[c.d.HIGH]="2k",r[c.d.ULTRAHIGH]="4k",r),d=((o={})[c.d.BASE]=256,o[c.d.STANDARD]=1024,o[c.d.HIGH]=2048,o[c.d.ULTRAHIGH]=4096,o),h=function(){function t(t){this.urls=t,this.sweepCubeTextures={}}return t.prototype.useTexture=function(t){var n=this.getTexture(t);if(!n)throw Error("Texture for sweep "+t+" not loaded before using");return n},t.prototype.loadFace=function(t,n,e,r){return this.loadFaceImage(t,n,e,r).then(function(t){var n=new i.a(t);return n.needsUpdate=!0,n})},t.prototype.load=function(t,n){var e=this;void 0===n&&(n=c.d.STANDARD);var r=this.sweepCubeTextures[t];if(r)return f.debug("Skipping load of pano, already loaded"),new Promise(function(t,n){t(r)});var o=[2,4,0,5,1,3].map(function(r){return e.loadFaceImage(t,n,r)}),i=Promise.all(o).then(function(n){var r=new a.a(n);return r.flipY=!1,r.needsUpdate=!0,e.sweepCubeTextures[t]=r,r});return i.catch(function(){f.error("Downloading cubemap for pano",t,"failed")}),i},t.prototype.unload=function(t){var n=this.sweepCubeTextures[t];if(!n)throw Error("Texture for sweep "+t+" not loaded before unloading");n.dispose(),this.sweepCubeTextures[t]=null},t.prototype.unloadAll=function(t){var n,e,r=Object(s.b)(t);try{for(var o=l(Object.keys(this.sweepCubeTextures)),a=o.next();!a.done;a=o.next()){var i=a.value;this.sweepCubeTextures[i]&&!r[i]&&this.unload(i)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}},t.prototype.loadFaceImage=function(t,n,e,r){var o=p[n],a=d[n],i="pan/"+o+"/"+t+"_skybox"+e+".jpg";return this.urls.getImageBitmap(i,a,a,r)},t.prototype.getTexture=function(t){return this.sweepCubeTextures[t]},t}();n.a=h},405:function(t,n,e){"use strict";e.d(n,"b",function(){return o}),e.d(n,"a",function(){return a}),e.d(n,"c",function(){return i});var r=e(22),o=function(t,n){if(!t||!n)return!1;var e=n&&t.getSweep(n);return!!e&&e.alignmentType===r.a.ALIGNED},a=function(t){return o(t,t.currentSweep)},i=function(t,n){switch(t){case r.a.ALIGNED:return 1;case r.a.UNALIGNED:return 2}switch(n){case r.b.MANUAL:return 3}return 0}},412:function(t,n,e){"use strict";var r,o=e(348),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e,r,o){var a=t.call(this,n,o)||this;return a.alignmentType=e,a.placementType=r,a}return a(n,t),n}(o.a);n.a=i},424:function(t,n,e){"use strict";e.d(n,"a",function(){return u}),e.d(n,"c",function(){return c}),e.d(n,"b",function(){return s});var r,o=e(16),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(){return(i=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},u=function(t){function n(n){var e=t.call(this)||this;return e.id="CREATE_LABEL",e.payload=i({},n),e}return a(n,t),n}(o.a),c=function(t){function n(n){var e=t.call(this)||this;return e.id="UPDATE_LABEL",e.payload=i({},n),e}return a(n,t),n}(o.a),s=function(t){function n(n){var e=t.call(this)||this;return e.id="DELETE_LABEL",e.payload={sid:n},e}return a(n,t),n}(o.a)},435:function(t,n,e){"use strict";e.d(n,"d",function(){return i}),e.d(n,"b",function(){return u}),e.d(n,"e",function(){return c}),e.d(n,"c",function(){return s}),e.d(n,"a",function(){return l});var r,o=e(16),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.id="RequestRenderTargetCommand",n}return a(n,t),n}(o.a),u=function(t){function n(n,e){var r=t.call(this)||this;return r.payload={renderTarget:n,context:e},r}return a(n,t),n}(o.a),c=function(t){function n(n,e,r){var o=t.call(this)||this;return o.payload={renderTarget:n,sceneObject:e,camera:r},o}return a(n,t),n}(o.a),s=function(t){function n(n,e,r){void 0===r&&(r=0);var o=t.call(this)||this;return o.payload={renderTarget:n,texture:e,heading:r},o}return a(n,t),n}(o.a),l=function(t){function n(n,e){var r=t.call(this)||this;return r.payload={target1:n,target2:e},r}return a(n,t),n}(o.a)},436:function(t,n,e){"use strict";e.d(n,"c",function(){return r}),e.d(n,"b",function(){return o}),e.d(n,"a",function(){return a}),e.d(n,"d",function(){return u}),e.d(n,"f",function(){return c}),e.d(n,"e",function(){return s});var r,o,a,i=e(5);!function(t){t.WEBVR="application.webvr",t.SHOWCASE="application.showcase",t.WORKSHOP="application.workshop"}(r||(r={})),function(t){t.UNINITIALIZED="appphase.uninitialized",t.WAITING="appphase.waiting",t.LOADING="appphase.loading",t.STARTING="appphase.starting",t.PLAYING="appphase.playing",t.ERROR="appphase.error"}(o||(o={})),function(t){t.PHASE_CHANGE="application.phasechange",t.APP_CHANGE="application.appchange"}(a||(a={}));var u=function(t){switch(t){case r.WEBVR:return i.b.WEBVR;case r.SHOWCASE:return i.b.SHOWCASE;case r.WORKSHOP:return i.b.WORKSHOP;default:return}},c=function(t){switch(t){case i.b.WEBVR:return r.WEBVR;case i.b.SHOWCASE:return r.SHOWCASE;case i.b.WORKSHOP:return r.WORKSHOP;default:return}},s=function(t){var n=i.a[t];if(n in o)return o[n]}},437:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var r,o=e(34),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e){var r=t.call(this)||this;return r.from=n,r.to=e,r}return a(n,t),n}(o.a)},438:function(t,n,e){"use strict";e.d(n,"a",function(){return f});var r,o=e(322),a=e(1),i=e(17),u=e(30),c=e(154),s=e(149),l=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),f=function(t){function n(n,e,r){var o=t.call(this,n,e)||this;return o.discScale=1,o.defaultColor=new u.a,o.hoverColor=new u.a,o.hsl={h:0,s:0,l:0},o.discWorldPosition=new a.a,o.cameraPosition=new a.a,o.changeColor(e.uniforms.color.value),o.layers.mask=r.mask,o.scale.set(.01,.01,.01),o}return l(n,t),n.prototype.dispose=function(){this.material.dispose(),this.geometry.dispose()},n.prototype.changeColor=function(t){this.defaultColor.set(t),this.defaultColor.getHSL(this.hsl),this.hoverColor.setHSL(this.hsl.h,this.hsl.s,.8*this.hsl.l)},n.prototype.changeMaterial=function(t){this.material=t},n.prototype.update=function(t,n,e,r){var o=t.isActive?this.hoverColor:this.defaultColor;this.material.uniforms.color.value.copy(o);var u=c.b.mattertags.disc.scale;this.getWorldPosition(this.discWorldPosition);var l=n.getWorldPosition(this.cameraPosition).distanceTo(this.discWorldPosition);this.quaternion.copy(n.quaternion);var f=u.maxSize-(u.maxSize-u.minSize)*i.a.smoothstep(l,u.nearBound,u.farBound),p=this.discWorldPosition.clone().project(n),d=new a.a(r.width/2,r.height/2,1).multiply(p),h=new a.a(f/2,0,0).add(d),y=new a.a(2/r.width,2/r.height,1).multiply(h).clone().unproject(n).clone().distanceTo(this.discWorldPosition),v=1+c.b.mattertags.disc.scale.responsiveness/100*(e-1);this.discScale=y*v;var b=i.a.clamp(this.discScale,s.a.epsilon,this.discScale);this.scale.set(b,b,b)},n}(o.a)},456:function(t,n,e){"use strict";e.d(n,"a",function(){return a}),e.d(n,"c",function(){return i}),e.d(n,"b",function(){return u}),e.d(n,"d",function(){return c});var r=e(478),o=e(14),a=function(t,n){var e=new Uint8Array(t.width*t.height*4);return t.readRenderTargetData(e),Object(r.encode)({data:e,width:t.width,height:t.height},{exif:n,quality:75,flipY:!0}).data},i=function(t){return new Blob([t],{type:"image/jpeg"})},u=function(t){return"data:image/jpg;base64,"+Object(o.n)(t)},c=function(t,n,e,r){return'http://ns.adobe.com/xap/1.0/\0<?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?><x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:GPano="http://ns.google.com/photos/1.0/panorama/"><GPano:CroppedAreaImageHeightPixels>'+n+"</GPano:CroppedAreaImageHeightPixels><GPano:CroppedAreaImageWidthPixels>"+t+"</GPano:CroppedAreaImageWidthPixels><GPano:CroppedAreaLeftPixels>0</GPano:CroppedAreaLeftPixels><GPano:CroppedAreaTopPixels>0</GPano:CroppedAreaTopPixels><GPano:FullPanoHeightPixels>"+n+"</GPano:FullPanoHeightPixels><GPano:FullPanoWidthPixels>"+t+"</GPano:FullPanoWidthPixels><GPano:ProjectionType>equirectangular</GPano:ProjectionType><GPano:UsePanoramaViewer>True</GPano:UsePanoramaViewer><GPano:InitialViewHeadingDegrees>"+e+"</GPano:InitialViewHeadingDegrees><GPano:InitialViewPitchDegrees>"+r+'</GPano:InitialViewPitchDegrees><GPano:CaptureSoftware>Matterport Camera</GPano:CaptureSoftware><GPano:StitchingSoftware>Matterport Cloud</GPano:StitchingSoftware></rdf:Description></rdf:RDF></x:xmpmeta><?xpacket end="w"?>'}},458:function(t,n,e){"use strict";e.d(n,"a",function(){return r});var r="TransitionType"},471:function(t,n,e){"use strict";e.d(n,"a",function(){return s}),e.d(n,"b",function(){return l});var r,o=e(16),a=e(324),i=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),u=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},c=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},s=function(t){function n(n){var e=t.call(this)||this;return e.id="SHOW_ALL_FLOORS",e.payload=n,e}return i(n,t),n}(o.a),l=function(t,n,e){t.market.waitForData(a.a).then(function(t){return n.addBinding(s,function(n){return u(void 0,void 0,void 0,function(){var e;return c(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e="boolean"==typeof n.moveCamera&&!n.moveCamera,[4,t.moveToFloor(-1,e)];case 1:return r.sent(),[2,t.currentFloor];case 2:throw r.sent(),Error("Could not show all floors");case 3:return[2]}})})})}),e.addCommandToInterface({version:"3.x",namespace:"Floor",name:"showAll",args:["moveCamera"]},function(t){return new s(t)})}},472:function(t,n,e){"use strict";e.d(n,"a",function(){return u});var r,o=e(16),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(){return(i=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},u=function(t){function n(n){var e=t.call(this)||this;return e.payload=i({},n),e}return a(n,t),n}(o.a)},478:function(t,n,e){(function(n){function e(t){Math.round;var e,r,o,a,i,u=Math.floor,c=new Array(64),s=new Array(64),l=new Array(64),f=new Array(64),p=new Array(65535),d=new Array(65535),h=new Array(64),y=new Array(64),v=[],b=0,m=7,w=new Array(64),g=new Array(64),x=new Array(64),_=new Array(256),O=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function C(t,n){for(var e=0,r=0,o=new Array,a=1;a<=16;a++){for(var i=1;i<=t[a];i++)o[n[r]]=[],o[n[r]][0]=e,o[n[r]][1]=a,r++,e++;e*=2}return o}function M(t){for(var n=t[0],e=t[1]-1;e>=0;)n&1<<e&&(b|=1<<m),e--,--m<0&&(255==b?(F(255),F(0)):F(b),m=7,b=0)}function F(t){v.push(t)}function N(t){F(t>>8&255),F(255&t)}function G(t){t&&(N(65505),N(t.length+2),function(t){for(var n=0,e=t.length;n<e;n++)F(t.charCodeAt(n))}(t))}function R(t,n,e,r,o){for(var a,i=o[0],u=o[240],c=function(t,n){var e,r,o,a,i,u,c,s,l,f,p=0;for(l=0;l<8;++l){e=t[p],r=t[p+1],o=t[p+2],a=t[p+3],i=t[p+4],u=t[p+5],c=t[p+6];var d=e+(s=t[p+7]),y=e-s,v=r+c,b=r-c,m=o+u,w=o-u,g=a+i,x=a-i,_=d+g,O=d-g,T=v+m,P=v-m;t[p]=_+T,t[p+4]=_-T;var S=.707106781*(P+O);t[p+2]=O+S,t[p+6]=O-S;var j=.382683433*((_=x+w)-(P=b+y)),E=.5411961*_+j,A=1.306562965*P+j,k=.707106781*(T=w+b),D=y+k,I=y-k;t[p+5]=I+E,t[p+3]=I-E,t[p+1]=D+A,t[p+7]=D-A,p+=8}for(p=0,l=0;l<8;++l){e=t[p],r=t[p+8],o=t[p+16],a=t[p+24],i=t[p+32],u=t[p+40],c=t[p+48];var C=e+(s=t[p+56]),M=e-s,F=r+c,N=r-c,G=o+u,R=o-u,z=a+i,L=a-i,H=C+z,U=C-z,B=F+G,W=F-G;t[p]=H+B,t[p+32]=H-B;var V=.707106781*(W+U);t[p+16]=U+V,t[p+48]=U-V;var q=.382683433*((H=L+R)-(W=N+M)),Y=.5411961*H+q,J=1.306562965*W+q,K=.707106781*(B=R+N),Q=M+K,X=M-K;t[p+40]=X+Y,t[p+24]=X-Y,t[p+8]=Q+J,t[p+56]=Q-J,p++}for(l=0;l<64;++l)f=t[l]*n[l],h[l]=f>0?f+.5|0:f-.5|0;return h}(t,n),s=0;s<64;++s)y[T[s]]=c[s];var l=y[0]-e;e=y[0],0==l?M(r[0]):(M(r[d[a=32767+l]]),M(p[a]));for(var f=63;f>0&&0==y[f];f--);if(0==f)return M(i),e;for(var v,b=1;b<=f;){for(var m=b;0==y[b]&&b<=f;++b);var w=b-m;if(w>=16){v=w>>4;for(var g=1;g<=v;++g)M(u);w&=15}a=32767+y[b],M(o[(w<<4)+d[a]]),M(p[a]),b++}return 63!=f&&M(i),e}function z(t){if(t<=0&&(t=1),t>100&&(t=100),i!=t){(function(t){for(var n=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],e=0;e<64;e++){var r=u((n[e]*t+50)/100);r<1?r=1:r>255&&(r=255),c[T[e]]=r}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var i=u((o[a]*t+50)/100);i<1?i=1:i>255&&(i=255),s[T[a]]=i}for(var p=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,h=0;h<8;h++)for(var y=0;y<8;y++)l[d]=1/(c[T[d]]*p[h]*p[y]*8),f[d]=1/(s[T[d]]*p[h]*p[y]*8),d++})(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),i=t}}this.encode=function(t,i){(new Date).getTime();var u=i.quality;u&&z(u),v=new Array,b=0,m=7,N(65496),N(65504),N(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),N(1),N(1),F(0),F(0),G(i.exif),function(){N(65499),N(132),F(0);for(var t=0;t<64;t++)F(c[t]);F(1);for(var n=0;n<64;n++)F(s[n])}(),function(t,n){N(65472),N(17),F(8),N(n),N(t),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(t.width,t.height),function(){N(65476),N(418),F(0);for(var t=0;t<16;t++)F(P[t+1]);for(var n=0;n<=11;n++)F(S[n]);F(16);for(var e=0;e<16;e++)F(j[e+1]);for(var r=0;r<=161;r++)F(E[r]);F(1);for(var o=0;o<16;o++)F(A[o+1]);for(var a=0;a<=11;a++)F(k[a]);F(17);for(var i=0;i<16;i++)F(D[i+1]);for(var u=0;u<=161;u++)F(I[u])}(),N(65498),N(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var p=0,d=0,h=0;b=0,m=7,this.encode.displayName="_encode_";for(var y,_,T,C,L,H,U,B,W,V=t.data,q=t.width,Y=t.height,J=i.flipY,K=4*q,Q=J?Y:0,X=J?-8:8;J&&Q>0||!J&&Q<Y;){for(y=0;y<K;){for(H=L=K*Q+y,U=-1,B=0,W=0;W<64;W++)H=L+(B=(J?63-W:W)>>3)*K+(U=4*(7&W)),Q+B>=Y&&(H-=K*(Q+1+B-Y)),y+U>=K&&(H-=y+U-K+4),_=V[H++],T=V[H++],C=V[H++],w[W]=(O[_]+O[T+256>>0]+O[C+512>>0]>>16)-128,g[W]=(O[_+768>>0]+O[T+1024>>0]+O[C+1280>>0]>>16)-128,x[W]=(O[_+1280>>0]+O[T+1536>>0]+O[C+1792>>0]>>16)-128;p=R(w,l,p,e,o),d=R(g,f,d,r,a),h=R(x,f,h,r,a),y+=32}Q+=X}if(m>=0){var Z=[];Z[1]=m+1,Z[0]=(1<<m+1)-1,M(Z)}return N(65497),new n(v)},function(){(new Date).getTime();t||(t=50),function(){for(var t=String.fromCharCode,n=0;n<256;n++)_[n]=t(n)}(),e=C(P,S),r=C(A,k),o=C(j,E),a=C(D,I),function(){for(var t=1,n=2,e=1;e<=15;e++){for(var r=t;r<n;r++)d[32767+r]=e,p[32767+r]=[],p[32767+r][1]=e,p[32767+r][0]=r;for(var o=-(n-1);o<=-t;o++)d[32767+o]=e,p[32767+o]=[],p[32767+o][1]=e,p[32767+o][0]=n-1+o;t<<=1,n<<=1}}(),function(){for(var t=0;t<256;t++)O[t]=19595*t,O[t+256>>0]=38470*t,O[t+512>>0]=7471*t+32768,O[t+768>>0]=-11059*t,O[t+1024>>0]=-21709*t,O[t+1280>>0]=32768*t+8421375,O[t+1536>>0]=-27439*t,O[t+1792>>0]=-5329*t}(),z(t),(new Date).getTime()}()}t.exports.encode=function(t,n){return(n=n||{}).quality=n.quality||50,n.exif=n.exif||"",{data:new e(n.quality).encode(t,n),width:t.width,height:t.height}}}).call(this,e(588).Buffer)},509:function(t,n,e){"use strict";e.d(n,"a",function(){return v}),e.d(n,"b",function(){return b}),e.d(n,"c",function(){return m});var r,o=e(16),a=e(20),i=e(312),u=e(113),c=e(145),s=e(117),l=e(17),f=e(98),p=e(62),d=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),h=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},y=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},v=function(t){function n(n){void 0===n&&(n=!1);var e=t.call(this)||this;return e.id="GET_POSE",e.payload={deprecated:n},e}return d(n,t),n}(o.a),b=function(t,n,e){Promise.all([t.market.waitForData(i.a),t.market.waitForData(u.a),t.market.waitForData(c.a)]).then(function(t){var e=t[0],r=t[1],o=t[2],i={position:{x:0,y:0,z:0},rotation:{x:0,y:0},projection:new Float32Array(16),sweep:"",mode:a.b.TRANSITIONING};n.addBinding(v,function(t){return h(void 0,void 0,void 0,function(){return y(this,function(n){return[2,m(i,e,r,o,t.deprecated)]})})})}),e.addCommandToInterface({version:"3.x",namespace:"Camera",name:"getPose",args:[]},function(){return new v}),e.addCommandToInterface(p.getPoseInterface,function(){return new v(!0)})},m=function(t,n,e,r,o){void 0===o&&(o=!1);var a=(new s.a).setFromQuaternion(n.pose.rotation,"YXZ"),i=e.currentSweep&&e.isSweepUnaligned(e.currentSweep);return t.position.x=n.pose.position.x,t.position.y=n.pose.position.y,t.position.z=n.pose.position.z,t.rotation.x=l.a.radToDeg(a.x),t.rotation.y=l.a.radToDeg(a.y),t.projection=n.pose.projection.asThreeMatrix4().transpose().elements,o?t.pano=e.currentSweep:t.sweep=e.currentSweep,t.mode=o?Object(f.c)(r.currentMode):Object(f.d)(r.currentMode,!i),t}},589:function(t,n,e){"use strict";e.d(n,"b",function(){return o}),e.d(n,"a",function(){return T}),e.d(n,"c",function(){return S});var r,o,a=e(16),i=e(0),u=e(151),c=e(62),s=e(336),l=e(403),f=e(113),p=e(48),d=e(320),h=e(1),y=e(435),v=e(456),b=e(3),m=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),w=function(){return(w=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},g=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},x=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},_=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,a=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},O=new b.a("Renderer");!function(t){t.Base64JPG="screenshot.base64.jpg",t.ArrayBufferJPG="screenshot.arraybuffer.jpg"}(o||(o={}));var T=function(t){function n(n){var e=t.call(this)||this;return e.id="SCREENSHOT",e.payload=w({},n),e}return m(n,t),n}(a.a),P=function(t){function n(){var n=t.call(this)||this;return n.id="EQSS",n.payload={},n}return m(n,t),n}(a.a),S=function(t,n,e){Promise.all([t.waitForModule(i.qb),n.issueCommandWhenBound(new y.d),t.waitForModule(i.U),t.market.waitForData(f.a)]).then(function(t){var e=_(t,4),r=e[0],a=e[1],i=e[2],u=e[3],c=new l.a(i.getSignedUrls()),s=r.getScene().camera,f=r.getScene().scene,b=s.clone();n.addBinding(T,function(t){return g(void 0,void 0,void 0,function(){var e,i,u;return x(this,function(c){switch(c.label){case 0:if(e=t.resolution,i=r.maxTextureSize,e.width<=0||e.width>i||e.height<=0||e.height>i)throw Error('"resolution" provided was not valid');return s.getWorldPosition(b.position),s.getWorldQuaternion(b.quaternion),b.projectionMatrix.copy(s.projectionMatrix),b.layers.mask=t.visibleObjects.mask,a.setSize(e.width,e.height),[4,n.issueCommand(new y.e(a,f,b))];case 1:return c.sent(),u=Object(v.a)(a),a.setSize(0,0),t.returnType===o.ArrayBufferJPG?[2,u.buffer]:[2,Object(v.b)(u)]}})})});var m=new h.a;s.getWorldDirection(m);var w=p.a.FORWARD.clone(),O=4096,S=2048;n.addBinding(P,function(t){return g(void 0,void 0,void 0,function(){var t,e,r,o;return x(this,function(i){switch(i.label){case 0:if(!u.currentSweep)throw new Error("Can only capture equirectangular projections while stationary in a sweep");return[4,c.load(u.currentSweep)];case 1:return t=i.sent(),e=u.getSweep(u.currentSweep),w.copy(p.a.FORWARD).applyQuaternion(e.rotation).setY(0),r=Object(d.p)(w,s.getWorldDirection(m).setY(0))+Math.PI,a.setSize(O,S),[4,n.issueCommand(new y.c(a,t,r))];case 2:return i.sent(),o=Object(v.a)(a,Object(v.d)(a.width,a.height,0,0)),a.setSize(0,0),[2,Object(v.b)(o)]}})})})});var r=function(n){if(void 0===n&&(n={}),!n.resolution){var e=t.market.tryGetData(s.a);e&&(n.resolution={width:e.width,height:e.height})}var r=u.a.ALL;n.visibleObjects&&(n.visibleObjects.hasOwnProperty("mattertags")&&!n.visibleObjects.mattertags&&r.removeLayers(t.getRenderLayer("mattertag-mesh")),n.visibleObjects.hasOwnProperty("sweeps")&&!n.visibleObjects.sweep&&r.removeLayers(t.getRenderLayer("sweep-pucks")),n.visibleObjects.hasOwnProperty("measurements")&&!n.visibleObjects.measurements&&r.removeLayers(t.getRenderLayer("measurements")));var a=o.Base64JPG;return n.returnType&&(a=n.returnType.returnType),new T({resolution:n.resolution,visibleObjects:r,returnType:a})};e.addCommandToInterface({version:"3.x",namespace:"Renderer",name:"takeScreenShot",args:["resolution","visibleObjects","returnType"]},r),e.addCommandToInterface({version:"3.x",namespace:"Renderer",name:"takeEquirectangular",args:[]},function(){return new P}),e.addCommandToInterface({version:"3.x",namespace:"Camera",name:"takeScreenShot",args:["resolution","visibleObjects"]},function(t){return O.warn("Camera.takeScreenshot deprecated, please use Renderer.takeScreenshot"),r(t)}),e.addCommandToInterface(c.screenShotInterface,function(t){return t.resolution=t.resolution||{},-1===t.resolution.width&&-1===t.resolution.height&&(t.resolution=void 0),r(t)})}},594:function(t,n,e){"use strict";e.d(n,"a",function(){return l}),e.d(n,"b",function(){return f});var r,o=e(16),a=e(27),i=e(436),u=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),c=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},s=function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},l=function(t){function n(n){var e=t.call(this)||this;return e.id="SWITCH_APP",e.payload={app:n},e}return u(n,t),n}(o.a),f=function(t,n,e){t.waitForModule(a.default).then(function(t){n.addBinding(l,function(n){return c(void 0,void 0,void 0,function(){return s(this,function(e){try{t.updateActiveApp(n.app)}catch(t){throw Error("Error: Can't switch application mode at this time")}return[2]})})})}),e.addCommandToInterface({version:"3.x",namespace:"App",name:"switchApplication",args:["app"]},function(t){var n=Object(i.d)(t.app);if(void 0===n)throw Error(t.app+" is not a valid application");return new l(n)})}},603:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var r,o=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),a=function(t){function n(){var n=t.call(this)||this;return n.message="Tried to start view-mode transition while another transition was active!",n}return o(n,t),n}(Error)},617:function(t,n,e){"use strict";var r;e.d(n,"a",function(){return r}),function(t){t.FPS="stat.fps"}(r||(r={}))},624:function(t,n,e){"use strict";var r,o=e(34),a=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),i=function(t){function n(n,e,r,o){var a=t.call(this)||this;return a.urls=n,a.sid=e,a.vrSupported=r,a.sweepList=o,a}return a(n,t),n}(o.a);n.a=i}}]);